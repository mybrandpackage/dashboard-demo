var ad=Object.defineProperty;var rd=(s,t,e)=>t in s?ad(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var tt=(s,t,e)=>(rd(s,typeof t!="symbol"?t+"":t,e),e);import{dm as sl,M as ps,by as il,o as w,a as D,b as g,i as S,r as I,H as mt,t as L,l as f,z as y,d as N,C as h,V as bt,A as M,G as F,_ as St,U as is,at as Be,aW as ld,y as nl,P as Mo,aA as cd,x as re,a3 as Po,D as Ft,cv as si,F as ht,E as vt,B as pt,I as Pe,J as Ie,Y as Ht,W as Lt,bS as Qs,bB as Js,R as lt,bL as Ct,as as be,cs as dd,ab as _a,p as Bs,$ as ud,m as Io,ag as hd,ai as fd,g as Vo,aj as ol,h as Us,a4 as al,al as Xe,aq as pd,ar as rl,cJ as ll,w as Lo,ao as md,k as Hs,dn as gd,ak as wd,u as vd,cR as bd,K as Li,Q as yd,aw as _d,cN as kd,N as cl,cO as xd,ac as mo,Z as dl,dg as Cd,a1 as ul,aB as Sd,aS as Td,aF as Dd,dp as Ad,aE as Eo,c5 as hl,S as Je,T as _t,au as Bn,dq as fl,bR as Ei,co as Ro,O as pl,j as go,cw as $d,ch as wo,bI as ml,dr as Md,s as Pd,c as Id,v as Vd}from"./vuetify-a54d7e62.js";import{u as xt,m as $e,l as Ri,b as He,h as Ld,C as Ed,a as Oe,V as fi,e as Un,c as Rd}from"./index-ec06e4d1.js";import{b as me,u as ye,I as ii,c as zd,a as Od}from"./ServiceRestrictionIllustration-157ed40f.js";import{_ as ri,e as ce,a8 as Fd,k as kt,i as ms,r as ls,A as gs,B as gl,s as Jt,n as ft,Z as Bd,M as wl,v as ws,U as Ud,a as Hd,W as Nd,f as jd,a9 as Wd,aa as qd,F as Yd,b as pe,d as ss,t as Re,V as Ki,ab as Kd,h as Tn,g as vs,z as zi,C as vl,ac as Xd,D as Gd,w as Zd,x as Qd}from"./snackbar-store-09a12cd9.js";import{a as bl,p as Jd,S as Ns,m as Hn,n as de,_ as yl,r as tu,q as eu,j as Te,k as De,l as Ae,g as zo,i as _l,C as Ue,e as su,A as iu,f as kl,V as nu,o as ou,v as ka,s as au,N as ru,t as lu,b as cu,c as du,T as uu,L as hu,B as fu,M as pu}from"./vuedraggable.umd-95bc4291.js";import{e as Ne,f as ys,v as mu,g as Xi,p as xl,i as vo,_ as Gi,h as Dt,j as Oo,k as gu,l as wu,R as Cl,T as Dn,K as Fo,A as Sl,u as vu,m as bu}from"./TicketEntry-82c99ab7.js";import{B as yu,b as xe,E as _u,V as oe,p as ku}from"./purify.es-48fd10f6.js";import{J as xa,f as Gs,V as vn,e as Ze,K as xu,L as Ca,a as Tl,g as Le,s as Yt,M as Cu,p as pi,h as as,i as mi,j as en}from"./date-helpers-c645abed.js";import{u as Zi,G as Su}from"./GlobalNav-ddb7cab4.js";import{b as Dl,h as Nn,a as Bo,t as we}from"./service-mixins-d1b95a8a.js";import{U as Is,V as Al,a as bo}from"./VRadioGroup-f9fbc9f8.js";import{_ as ut,u as Tu}from"./SpiceworksButton-9aecd653.js";import{V as jn}from"./VForm-d7fecbe6.js";import{V as ni}from"./VDatePicker-a9f94075.js";import{V as Du}from"./VContainer-adb714d9.js";import"./app-config-store-3dc0ddd6.js";const Au=s=>{const{touchstartX:t,touchendX:e,touchstartY:i,touchendY:n}=s,o=.5,a=16;s.offsetX=e-t,s.offsetY=n-i,Math.abs(s.offsetY)<o*Math.abs(s.offsetX)&&(s.left&&e<t-a&&s.left(s),s.right&&e>t+a&&s.right(s)),Math.abs(s.offsetX)<o*Math.abs(s.offsetY)&&(s.up&&n<i-a&&s.up(s),s.down&&n>i+a&&s.down(s))};function $u(s,t){var i;const e=s.changedTouches[0];t.touchstartX=e.clientX,t.touchstartY=e.clientY,(i=t.start)==null||i.call(t,{originalEvent:s,...t})}function Mu(s,t){var i;const e=s.changedTouches[0];t.touchendX=e.clientX,t.touchendY=e.clientY,(i=t.end)==null||i.call(t,{originalEvent:s,...t}),Au(t)}function Pu(s,t){var i;const e=s.changedTouches[0];t.touchmoveX=e.clientX,t.touchmoveY=e.clientY,(i=t.move)==null||i.call(t,{originalEvent:s,...t})}function Iu(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:s.left,right:s.right,up:s.up,down:s.down,start:s.start,move:s.move,end:s.end};return{touchstart:e=>$u(e,t),touchend:e=>Mu(e,t),touchmove:e=>Pu(e,t)}}function Vu(s,t){var r;const e=t.value,i=e!=null&&e.parent?s.parentElement:s,n=(e==null?void 0:e.options)??{passive:!0},o=(r=t.instance)==null?void 0:r.$.uid;if(!i||!o)return;const a=Iu(t.value);i._touchHandlers=i._touchHandlers??Object.create(null),i._touchHandlers[o]=a,sl(a).forEach(l=>{i.addEventListener(l,a[l],n)})}function Lu(s,t){var o,a;const e=(o=t.value)!=null&&o.parent?s.parentElement:s,i=(a=t.instance)==null?void 0:a.$.uid;if(!(e!=null&&e._touchHandlers)||!i)return;const n=e._touchHandlers[i];sl(n).forEach(r=>{e.removeEventListener(r,n[r])}),delete e._touchHandlers[i]}const $l={mounted:Vu,unmounted:Lu},Eu=$l;var Sa=/^(GTM|G)-[0-9A-Z]+$/;function to(s){if(typeof s!="string"||!Sa.test(s)){let t=String(s).toUpperCase().replace(/.*-|[^0-9A-Z]/g,""),e=t.length===0?"":` Did you mean 'GTM-${t}' or 'G-${t}'?`;throw new Error(`'${s}' is not a valid GTM-ID (${Sa}).${e}`)}}function ki(s,t="dataLayer"){return s[t]||(s[t]=[]),s[t]}function ti(s,t){let e=document,i=e.createElement("script"),n=c=>{var d;(d=t.onReady)==null||d.call(t,{id:s,script:i}),i.removeEventListener("load",n)};i.addEventListener("load",n);let o=t.dataLayerName??"dataLayer";if(ki(window,o).push({event:"gtm.js","gtm.start":new Date().getTime()}),!s)return i;i.async=!t.defer,i.defer=!!(t.defer||t.compatibility),t.nonce&&i.setAttribute("nonce",t.nonce),t.scriptType&&(i.type=t.scriptType);let a=new URLSearchParams({id:s,...t.dataLayerName?{l:t.dataLayerName}:{},...t.queryParams??{}}),r=t.source??"https://www.googletagmanager.com/gtm.js";i.src=`${r}?${a}`;let l=t.parentElement??e.body;if(typeof(l==null?void 0:l.appendChild)!="function")throw new Error("parentElement must be a DOM element");return l.appendChild(i),i}function Ru(s="https://www.googletagmanager.com/gtm.js"){return Array.from(document.getElementsByTagName("script")).some(t=>t.src.includes(s))}var zu=class{constructor(t){tt(this,"id");tt(this,"options");tt(this,"scriptElements",[]);tt(this,"isInBrowserContext",()=>typeof window<"u");if(Array.isArray(t.id))for(let e of t.id)to(typeof e=="string"?e:e.id);else to(t.id);this.id=t.id,this.options={enabled:!0,debug:!1,loadScript:!0,defer:!1,compatibility:!1,dataLayerName:"dataLayer",...t},delete this.options.id}enabled(){return this.options.enabled??!0}enable(t=!0,e){if(this.options.enabled=t,this.isInBrowserContext()&&t&&!Ru(e)&&this.options.loadScript)if(Array.isArray(this.id))this.id.forEach(i=>{let n;typeof i=="string"?n=ti(i,{...this.options}):n=ti(i.id,{...this.options,queryParams:i.queryParams}),this.scriptElements.push(n)});else{let i=ti(this.id,{...this.options});this.scriptElements.push(i)}}debugEnabled(){return this.options.debug??!1}debug(t){this.options.debug=t}dataLayer(){return this.isInBrowserContext()&&this.options.enabled?ki(window,this.options.dataLayerName):!1}trackView(t,e,i={}){let n=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${n?"":"(disabled)"}]: Dispatching TrackView`,{screenName:t,path:e}),n&&ki(window,this.options.dataLayerName).push({...i,event:this.options.trackViewEventProperty??"content-view","content-name":e,"content-view-name":t})}trackEvent({event:t,category:e=null,action:i=null,label:n=null,value:o=null,noninteraction:a=!1,...r}={}){let l=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${l?"":"(disabled)"}]: Dispatching event`,{event:t,category:e,action:i,label:n,value:o,...r}),l&&ki(window,this.options.dataLayerName).push({event:t??"interaction",target:e,action:i,"target-properties":n,value:o,"interaction-type":a,...r})}push(t){let e=this.isInBrowserContext()&&(this.options.enabled??!1);this.options.debug&&console.log(`[GTM-Support${e?"":"(disabled)"}]: Dispatching event`,t),e&&ki(window,this.options.dataLayerName).push(t)}},Zt;function Ou(s,t={id:""}){t={trackOnNextTick:!1,...t},Zt=new zu(t),s.config.globalProperties.$gtm=Zt,Zt.isInBrowserContext()&&(t.vueRouter&&Fu(s,t.vueRouter,t.ignoredViews,t.trackOnNextTick,t.vueRouterAdditionalEventData),Zt.options.enabled&&Zt.options.loadScript&&(Array.isArray(t.id)?t.id.forEach(e=>{if(typeof e=="string")ti(e,t);else{let i={...t};e.queryParams!=null&&(i.queryParams={...i.queryParams,...e.queryParams}),ti(e.id,i)}}):ti(t.id,t))),s.provide("gtm",t)}function Fu(s,t,e=[],i,n=()=>({})){function o(a,r){return a instanceof Error?!!(a.type&r):!1}t.afterEach(async(a,r,l)=>{var p,m,b;if(typeof a.name!="string"||Array.isArray(e)&&e.includes(a.name)||typeof e=="function"&&e(a,r))return;let c=a.meta&&typeof a.meta.gtm=="string"&&a.meta.gtm?a.meta.gtm:a.name;o(l,4)?Zt!=null&&Zt.debugEnabled()&&console.log(`[VueGtm]: '${c}' not tracked due to navigation aborted`):o(l,8)&&(Zt!=null&&Zt.debugEnabled())&&console.log(`[VueGtm]: '${c}' not tracked due to navigation cancelled`);let d={...await n(a,r),...(p=a.meta)==null?void 0:p.gtmAdditionalEventData},u=((b=(m=t.options)==null?void 0:m.history)==null?void 0:b.base)??"";u.endsWith("/")||(u+="/"),u+=a.fullPath.startsWith("/")?a.fullPath.substring(1):a.fullPath,i?ps(()=>{Zt==null||Zt.trackView(c,u,d)}):Zt==null||Zt.trackView(c,u,d)})}function Bu(s){return{install:t=>Ou(t,s)}}function Uu(){var s,t,e,i,n;return((n=(i=(e=(t=(s=il())==null?void 0:s.appContext)==null?void 0:t.app)==null?void 0:e.config)==null?void 0:i.globalProperties)==null?void 0:n.$gtm)??Zt}const Hu={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none"},Nu=g("circle",{cx:"9",cy:"9",r:"8",stroke:"#999","stroke-dasharray":"1 3","stroke-linecap":"round"},null,-1),ju=[Nu];function Wu(s,t){return w(),D("svg",Hu,[...ju])}const qu={render:Wu};function Ml(s){const t=S(()=>s.value.hasChanged&&s.value.liveState==="new"),e=S(()=>{var a;return t.value||((a=s.value.alerts)==null?void 0:a.length)>0}),i=S(()=>{const a=s.value.dueDate&&Date.parse(s.value.dueDate)<Date.now();return s.value.alerted||a}),n=S(()=>s.value.priority==="3"?"mdi-arrow-down":s.value.priority==="2"?"mdi-minus":"mdi-arrow-up"),o=S(()=>["error","medium-priority","success"][s.value.priority-1]);return{isNewTicketLivePoll:t,shouldHighlightRow:e,showAlertedIcon:i,priorityIcon:n,priorityIconColor:o}}const Yu={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#434648"},Ku=g("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),Xu=g("path",{d:"M7.25 12.5 4.75 9H3.5v6h1.25v-3.5L7.3 15h1.2V9H7.25zM9.5 15h4v-1.25H11v-1.11h2.5v-1.26H11v-1.12h2.5V9h-4zm9.75-6v4.5h-1.12V9.99h-1.25v3.52h-1.13V9H14.5v5c0 .55.45 1 1 1h4c.55 0 1-.45 1-1V9z"},null,-1),Gu=[Ku,Xu];function Zu(s,t){return w(),D("svg",Yu,[...Gu])}const Pl={render:Zu},Qu={class:"tw-px-4 tw-py-3 tw-text-sm tw-text-earl-1000"},Ju={class:"tw-flex tw-justify-between"},th={class:"tw-flex tw-max-w-40vw tw-items-center"},eh={class:"tw-px-1"},sh={class:"tw-my-1 tw-flex tw-items-center tw-justify-between"},ih={class:"tw-flex tw-items-center"},nh={class:"tw-mx-1 tw-text-earl-500"},oh={class:"tw-clear-both tw-line-clamp-2 tw-max-w-90vw tw-break-words"},ah={__name:"MobileTicketRow",props:{ticket:{type:Object,required:!0}},setup(s){const t=s,e=xt(),i=me(),n=ye(),o=I(t.ticket),{isNewTicketLivePoll:a,showAlertedIcon:r,priorityIcon:l,priorityIconColor:c,shouldHighlightRow:d}=Ml(o),{formatDateTimeRelative:u}=Ne(),p=S(()=>e.state.users),m=S(()=>p.value.find(x=>{var C;return x.id===((C=t.ticket.assignee)==null?void 0:C.id)})||null),b=S(()=>d.value?"tw-font-bold":"tw-font-medium"),v=S(()=>u(t.ticket.updatedAt)),_=x=>{const{page:C,...T}=n.params;i.replace({name:"MobileTicketHistory",params:T,query:{...n.query,ticket_number:x,from_page_number:n.params.page}})};return(x,C)=>(w(),D("tr",{class:"tw-cursor-pointer tw-border-b-2 tw-border-dotted tw-border-earl-100 hover:tw-bg-earl-100",onClick:C[0]||(C[0]=T=>_(o.value.ticketNumber))},[g("td",Qu,[g("div",Ju,[g("div",{class:mt(`tw-max-w-50vw tw-truncate ${b.value}`)},L(o.value.creator.name),3),g("div",th,[g("span",eh,L(v.value),1),f(bt,{color:h(c)},{default:y(()=>[N(L(h(l)),1)]),_:1},8,["color"])])]),g("div",sh,[g("div",{class:mt(`tw-line-clamp-2 tw-max-w-60vw tw-break-words ${b.value}`)},L(o.value.summary),3),g("div",ih,[h(a)?(w(),M(h(Pl),{key:0,class:"tw-mx-1 tw--mt-px tw-ml-1"})):h(r)?(w(),M(bt,{key:1,color:"earl-700",size:"small",class:"tw-mx-1 tw-mb-0.5"},{default:y(()=>[N(" mdi-alert-circle-outline ")]),_:1})):F("",!0),g("span",nh,L(`#${o.value.ticketNumber}`),1),m.value?(w(),M(ri,{key:2,user:m.value,size:18,color:"red",class:"tw-mb-0.5"},null,8,["user"])):(w(),M(h(qu),{key:3,class:"tw-mb-0.5"}))])]),g("div",oh,L(o.value.description.substring(0,150)),1)])]))}};const rh={computed:{...$e(["refreshGrowlerProps"]),clickAction(){return this.refreshGrowlerProps.onClick?()=>{this.refreshGrowlerProps.onClick(),this.close()}:()=>{}},message(){const{errors:s}=this.refreshGrowlerProps.message;return s||this.refreshGrowlerProps.message},objectMessages(){const s=this.message;let t=[];return Object.keys(s).forEach(e=>{t=t.concat(Array.isArray(s[e])&&s[e].map(i=>`${Ri.capitalize(e)} ${i}`))}),t},displayMessage(){const s=this.message;return Array.isArray(s)?s[0]:Ri.isPlainObject(s)?this.objectMessages[0]:s.includes("<html")?"Oops! something went wrong, please try again":s}},methods:{...He(["showRefreshGrowler"]),close(){this.showRefreshGrowler({display:!1,onClick:null})}}},lh={key:0,class:"tw-flex tw-items-center"},ch=g("div",{class:"align-center tw-hidden tw-pl-2 tw-text-earl-1000 lg:tw-block"}," Refreshing... ",-1),dh={class:"tw-pl-2"};function uh(s,t,e,i,n,o){return w(),M(Fd,{modelValue:s.refreshGrowlerProps.display,"onUpdate:modelValue":t[1]||(t[1]=a=>s.refreshGrowlerProps.display=a),name:"growler",rounded:"pill",class:"elevation-24 tw-mt-5 lg:tw--mt-16",color:"white",timeout:s.refreshGrowlerProps.timeout,transition:"fade-transition",absolute:"",location:"top"},{default:y(()=>[is(s.$slots,"default",{class:"tw-relative"},()=>[s.refreshGrowlerProps.isLoading?(w(),D("div",lh,[f(Be,{size:18,width:2,color:"earl-1000",indeterminate:"",class:"tw--mr-2 tw-px-3 lg:tw-mr-0"}),f(ce,{class:"pa-0 ma-0 d-flex"},{default:y(()=>[ch]),_:1})])):(w(),D("div",{key:1,class:mt(`tw-flex tw-items-center ${s.refreshGrowlerProps.onClick?"tw-cursor-pointer":""}`),onClick:t[0]||(t[0]=a=>o.clickAction())},[f(ce,{class:"pa-0 d-flex align-center tw-text-earl-1000"},{default:y(()=>[g("div",dh,L(o.displayMessage),1)]),_:1})],2))])]),_:3},8,["modelValue","timeout"])}const Il=St(rh,[["render",uh]]);var _s={exports:{}},_e={exports:{}};const ts=Symbol("Cleanup Function"),Vl=Symbol("Timeout Token"),Zs=Symbol("Signal Reason"),ve=Symbol("Unset"),[bn,hh]=function(){var t=new AbortController,e=!!Object.getOwnPropertyDescriptor(Object.getPrototypeOf(t.signal),"reason");try{t.abort()}catch{}return[e,Ho(t.signal.reason)]}();let An=class{constructor(t=new AbortController){this.controller=t,this.signal=t.signal,this.signal[Zs]=ve;var e,i=(n,o)=>{var a=()=>{if(o&&this.signal){let r=Wn(this.signal);this._trackSignalReason(r),o(r!==ve?r:void 0)}o=null};this.signal.addEventListener("abort",a,!1),e=()=>{this.signal&&(this.signal.removeEventListener("abort",a,!1),this.signal.pr&&(this.signal.pr[ts]=null)),a=null}};this.signal.pr=new Promise(i),this.signal.pr[ts]=e,this.signal.pr.catch(e),i=e=null}abort(...t){var e=t.length>0?t[0]:ve;this._trackSignalReason(e),this.controller&&(bn&&e!==ve?this.controller.abort(e):this.controller.abort())}discard(){this.signal&&(this.signal.pr&&(this.signal.pr[ts]&&this.signal.pr[ts](),this.signal.pr=null),delete this.signal[Zs],bn||(this.signal.reason=null),this.signal=null),this.controller=null}_trackSignalReason(t){this.signal&&t!==ve&&(!bn&&!("reason"in this.signal)&&(this.signal.reason=t),this.signal[Zs]===ve&&(this.signal[Zs]=t))}};_e.exports={CLEANUP_FN:ts,TIMEOUT_TOKEN:Vl,UNSET:ve,getSignalReason:Wn,cancelToken:An,signalPromise:Uo,processTokenOrSignal:Ll,deferred:El,isFunction:Rl,isPromise:zl,invokeAbort:Ol};_e.exports.CLEANUP_FN=ts;_e.exports.TIMEOUT_TOKEN=Vl;_e.exports.UNSET=ve;_e.exports.getSignalReason=Wn;_e.exports.cancelToken=An;_e.exports.signalPromise=Uo;_e.exports.processTokenOrSignal=Ll;_e.exports.deferred=El;_e.exports.isFunction=Rl;_e.exports.isPromise=zl;_e.exports.invokeAbort=Ol;function Wn(s){return s&&s.aborted?bn&&hh?Ho(s.reason)?ve:s.reason:Zs in s?s[Zs]:ve:ve}function Uo(s){if(s.pr)return s.pr;var t,e=new Promise(function(n,o){t=()=>{if(o&&s){let a=Wn(s);o(a!==ve?a:void 0)}o=null},s.addEventListener("abort",t,!1)});return e[ts]=function(){s&&(s.removeEventListener("abort",t,!1),s=null),e&&(e=e[ts]=t=null)},e.catch(e[ts]),e}function Ll(s){s instanceof AbortController&&(s=new An(s));var t=s&&s instanceof An?s.signal:s,e=Uo(t);return{tokenOrSignal:s,signal:t,signalPr:e}}function El(){var s,t=new Promise(e=>s=e);return{pr:t,resolve:s}}function Rl(s){return typeof s=="function"}function zl(s){return s&&typeof s=="object"&&typeof s.then=="function"}function Ho(s){return typeof s=="object"&&s instanceof Error&&s.name=="AbortError"}function Ol(s,t){!Ho(t)&&t!==ve?s.abort(t):s.abort()}var fh=_e.exports,{CLEANUP_FN:Ta,TIMEOUT_TOKEN:Fl,UNSET:Oi,getSignalReason:Bl,cancelToken:li,signalPromise:ph,processTokenOrSignal:Ul,isFunction:mh,invokeAbort:qn}=fh;_s.exports=Object.assign(wh,{cancelToken:li,delay:No,timeout:Hl,signalRace:ql,signalAll:Yl,tokenCycle:Kl});var gh=_s.exports.cancelToken=li;_s.exports.delay=No;_s.exports.timeout=Hl;_s.exports.signalRace=ql;_s.exports.signalAll=Yl;_s.exports.tokenCycle=Kl;function wh(s){return function(e,...i){var n,o;if({tokenOrSignal:e,signal:n,signalPr:o}=Ul(e),n.aborted)return o;var a=o.catch(function(u){var p=Bl(n);p=p!==Oi?p:u;try{var m=r.return();throw m.value!==void 0?m.value:p!==Oi?p:void 0}finally{r=l=a=c=null}}),{it:r,result:l}=vh.call(this,s,n,...i),c=Promise.race([l,a]);if(e!==n&&e[Fl]){let d=function(p){qn(e,p),mh(e.discard)&&e.discard(),e=d=null};c.then(d,d)}else c.catch(()=>{}),e=null;return i=null,c}}function No(s,t){typeof s=="number"&&typeof t!="number"&&([t,s]=[s,t]);var e,i;return s&&({tokenOrSignal:s,signal:e,signalPr:i}=Ul(s)),e&&e.aborted?i:new Promise(function(o,a){e&&(i.catch(function(){if(a&&e&&r){let c=Bl(e);clearTimeout(r),a(c!==Oi?c:`delay (${t}) interrupted`),o=a=r=e=null}}),i=null);var r=setTimeout(function(){o(`delayed: ${t}`),o=a=r=e=null},t)})}function Hl(s,t="Timeout"){s=Number(s)||0;var e=new li;return No(e.signal,s).then(()=>i(t),i),Object.defineProperty(e,Fl,{value:!0,writable:!1,enumerable:!1,configurable:!1}),e;function i(...n){qn(e,n.length>0?n[0]:Oi),e.discard(),e=null}}function Nl(s){return s.reduce(function(e,i){var n=ph(i);return e[0].push(n),i.pr||e[1].push(n),e},[[],[]])}function jl(s,t,e){s.then(function(n){qn(t,n),t.discard(),t=null}).then(function(){for(let n of e)n[Ta]&&n[Ta]();e=null})}function Wl(s){return s.catch(t=>t)}function ql(s){var t=new li,[e,i]=Nl(s);return jl(Wl(Promise.race(e)),t,i),t.signal}function Yl(s){var t=new li,[e,i]=Nl(s);return jl(Promise.all(e.map(Wl)),t,i),t.signal}function Kl(){var s;return function(...e){return s&&(qn(s,e.length>0?e[0]:Oi),s.discard()),s=new li}}function vh(s,...t){var e=s.apply(this,t);return s=t=null,{it:e,result:function i(n){try{var o=e.next(n);n=null}catch(a){return Promise.reject(a)}return function a(r){var l=Promise.resolve(r.value);return r.done?e=null:(l=l.then(i,function(d){return Promise.resolve(e.throw(d)).then(a)}),l.catch(function(){e=null})),r=null,l}(o)}()}}var bh=_s.exports;const yh=Ld(bh);var _h=function(s){return s._runningInstances.length>=s._maxConcurrency},kh=function(s){var t=s._activeInstances[0];t&&t.cancel()},xh=function(s){s._enqueuedInstances.forEach(function(t){t.isEnqueued=!1,t.isDropped=!0})};function gi(s,t){return t?function(e,i,n){return S(function(){return e().filter(function(o){return o[i]})})}(function(){return s()._instances},t):S(function(){return[]})}function Ch(s){return S(function(){return s().length})}function Da(s){return S(function(){var t=s();return t[t.length-1]})}function Sh(s){return S(function(){return s()[0]})}function Xl(s){return Mo(s)}function Aa(s){return new Promise(function(t){return setTimeout(t,s)})}function Th(s,t,e){var i,n,o={id:e.id,isDropped:!1,isEnqueued:!1,hasStarted:!1,isRunning:!1,isFinished:!1,isCanceling:!1,isCanceled:S(function(){return a.isCanceling&&a.isFinished}),isActive:S(function(){return a.isRunning&&!a.isCanceling}),isSuccessful:!1,isNotDropped:S(function(){return!a.isDropped}),isError:S(function(){return!!a.error}),status:S(function(){var l=[[a.isRunning,"running"],[a.isEnqueued,"enqueued"],[a.isCanceled,"canceled"],[a.isCanceling,"canceling"],[a.isDropped,"dropped"],[a.isError,"error"],[a.isSuccessful,"success"]].find(function(c){return c[0]});return l&&l[1]}),error:null,value:null,cancel:function(l){if((l===void 0?{force:!1}:l).force||(a.isCanceling=!0,a.isEnqueued&&(a.isFinished=!0),a.isEnqueued=!1),a.token&&a._canAbort){a.token.abort("cancel");try{a.token.discard()}catch{}a.token=void 0,a._canAbort=!1}},canceledOn:function(l){return l.pr.catch(function(c){a.cancel()}),a},_run:function(){(function(l,c,d,u){var p=new gh,m=yh(c,p);function b(){l.isRunning=!1,l.isFinished=!0}l.token=p,l.hasStarted=!0,l.isRunning=!0,l.isEnqueued=!1,m.call.apply(m,[l,p].concat(d)).then(function(v){l.value=v,l.isSuccessful=!0,b(),l._deferredObject.resolve(v),l._canAbort=!1,u.onFinish(l)}).catch(function(v){v!=="cancel"&&(l.error=v),b(),l._shouldThrow&&l._deferredObject.reject(v),u.onFinish(l)})})(a,s,t,e)},_handled:!0,_deferredObject:(i={},n=new Promise(function(l,c){i.resolve=l,i.reject=c}),i.promise=n,i),_shouldThrow:!1,_canAbort:!0,then:function(l,c){return a._shouldThrow=!0,a._deferredObject.promise.then(l,c)},catch:function(l,c){return c===void 0&&(c=!0),a._shouldThrow=c,a._deferredObject.promise.catch(l)},finally:function(l){return a._shouldThrow=!0,a._deferredObject.promise.finally(l)}},a=Xl(o),r=e.modifiers;return r.drop?a.isDropped=!0:r.enqueue?a.isEnqueued=!0:a._run(),a}function Dh(s,t){t===void 0&&(t={cancelOnUnmount:!0});var e=il(),i=ld(),n={_isRestartable:!1,_isDropping:!1,_isEnqueuing:!1,_isKeepingLatest:!1,_maxConcurrency:1,_hasConcurrency:S(function(){return o._isRestartable||o._isDropping||o._isEnqueuing||o._isKeepingLatest}),isIdle:S(function(){return!o.isRunning}),isRunning:S(function(){return!!o._instances.find(function(a){return a.isRunning})}),isError:S(function(){return!(!o.last||!o.last.isError)}),_instances:[],_successfulInstances:gi(function(){return o},"isSuccessful"),_runningInstances:gi(function(){return o},"isRunning"),_enqueuedInstances:gi(function(){return o},"isEnqueued"),_notDroppedInstances:gi(function(){return o},"isNotDropped"),_activeInstances:gi(function(){return o},"isActive"),performCount:Ch(function(){return o._instances}),last:Da(function(){return o._notDroppedInstances}),lastSuccessful:Da(function(){return o._successfulInstances}),firstEnqueued:Sh(function(){return o._enqueuedInstances}),cancelAll:function(a){var r=(a===void 0?{force:!1}:a).force;o._instances.forEach(function(l){try{(r||!l.isDropped&&!l.isFinished)&&l.cancel({force:r})}catch(c){if(c!=="cancel")throw c}})},perform:function(){var a=arguments,r={enqueue:!1,drop:!1};o._hasConcurrency&&_h(o)&&(o._isDropping&&(r.drop=!0),o._isRestartable&&kh(o),o._isKeepingLatest&&xh(o),(o._isEnqueuing||o._isKeepingLatest)&&(r.enqueue=!0));var l=function(){return Ah(o)},c=function(){return Th(s,[].slice.call(a),{modifiers:r,onFinish:l,scope:i,id:o._instances.length+1})},d=i.active?i.run(c):c();return i.active||console.warn("Task instance has been created in inactive scope. Perhaps youre creating task out of setup?"),o._instances=[].concat(o._instances,[d]),d},clear:function(){this.cancelAll({force:!0}),this._instances=[]},destroy:function(){i.stop(),this.clear()},restartable:function(){return o._resetModifierFlags(),o._isRestartable=!0,o},drop:function(){return o._resetModifierFlags(),o._isDropping=!0,o},enqueue:function(){return o._resetModifierFlags(),o._isEnqueuing=!0,o},keepLatest:function(){return o._resetModifierFlags(),o._isKeepingLatest=!0,o},_resetModifierFlags:function(){o._isKeepingLatest=!1,o._isRestartable=!1,o._isEnqueuing=!1,o._isDropping=!1},maxConcurrency:function(a){return o._maxConcurrency=a,o}},o=Xl(n);return e&&t.cancelOnUnmount&&nl(function(){o._instances&&o.destroy()}),o}function Ah(s){if(s._isEnqueuing||s._isKeepingLatest){var t=s.firstEnqueued;t&&t._run()}}function Gl(){const s=ye(),t=me(),e=xt(),i=new ys,n=I(null),o=I(null),a=I(!0),r=I(!1),l=I(Date.now()),c=I(null),d=S(()=>e.state.appConfig),u=S(()=>e.state.currentTicketView),p=S(()=>e.state.ticketsLivePoll),m=S(()=>e.state.ticketsAlertsLivePoll),b=S(()=>e.getters.currentUser),v=S(()=>e.state.tickets);cd(()=>{z(),j()}),nl(()=>{x()});function _(){b.value&&b.value.wantsLiveUpdates&&(a.value=!0,C(),$(),n.value.perform())}function x(){var V;a.value=!1,(V=n.value)==null||V.cancelAll()}function C(){c.value=d.value.minPollInterval}function T(){const V=c.value,O=d.value.maxPollInterval,B=V*2;c.value=V>O?O:B}function $(){n.value=Dh(function*(){yield Aa(c.value);try{for(;a.value;){const V=Date.now();i.livePoll(l.value).then(O=>{!O.notifications||O.notifications.length===0?T():(k(O,V),C()),l.value=V},()=>{x()}),yield Aa(c.value)}}catch{x(),e.dispatch("showSnackbar",{display:!0,message:"Unable to keep tickets table updated.",type:"error"})}}).restartable()}async function k(V){const O=A(V);let B=!1;if(O.forEach(U=>{var et;const H=new Date(U.createdAt).valueOf()>l.value,J=["EndUser","end_user"].includes(U.creator.type)?"endUsers":"users",K=V[J].find(ct=>ct.id===U.creator.id),G=b.value.email!==K.email,ot=U.action!=="ticket created"||!P(U.ticket.id);H&&G&&ot&&((et=U.ticket)!=null&&et.id)&&((U==null?void 0:U.action)==="ticket created"&&(B=!0),e.dispatch("addTicketLivePoll",{id:U.ticket.id,state:B?"new":"updated"}))}),B&&parseInt(s.params.page)===1&&await e.dispatch("getTickets"),z(!0),V.alerts){const U={};V.alerts.forEach(H=>{H.type!=="open"&&(U[H.ticketId]?U[H.ticketId].alerts.push(H):U[H.ticketId]={alerts:[H]})}),Object.keys(U).forEach(H=>{e.dispatch("setAlertsToLocalTicket",{id:parseInt(H),alerts:U[H].alerts})})}}function A(V){let O=[];return["labors","comments","changes"].forEach(B=>{Object.prototype.hasOwnProperty.call(V,B)&&V[B]&&(O=O.concat(V[B]))}),O}function P(V){return v.value.find(O=>O.id===V)}function z(V=!1){const O=p.value.new.length;p.value.new.forEach(B=>{e.dispatch("setLocalTicketChanged",{id:B,liveState:"new"})}),p.value.updated.forEach(B=>{e.dispatch("setLocalTicketChanged",{id:B,liveState:"updated"})}),V&&O>0&&parseInt(s.params.page)>1&&e.dispatch("showRefreshGrowler",{display:!0,message:`${O} new ticket${O>1?"s":""}`,onClick:()=>{t.push({name:"Tickets",params:{page:1,view:u.value.name_path},query:s.query})}})}function j(){m.value.forEach(V=>{e.dispatch("setAlertsToLocalTicket",V)})}return{liveData:o,doLivePoll:a,doNotifications:r,lastTimestamp:l,appConfig:d,currentTicketView:u,ticketsLivePoll:p,ticketsAlertsLivePoll:m,currentUser:b,startLivePoll:_,stopLivePoll:x,setLocalTicketsState:z,checkTicketAlertsLivePoll:j}}const jo=s=>(Pe("data-v-497a21c2"),s=s(),Ie(),s),$h={class:"tw-sticky tw-top-0 tw-z-10 tw-bg-white"},Mh={ref:"tableHeader",class:"spec-table-header tw-flex tw-flex-col"},Ph={key:0,class:"tw-flex tw-h-12 tw-items-center tw-justify-between tw-border-b tw-border-earl-100 tw-px-4 tw-py-2"},Ih=["value"],Vh={class:"tw-relative tw-w-full"},Lh={class:"tw-flex tw-items-center tw-justify-between tw-border-b tw-border-earl-200 tw-pl-4"},Eh={class:"tw-flex tw-items-center"},Rh={class:"tw-font-medium"},zh={class:"tw-flex tw-items-center"},Oh={key:0},Fh=jo(()=>g("span",{class:"tw-text-earl-500"},"Loading tickets...",-1)),Bh={key:0,class:"tw-text-earl-500"},Uh={key:1,class:"tw-text-earl-500"},Hh=jo(()=>g("br",null,null,-1)),Nh=jo(()=>g("br",null,null,-1)),jh={__name:"MobileTickets",setup(s){const t=xt(),e=me(),i=ye(),n=I(15),o=I(!0),{startLivePoll:a}=Gl(),r=S(()=>t.state.currentTicketView),l=S(()=>t.state.tickets),c=S(()=>t.state.ticketsLoading),d=S(()=>t.state.meta),u=S(()=>t.state.ticketViews),p=S(()=>t.state.appConfig),m=S(()=>t.state.organizations),b=S({get:()=>i.query.q,set:Ri.debounce(C=>{const T=i.query.sort.split("-")[0],$=["id","priority","status","created_at","updated_at","due_at"].includes(T)?i.query.sort:"updated_at-desc";e.replace({name:"Tickets",params:{...i.params,page:1},query:{sort:$,q:C}})},500)}),v=S({get:()=>r.value,set:C=>{e.push({name:"Tickets",params:{page:1,view:C.name_path},query:i.query})}}),_=S({get:()=>parseInt(i.params.page),set:C=>{e.push({name:"Tickets",params:{...i.params,page:C},query:i.query})}}),x=()=>{t.dispatch("getTickets",!0)};return re(()=>{const C=document.querySelector("#footer-leaderboard-ad");C&&(C.style.display="block"),document.body.classList.add("hide-mobile-domestic-nav"),a()}),Po(()=>{document.body.classList.remove("hide-mobile-domestic-nav")}),(C,T)=>{var $;return w(),D("div",null,[p.value.mobileAppRequest?F("",!0):(w(),M(bl,{key:0})),g("div",$h,[g("div",Mh,[p.value.mobileAppRequest?F("",!0):(w(),D("div",Ph,[!b.value&&o.value?Ft((w(),D("select",{key:0,"onUpdate:modelValue":T[0]||(T[0]=k=>v.value=k),class:"view-selector tw-flex-none tw-text-base tw-font-bold tw-text-earl-1000"},[(w(!0),D(ht,null,vt(u.value,k=>(w(),D("option",{key:k.id,value:k},L(k.name),9,Ih))),128))],512)),[[si,v.value]]):F("",!0),f(kt,{modelValue:b.value,"onUpdate:modelValue":T[1]||(T[1]=k=>b.value=k),placeholder:"Search...",class:mt(["search tw-border-earl-200 tw-text-sm",{closed:o.value&&!b.value}]),clearable:"","hide-details":"",onFocus:T[2]||(T[2]=k=>o.value=!1),onBlur:T[3]||(T[3]=k=>o.value=!0)},{"prepend-inner":y(()=>[f(bt,{color:o.value?"#434648":"#2099BD"},{default:y(()=>[N("mdi-magnify")]),_:1},8,["color"])]),_:1},8,["modelValue","class"])]))],512)]),g("div",Vh,[f(Il),f(Jd,{page:_.value,"onUpdate:page":T[5]||(T[5]=k=>_.value=k),items:l.value,"items-length":(($=d.value)==null?void 0:$.totalCount)??0,"items-per-page":n.value,search:b.value,class:"tickets-data-table",color:"secondary",loading:c.value?"primary":!1},{top:y(()=>{var k,A,P,z;return[g("div",Lh,[g("div",Eh,[g("div",Rh,L(d.value.totalCount)+" Tickets",1),c.value?F("",!0):(w(),M(pt,{key:0,icon:"mdi-refresh","aria-label":"refresh tickets",onClick:x}))]),g("div",zh,[!c.value&&((k=d.value)==null?void 0:k.totalCount)!==0?(w(),D("div",Oh,L((_.value-1)*n.value+1)+"-"+L(Math.min(_.value*n.value,((A=d.value)==null?void 0:A.totalCount)??0))+" of "+L(((P=d.value)==null?void 0:P.totalCount)??0),1)):F("",!0),f(yu,{modelValue:_.value,"onUpdate:modelValue":T[4]||(T[4]=j=>_.value=j),rounded:"circle",density:"compact",length:Math.ceil((((z=d.value)==null?void 0:z.totalCount)??0)/n.value)},null,8,["modelValue","length"])])])]}),headers:y(()=>[]),item:y(({item:k})=>[(w(),M(ah,{key:k.ticketNumber,ticket:k},null,8,["ticket"]))]),loading:y(()=>[Fh]),"no-data":y(()=>[m.value.length>0?(w(),D("span",Bh," No tickets found. ")):(w(),D("span",Uh,[N(" No Organization Found. "),Hh,N(" Please create an Organization in the settings to start creating tickets. "),Nh,N(" Created tickets will be shown in this section. ")]))]),bottom:y(()=>[]),_:1},8,["page","items","items-length","items-per-page","search","loading"]),f(pt,{id:"new-ticket-btn",to:"/tickets/new",class:"tw-z-10 tw-mb-10 tw-mr-10",icon:"mdi-plus",position:"fixed",location:"bottom right",variant:"elevated",color:"primary",height:"48",width:"48",disabled:!m.value.length},null,8,["disabled"]),f(Ns)])])}}},Wh=St(jh,[["__scopeId","data-v-497a21c2"]]),Yn=()=>{const s=Uu();return{gtmEvent:({category:e="",subcategory:i="",label:n="",action:o="",value:a=""})=>{if(!s||typeof s.trackEvent!="function"){console.error("gtm.trackEvent is not a function or gtm is not defined");return}s.trackEvent({category:e,subcategory:i,label:n,action:o,value:a})}}},qh=document.createElement("canvas"),Yh={props:{cellContent:{type:String,required:!0,default:""},maxWidth:{type:Number,required:!0}},data:()=>({cssFontDescriptor:""}),computed:{shouldTruncateAndShowTooltip(){return this.cssFontDescriptor?this.getTextWidth(this.cellContent,this.cssFontDescriptor)>=this.maxWidth:!1}},mounted(){const s=document.getElementById("untruncatedCellContentDiv");this.cssFontDescriptor=this.getCssFontDescriptor(s)},methods:{getTextWidth(s,t){const e=qh.getContext("2d");return e.font=t,e.measureText(s).width},getCssFontDescriptor(s){const t=this.getCssStyle(s,"font-weight"),e=this.getCssStyle(s,"font-size"),i=this.getCssStyle(s,"font-family");return`${t} ${e} ${i}`},getCssStyle(s,t){return window.getComputedStyle(s,null).getPropertyValue(t)}}},Kh={class:"tw-break-words"},Xh={key:1,id:"untruncatedCellContentDiv"};function Gh(s,t,e,i,n,o){return o.shouldTruncateAndShowTooltip?(w(),M(xe,{key:0,class:"print:tw-hidden","max-width":"300px","z-index":"30"},{activator:y(({props:a})=>[g("div",Ht(a,{class:"... tw-truncate"}),L(e.cellContent),17)]),default:y(()=>[g("span",Kh,L(e.cellContent),1)]),_:1})):(w(),D("div",Xh,L(e.cellContent),1))}const $s=St(Yh,[["render",Gh]]);function Kn(){const s=xt(),t=ye(),e=I(new ys),i=S(()=>s.state.appConfig),n=S(()=>s.state.watchers),o=S(()=>`height: calc(var(--vh, 1vh) * 100 - ${i.value.mobileAppRequest?56:163}px);`),a=s.dispatch.bind(s,"showSnackbar"),r=s.dispatch.bind(s,"updateTicketDetails"),l=s.dispatch.bind(s,"updateTicketRow"),c=s.dispatch.bind(s,"updateTicketUnlessLoading"),d=async(m,b)=>{if(!s.state.featureFlippers.bulkUpdateEnabled||s.state.accountSubscriptionStatus!=="active"){a({display:!0,message:"Bulk update is a Premium Plan feature.",type:"error",timeout:3e3});return}const _=m.map(T=>s.state.tickets.find($=>$.id===T)).map(async T=>{if(T.status===b.status)return T;const $={...T,...b,customValues:p(T,b)};delete $.creator,delete $.assignee,delete $.watcherIds,b.description===void 0&&delete $.description,b.summary===void 0&&delete $.summary;try{const k=await c({payload:$,type:"bulkUpdate"});if(k!=null&&k.ticket)return parseInt(t.query.ticket_number)===k.ticket.id?r(k):await l(k.ticket),k==null?void 0:k.ticket}catch{return null}}),x=await Promise.all(_),C=x.length>0&&x.filter(Boolean).length===m.length;a({display:!0,message:C?"Selected tickets updated successfully.":"Failed to update the selected tickets. Try again.",type:C?"success":"error",timeout:3e3}),s.dispatch("refreshTickets"),s.state.selectedTickets=[]},u=async(m,b)=>{const v={...m,...b,customValues:p(m,b)};delete v.creator,delete v.assignee,delete v.watcherIds,b.description===void 0&&delete v.description,b.summary===void 0&&delete v.summary;let _;try{if(_=await c({payload:v,type:"singleUpdate"}),_!=null&&_.ticket)parseInt(t.query.ticket_number)===_.ticket.id?r(_):await l(_.ticket),a({display:!0,message:"Ticket updated",type:"success",timeout:3e3});else throw"Oops, something went wrong, please try again"}catch(x){a({display:!0,message:x,type:"error"})}return _},p=(m,b=null)=>{var _;return(((_=b==null?void 0:b.customValues)==null?void 0:_.length)>0?b.customValues:m.customValues).map(x=>({value:x.value,custom_attribute_id:x.customAttribute.id}))};return{ticketsService:e,appConfig:i,watchers:n,offsetHeight:o,showSnackbar:a,updateTicketDetails:r,updateTicketRow:l,updateTicketUnlessLoading:c,updateTicketWithSnackbar:u,updateTicketsWithSnackbar:d,parseCustomAttributes:p}}const Zh={class:"tw-items-center tw-px-2 tw-text-center tw-font-medium"},Qh=g("span",null,"This ticket has active alerts.",-1),Jh={key:0,class:"tw-relative tw-z-10 tw-items-center tw-px-2 tw-text-center tw-font-medium tw-text-earl-50 tw-text-earl-500 dark:tw-text-earl-400"},tf={key:1,class:"tw-items-center tw-px-2 tw-text-center"},ef={key:2,class:"tw-max-w-xs tw-truncate tw-p-2"},sf={key:3,class:"tw-max-w-56 tw-truncate tw-p-2"},nf={key:4,class:"tw-max-w-56 tw-truncate tw-p-2"},of={key:5,class:"tw-max-w-56 tw-truncate tw-p-2"},af={key:6,class:"tw-flex tw-items-center tw-p-2"},rf={key:7,class:"tw-max-w-56 tw-truncate tw-p-2"},lf={key:8,class:"tw-p-2"},cf={key:9,class:"tw-p-2"},df=["aria-label"],uf={key:10,class:"tw-p-2"},hf=["aria-label"],ff={key:11,class:"tw-p-2"},pf=["aria-label"],mf={key:0},gf={key:12,class:"tw-p-2"},wf={key:13,class:"tw-p-2"},vf={__name:"TicketRow",props:{ticketId:{type:Number,required:!0}},setup(s){const t=s,e=xt(),i=S(()=>e.state.tickets.find(E=>E.id===t.ticketId)),{formatDate:n,formatDateRelative:o,formatDateTimeRelative:a,formatDateTimeLongWithHoursAndMinutes:r,formatDateLong:l}=Ne(),{updateTicketWithSnackbar:c}=Kn(),{isNewTicketLivePoll:d,showAlertedIcon:u,priorityIcon:p,priorityIconColor:m,shouldHighlightRow:b}=Ml(i),v=ye(),_=me(),x=S(()=>o(i.value.dueAt)),C=S(()=>l(i.value.dueAt)),T=S(()=>a(i.value.createdAt)),$=S(()=>e.getters.currentUser),{gtmEvent:k}=Yn(),A=E=>{k({category:"tickets",subcategory:"table",label:"accept-link",action:"click",value:""}),c(E,{assigneeId:$.value.id})},P=S(()=>r(i.value.createdAt)),z=S(()=>a(i.value.updatedAt)),j=S(()=>r(i.value.updatedAt)),V=S(()=>`${x.value}, ${C.value}`),O=S(()=>`${T.value}, ${P.value}`),B=S(()=>`${z.value}, ${j.value}`),U=S(()=>e.state.customAttributes.filter(E=>e.state.columnsPreference.includes(E.id))),H=S(()=>{var E;return(E=e.state.ticketCategories.find(q=>q.id===i.value.ticketCategoryId))==null?void 0:E.name}),J=S(()=>{var E;return(E=e.state.organizations.find(q=>q.id===i.value.organizationId))==null?void 0:E.name}),K=S(()=>{var E;return(E=e.state.priorities.find(q=>q.id===i.value.priority))==null?void 0:E.name}),G=S(()=>{if(i.value.firstResponseSecs)return xa(i.value.firstResponseSecs)}),ot=S(()=>{if(i.value.closeTimeSecs)return xa(i.value.closeTimeSecs)}),et=S(()=>e.state.featureFlippers.bulkUpdateEnabled&&e.state.accountSubscriptionStatus==="active"),ct=I([]),it=E=>{e.state.selectedTickets.includes(E)?(ct.value=ct.value.filter(q=>q!==E),e.dispatch("deselectTicketForBulkUpdate",E)):(ct.value.push(E),e.dispatch("selectTicketForBulkUpdate",E))},W=S(()=>e.state.selectedTickets.includes(i.value.id)),wt=E=>{E===parseInt(v.query.ticket_number)?(e.dispatch("clearCurrentTicket"),e.dispatch("updateDocumentTitle"),_.replace({name:"Tickets",params:v.params,query:{...v.query,ticket_number:void 0}})):(e.dispatch("updateDocumentTitle"),_.replace({name:"Tickets",params:v.params,query:{...v.query,ticket_number:E}}))},at=E=>{var q;return(q=e.state.columnsPreference)!=null&&q.length?e.state.columnsPreference.includes(E):!0},rt=(E,q)=>{const Z=i.value.customValues.find(Pt=>Pt.customAttribute.id===E);return Z!=null&&Z.value?q==="date"?n(Z.value):Z.value:""};return(E,q)=>(w(),D("tr",{class:mt(`tw-cursor-pointer tw-border-b tw-border-solid tw-border-earl-100 hover:tw-bg-earl-100 dark:tw-border-earl-600 dark:tw-text-earl-50 dark:hover:tw-bg-dusk-700 dark:hover:tw-text-earl-50${h(b)?"tw-font-medium":""} ${i.value.ticketNumber===parseInt(h(v).query.ticket_number)||W.value?"tw-bg-dusk-60 dark:tw-bg-dusk-700":"tw-bg-white dark:tw-bg-earl-900 "}`),onClick:q[3]||(q[3]=Z=>wt(i.value.ticketNumber))},[g("td",Zh,[h(d)?(w(),M(h(Pl),{key:0,class:"tw-mx-2"})):h(u)?(w(),M(xe,{key:1,location:"top","open-delay":"0",color:"#323436","z-index":"30"},{activator:y(({props:Z})=>[f(bt,Ht(Z,{color:"earl-700",size:"small",class:"tw-mb-0.5"}),{default:y(()=>[N("mdi-alert-circle-outline")]),_:2},1040)]),default:y(()=>[Qh]),_:1})):F("",!0)]),et.value?(w(),D("td",Jh,[f(Hn,{modelValue:W.value,"onUpdate:modelValue":q[0]||(q[0]=Z=>W.value=Z),class:"tw-absolute tw-left-0 tw-top-0 tw-h-4 tw-w-4 tw-p-0",onClick:q[1]||(q[1]=Lt(Z=>it(i.value.id),["stop"]))},null,8,["modelValue"])])):F("",!0),at("id")?(w(),D("td",tf,L(i.value.id),1)):F("",!0),at("summary")?(w(),D("td",ef,[f($s,{"cell-content":i.value.summary,"max-width":304},null,8,["cell-content"])])):F("",!0),at("assignee")?(w(),D("td",sf,[i.value.assignee?(w(),M($s,{key:1,"cell-content":i.value.assignee.name,"max-width":224},null,8,["cell-content"])):(w(),D("span",{key:0,class:"tw-underline",onClick:q[2]||(q[2]=Lt(Z=>A(i.value),["stop"]))}," Accept "))])):F("",!0),at("creator")?(w(),D("td",nf,[f($s,{"cell-content":i.value.creator.name,"max-width":224},null,8,["cell-content"])])):F("",!0),at("organization")?(w(),D("td",of,[f($s,{"cell-content":J.value,"max-width":224},null,8,["cell-content"])])):F("",!0),at("priority")?(w(),D("td",af,[f(bt,{color:h(m),class:"tw-mr-2"},{default:y(()=>[N(L(h(p)),1)]),_:1},8,["color"]),N(" "+L(K.value),1)])):F("",!0),at("category")?(w(),D("td",rf,[H.value?(w(),M($s,{key:0,"cell-content":H.value,"max-width":224},null,8,["cell-content"])):F("",!0)])):F("",!0),at("status")?(w(),D("td",lf,L(i.value.status),1)):F("",!0),at("created_at")?(w(),D("td",cf,[f(xe,{"z-index":"30"},{activator:y(({props:Z})=>[g("div",Qs(Js(Z)),[g("span",{"aria-label":O.value},L(T.value),9,df)],16)]),default:y(()=>[g("span",null,L(P.value),1)]),_:1})])):F("",!0),at("updated_at")?(w(),D("td",uf,[f(xe,{"z-index":"30"},{activator:y(({props:Z})=>[g("div",Qs(Js(Z)),[g("span",{"aria-label":B.value},L(z.value),9,hf)],16)]),default:y(()=>[g("span",null,L(j.value),1)]),_:1})])):F("",!0),at("due_at")?(w(),D("td",ff,[f(xe,{disabled:!i.value.dueAt,"z-index":"30"},{activator:y(({props:Z})=>[g("div",Qs(Js(Z)),[i.value.dueAt?(w(),D("span",{key:0,"aria-label":V.value},L(x.value),9,pf)):F("",!0)],16)]),default:y(()=>[i.value.dueAt?(w(),D("span",mf,L(C.value),1)):F("",!0)]),_:1},8,["disabled"])])):F("",!0),at("first_response_secs")?(w(),D("td",gf,L(G.value),1)):F("",!0),at("close_time_secs")?(w(),D("td",wf,L(ot.value),1)):F("",!0),(w(!0),D(ht,null,vt(U.value,Z=>(w(),D("td",{key:Z.id,class:"tw-max-w-xs tw-truncate tw-p-2"},[rt(Z.id)?(w(),M($s,{key:0,"cell-content":rt(Z.id,Z.attrType),"max-width":320},null,8,["cell-content"])):F("",!0)]))),128))],2))}};const Zl=s=>(Pe("data-v-d975248f"),s=s(),Ie(),s),bf={class:"tw-relative tw-flex tw-flex-1"},yf={class:"chd-tickets-table tw-flex-1"},_f={key:1,class:"tw-w-full tw-whitespace-nowrap"},kf={class:"tw-sticky tw-top-0 tw-z-20 tw-bg-white tw-text-left tw-text-sm tw-font-medium tw-text-earl-500 dark:tw-bg-earl-900 dark:tw-text-earl-400"},xf={class:"tw-relative tw-flex tw-items-center tw-justify-between tw-border-earl-100 tw-px-1"},Cf={key:0,class:"tw-p-2 tw-text-earl-1000 dark:tw-text-earl-50"},Sf=["onClick"],Tf={class:"tw-bg-earl-50 tw-text-left tw-text-sm tw-text-earl-1000"},Df={key:2,class:"tw-p-4 tw-text-center tw-text-lg tw-text-earl-500 dark:tw-text-earl-50"},Af={key:0},$f={key:1},Mf=Zl(()=>g("br",null,null,-1)),Pf=Zl(()=>g("br",null,null,-1)),If={__name:"TicketsTable",setup(s){const t=xt(),e=ye(),i=me(),{startLivePoll:n}=Gl(),{gtmEvent:o}=Yn(),a=I(!1),r=S(()=>t.state.tickets),l=S(()=>t.state.ticketsLoading),c=S(()=>t.state.columnsPreference),d=S(()=>t.state.organizations),u=S(()=>t.state.featureFlippers.bulkUpdateEnabled),p=S(()=>t.state.accountSubscriptionStatus),m=S(()=>u.value&&p.value==="active"),b=S(()=>t.state.selectedTickets.length>0&&t.state.selectedTickets.length<r.value.length),v=S(()=>{const{columns:k,customAttributeColumns:A}=t.state;return k.concat(A)}),_=S(()=>{var k;return(k=c.value)!=null&&k.length?v.value.filter(A=>c.value.includes(A.key)):v.value});lt(()=>t.state.selectedTickets,()=>{a.value=!t.state.selectedTickets.length===0});const x=()=>{a.value?t.dispatch("deselectAllTicketsForBulkUpdate"):t.dispatch("selectAllTicketsForBulkUpdate",r.value.map(k=>k.id))};lt(()=>e.query.sort,()=>{C()},{immediate:!0}),re(()=>{n()});function C(){if(v.value.forEach(k=>{k.sort!=null&&(k.sort="")}),e.query.sort){const[k,A]=e.query.sort.split("-"),P=v.value.find(z=>String(z.key)===k);P&&(P.sort=A)}}function T(k){if(k.sort==null)return;v.value.forEach(z=>{k===z||z.sort==null||(z.sort="")}),k.sort==="asc"?k.sort="desc":k.sort="asc";const A=["id","priority","status","created_at","updated_at","due_at"].includes(k.key)?e.query.q:"",P=`${k.key}-${k.sort}`;window.localStorage.setItem("ticketsSort",P),i.push({name:"Tickets",params:e.params,query:{...e.query,q:A,sort:P}})}async function $(){await t.dispatch("setShowColumnCheckboxList",!0),document.getElementById("chooseColumnsTitle").focus(),o({category:"tickets",subcategory:"table",label:"gear-icon",action:"click",value:""})}return(k,A)=>(w(),D("div",bf,[f(Il),g("div",yf,[l.value?(w(),M(de,{key:0,class:"tw-h-full"})):r.value.length>0?(w(),D("table",_f,[g("thead",kf,[g("tr",null,[g("th",null,[g("div",xf,[f(pt,{color:"earl-400",icon:"mdi-cog",size:"small","aria-label":"settings",onClick:$})])]),m.value?(w(),D("th",Cf,[f(Hn,{modelValue:a.value,"onUpdate:modelValue":A[0]||(A[0]=P=>a.value=P),class:"ticketsTable_bulkUpdate_checkbox tw-ml-[-8px] tw-mt-[-20px] tw-h-4 tw-w-4 tw-p-0",indeterminate:b.value,onClick:x},null,8,["modelValue","indeterminate"])])):F("",!0),(w(!0),D(ht,null,vt(_.value,P=>(w(),D("th",{key:P.key,class:"tw-p-2"},[g("div",{class:mt(["tw-flex","tw-items-center",P.sort==null?"tw-cursor-default":"tw-cursor-pointer"]),onClick:z=>T(P)},[g("span",{class:mt(["tw-mr-2","tw-flex-none",P.sort?"tw-text-earl-1000 dark:tw-text-earl-50":""])},L(P.name),3),P.sort==="asc"?(w(),M(bt,{key:0,color:"selected-table-header",name:"sort-asc"},{default:y(()=>[N("mdi-sort-ascending")]),_:1})):P.sort==="desc"?(w(),M(bt,{key:1,color:"selected-table-header",name:"sort-desc"},{default:y(()=>[N("mdi-sort-descending")]),_:1})):(w(),M(bt,{key:2,name:"sort-default"},{default:y(()=>[N("mdi-menu-swap")]),_:1}))],10,Sf)]))),128))])]),g("tbody",Tf,[(w(!0),D(ht,null,vt(r.value,P=>(w(),M(vf,{key:P.ticketNumber,"ticket-id":P.id},null,8,["ticket-id"]))),128))])])):(w(),D("div",Df,[d.value.length>0?(w(),D("span",Af,"No tickets found.")):(w(),D("span",$f,[N(" No Organization Found. "),Mf,N(" Please create an Organization in the settings to start creating tickets. "),Pf,N(" Created tickets will be shown in this section. ")]))]))])]))}},Vf=St(If,[["__scopeId","data-v-d975248f"]]);function Ql(){const s=xt(),t=new _u,e=I(!1),i=a=>{s.dispatch("showSnackbar",a)},n=a=>{s.dispatch("addEndUser",a)};return{endUserLoading:e,createEndUser:async(a,r)=>{try{if(e.value=!0,!mu(a))throw"Email address is invalid.";if(!r)throw"Organization must be selected first.";const{endUser:l}=await t.createEndUser({email:a,organizationId:r});n(l)}catch(l){i({display:!0,type:"error",message:l,timeout:3e3})}finally{e.value=!1}}}}function Jl(s,t){const e=xt(),{resetAttachments:i}=Xi(t),{createEndUser:n}=Ql(),o=new ys,a=I(""),r=I(null),l=I(""),c=I(""),d=I(null),u=I(2),p=I(!1),m=I(null),b=I(null),v=I(!1),_=Q=>Q.reduce((X,R)=>(X[R.customAttributeId]={...R.customAttributeType==="phone"&&{isValidPhoneNumber:gl.withMessage(xl,()=>vo(R.value))}},X),{});function x(Q){return{organizationId:{required:ls},creator:{required:ls},summary:{required:ls,maxLength:gs(255)},description:{required:ls,maxLength:gs(1e5)},customValues:_(Q||[])}}let C=ms(x(b.value),{organizationId:a,creator:r,summary:l,description:c,customValues:b});lt(b,Q=>{C=ms(x(Q),{organizationId:a,creator:r,summary:l,description:c,customValues:b})});const T=S(()=>{const Q={};return!C.value||!C.value.$dirty||!C.value.customValues||b.value.forEach(X=>{const R=C.value.customValues[X.customAttributeId];Q[X.customAttributeId]=[],R&&R.$dirty&&Object.keys(R).forEach(nt=>{nt.startsWith("$")||nt==="value"||R[nt].$invalid&&Q[X.customAttributeId].push(R[nt].$message)})}),Q}),$=S(()=>e.state.currentUserAccessibleOrganizations),k=S(()=>e.state.customAttributes),A=S(()=>e.state.organizations),P=S(()=>e.state.priorities),z=S(()=>e.state.statuses),j=S(()=>e.state.ticketCategories),V=S(()=>e.state.users),O=S(()=>e.getters.creators),B=S(()=>{const Q=j.value.filter(X=>X.organizationId===a.value);return Q.unshift({id:null,name:"Unspecified"}),Q}),U=S(()=>a.value!==""?O.value.filter(Q=>[null,a.value].includes(Q.organizationId)):O.value.filter(Q=>Q.organizationId===null)),H=S(()=>{const Q=[...V.value];return Q.find(R=>R.uid==="none")||Q.unshift({id:null,uid:"none",type:null,name:"Unassigned"}),Q}),J=S(()=>{const Q=[];return!C||!C.value.$dirty||C.value.organizationId.required.$invalid&&Q.push("Organization is required."),Q}),K=S(()=>{const Q=[];return!C||!C.value.creator.$dirty||C.value.creator.required.$invalid&&Q.push("Contact is required."),Q}),G=S(()=>{const Q=[];return!C||!C.value.summary.$dirty||(C.value.summary.maxLength.$invalid&&Q.push("Summary must be at most 255 characters long."),C.value.summary.required.$invalid&&Q.push("Summary is required.")),Q}),ot=S(()=>{const Q=[];return!C||!C.value.description.$dirty||(C.value.description.maxLength.$invalid&&Q.push("Description must be at most 100000 characters long."),C.value.description.required.$invalid&&Q.push("Description is required.")),Q}),et=Q=>e.dispatch("showSnackbar",Q),ct=()=>e.dispatch("getTickets"),it=()=>{C.value.$touch(),C.value.$invalid||W()},W=async()=>{var R;p.value=!0;const Q=b.value.map(nt=>{let Kt=nt.value;return nt.customAttributeType==="date"&&nt.value instanceof Date&&(Kt=Gs(nt.value,"yyyy-MM-dd")),{value:Kt===null?"":Kt,ticketId:nt.ticketId,customAttributeId:nt.customAttributeId,customAttributeType:nt.customAttributeType}}),X={organizationId:a.value,creatorId:r.value.id,creatorType:Dl(r.value.type),summary:l.value,initial_upload_ids:Array.from(t.value,nt=>nt.signedId),description:c.value,priority:u.value,assigneeId:(R=d.value)==null?void 0:R.id,ticketCategoryId:m.value,customValues:Q};try{const{ticket:nt}=await o.createTicket(X);if(nt)ct(),et({display:!0,type:"success",message:"Ticket was successfully created.",timeout:3e3}),rt();else throw"Oops, something went wrong, please try again"}catch(nt){et({display:!0,type:"error",message:nt,timeout:3e3})}finally{p.value=!1}},wt=()=>t.value.length>0||r.value||l.value||c.value||d.value||m.value||u.value!==2||b.value.length>0&&b.value&&b.value.find(Q=>Q.value),at=()=>{r.value=null,l.value="",c.value="",d.value=null,u.value=2,p.value=!1,v.value=!1,m.value=null,i(),E()},rt=()=>{C.value.$reset(),at(),s()},E=()=>{b.value.forEach(Q=>{Q.value=null})},q=()=>k.value.filter(R=>R.organizationId===a.value).map(R=>({value:null,ticketId:null,customAttributeId:R.id,customAttributeType:R.attrType,required:R.requiredInPortal,options:R.attrOptions,name:R.name,other:{display:R.attrType!=="date"}})).sort((R,nt)=>R.customAttributeId>nt.customAttributeId?1:-1),Z=Q=>{var X;((X=r.value)==null?void 0:X.type)==="EndUser"&&(r.value=null),window.localStorage.setItem("newTicketOrganizationId",Q)},Pt=(Q,X)=>{Q==="priority"&&(u.value=X),Q==="categoryId"&&(m.value=X),Q==="organizationId"&&(a.value=X,Z(X))},Gt=()=>{var R;const Q=parseInt(window.localStorage.getItem("newTicketOrganizationId")),X=((R=$.value)==null?void 0:R.map(nt=>nt.id))||[];return X.includes(Q)?Q:X.length>0?X[0]:""},te=()=>{var R,nt;const Q=(R=j.value.find(Kt=>Kt.id===m.value))==null?void 0:R.name;return((nt=B.value.find(Kt=>Kt.name===Q))==null?void 0:nt.id)??null},le=Q=>{n(Q,a.value)};return lt(a,()=>{b.value=q(),m.value=te()}),lt(A,()=>{a.value=Gt()},{immediate:!0}),{organizationId:a,creator:r,summary:l,description:c,assignee:d,priority:u,loading:p,categoryId:m,customValues:b,endUserLoading:v,v$:C,currentUserAccessibleOrganizations:$,customAttributes:k,organizations:A,priorities:P,statuses:z,ticketCategories:j,users:V,creators:O,ticketCategoriesForCurrentOrg:B,usersForCurrentOrganization:U,assignees:H,organizationIdErrors:J,creatorErrors:K,summaryErrors:G,descriptionErrors:ot,customAttributeErrors:T,showSnackbar:et,submit:it,createTicket:W,didSomethingChange:wt,resetState:at,resetCustomValues:E,customAttrVals:q,createEndUserHandler:le,closeTicketDialog:rt,updateAttributeFromDropdown:Pt,getOrganizationIdFromLocalStorage:Gt,handleOrganizationChange:Z}}const Lf={key:0},Ef={key:1},Rf={key:2},zf={key:3},Of={key:4},Ff={key:5},Bf={class:"tw-mt-4 tw-w-full"},Uf=g("hr",{class:"chd-hr--shadow"},null,-1),Hf={__name:"DesktopNewTicketForm",props:{isShowingDialog:{type:Boolean,default:!1}},emits:["update:showDialog","update:isShowingDialog"],setup(s,{emit:t}){const e=s,i=t,{formatDate:n}=Ne();re(()=>{l.value=u()});const o=()=>{i("update:isShowingDialog",!1)},a=I([]),r=Jl(o,a),{organizationId:l,organizationIdErrors:c,currentUserAccessibleOrganizations:d,getOrganizationIdFromLocalStorage:u,creator:p,usersForCurrentOrganization:m,creatorErrors:b,summary:v,summaryErrors:_,endUserLoading:x,createEndUserHandler:C,description:T,descriptionErrors:$,assignee:k,assignees:A,categoryId:P,ticketCategoriesForCurrentOrg:z,customValues:j,loading:V,submit:O,handleOrganizationChange:B,customAttributeErrors:U}=r,{removeAttachment:H,uploadingAttachment:J,uploadAttachment:K}=Xi(a),G=I(!1),ot=I(e.isShowingDialog),et=S({get:()=>r.priority.value.toString(),set:(at="2")=>(r.priority.value=parseInt(at),at)}),ct=S(()=>r.priorities.value.map(at=>({label:at.name,value:at.id.toString()})));lt(()=>e.isShowingDialog,at=>{ot.value=at}),lt(ot,at=>{i("update:isShowingDialog",at)});const it=()=>{G.value=!1,r.closeTicketDialog()},W=()=>{r.didSomethingChange()?G.value=!0:it()},wt=()=>{G.value=!1};return(at,rt)=>(w(),D("div",null,[f(ii,{"is-showing-dialog":ot.value,"onUpdate:isShowingDialog":rt[9]||(rt[9]=E=>ot.value=E),"show-action-buttons":!0,"show-close-button":!0,"close-button-text":"Cancel",persistent:!0,onCloseDialog:W},{content:y(()=>[f(jn,{ref:"form",class:"new-ticket tw-flex tw-flex-col","lazy-validation":""},{default:y(()=>[f(vn,{modelValue:h(l),"onUpdate:modelValue":[rt[0]||(rt[0]=E=>Ct(l)?l.value=E:null),h(B)],"error-messages":h(c),items:h(d),"item-title":"name","item-value":"id",label:"Organization (required)",class:"pt-4"},null,8,["modelValue","error-messages","items","onUpdate:modelValue"]),f(Is,{modelValue:h(p),"onUpdate:modelValue":rt[1]||(rt[1]=E=>Ct(p)?p.value=E:null),users:h(m),"error-messages":h(b),"item-text":"name","item-value":"uid",label:"Contact (required)","custom-class":"pt-3","allow-end-user-creation":!0,loading:h(x),onCreateEndUser:h(C)},null,8,["modelValue","users","error-messages","loading","onCreateEndUser"]),f(kt,{modelValue:h(v),"onUpdate:modelValue":rt[2]||(rt[2]=E=>Ct(v)?v.value=E:null),"error-messages":h(_),counter:255,"persistent-counter":"",class:"pt-3",label:"Summary (required)"},null,8,["modelValue","error-messages"]),f(oe,{modelValue:h(T),"onUpdate:modelValue":rt[3]||(rt[3]=E=>Ct(T)?T.value=E:null),"error-messages":h($),label:"Description (required)",class:"pt-3"},null,8,["modelValue","error-messages"]),f(Is,{modelValue:h(k),"onUpdate:modelValue":rt[4]||(rt[4]=E=>Ct(k)?k.value=E:null),users:h(A),"item-text":"name","item-value":"id",label:"Assignee","custom-class":"pt-3 pb-2"},null,8,["modelValue","users"]),f(Al,{modelValue:et.value,"onUpdate:modelValue":rt[5]||(rt[5]=E=>et.value=E),label:"Priority"},{default:y(()=>[(w(!0),D(ht,null,vt(ct.value,(E,q)=>(w(),M(bo,{key:q,label:E.label,value:E.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),f(vn,{modelValue:h(P),"onUpdate:modelValue":rt[6]||(rt[6]=E=>Ct(P)?P.value=E:null),items:h(z),"item-title":"name","item-value":"id",label:"Category",class:"py-2","hide-details":""},null,8,["modelValue","items"]),f(Jt,null,{default:y(()=>[(w(!0),D(ht,null,vt(h(j),E=>(w(),M(ft,{key:E.id,class:"tw-p-0"},{default:y(()=>[E.customAttributeType==="list"?(w(),D("div",Lf,[f(vn,{modelValue:E.value,"onUpdate:modelValue":q=>E.value=q,items:E.options,label:E.name,clearable:"","hide-details":""},null,8,["modelValue","onUpdate:modelValue","items","label"])])):E.customAttributeType==="text_area"?(w(),D("div",Ef,[f(oe,{modelValue:E.value,"onUpdate:modelValue":q=>E.value=q,label:E.name,"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])])):E.customAttributeType==="phone"?(w(),D("div",Rf,[f(kt,{modelValue:E.value,"onUpdate:modelValue":q=>E.value=q,type:"phone",label:E.name,"error-messages":h(U)[E.customAttributeId]||[]},null,8,["modelValue","onUpdate:modelValue","label","error-messages"])])):E.customAttributeType==="number"?(w(),D("div",zf,[f(kt,{modelValue:E.value,"onUpdate:modelValue":q=>E.value=q,type:"number",label:E.name,"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])])):E.customAttributeType==="text_field"?(w(),D("div",Of,[f(kt,{modelValue:E.value,"onUpdate:modelValue":q=>E.value=q,label:E.name,"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])])):E.customAttributeType==="date"?(w(),D("div",Ff,[f(kt,{"model-value":h(n)(E.value),label:E.name,"prepend-inner-icon":"mdi-calendar",readonly:"",clearable:"","hide-details":"",onClick:q=>E.other.display=!0,"onClick:clear":q=>E.value=null},null,8,["model-value","label","onClick","onClick:clear"]),Ft(f(ni,{modelValue:E.value,"onUpdate:modelValue":[q=>E.value=q,q=>E.other.display=!1]},null,8,["modelValue","onUpdate:modelValue"]),[[be,E.other.display]])])):F("",!0)]),_:2},1024))),128))]),_:1})]),_:1},512),g("div",Bf,[Ft(g("input",{ref:"fileInput",type:"file",onChange:rt[7]||(rt[7]=E=>h(K)(E,h(l)))},null,544),[[be,!1]]),f(ut,{icon:"mdi-paperclip",text:"Attach a file",class:"tw-mb-4 tw-w-36",onClick:rt[8]||(rt[8]=Lt(E=>at.$refs.fileInput.click(),["prevent"]))}),f(Gi,{"pending-attachments":a.value,onAttachmentRemoved:h(H)},null,8,["pending-attachments","onAttachmentRemoved"])])]),preButtonAction:y(()=>[Uf]),buttonActions:y(()=>[f(ut,{"button-type":"primary",text:"Create",loading:h(V),disabled:h(V)||h(J),onClick:h(O)},null,8,["loading","disabled","onClick"])]),default:y(()=>[is(at.$slots,"default",{},()=>[N("Create a ticket")])]),_:3},8,["is-showing-dialog"]),f(ii,{"is-showing-dialog":G.value,"onUpdate:isShowingDialog":rt[10]||(rt[10]=E=>G.value=E),"show-action-buttons":!0,"show-close-button":!0,"close-button-text":"Cancel","max-width":"480px",onCloseDialog:wt},{content:y(()=>[N(" Are you sure you want to lose the information and any progress you made on this ticket? ")]),buttonActions:y(()=>[f(ut,{"button-type":"primary",text:"Discard ticket",onClick:it})]),default:y(()=>[is(at.$slots,"default",{},()=>[N("Discard ticket?")])]),_:3},8,["is-showing-dialog"])]))}},Nf={props:{columns:{required:!0,type:Array}},computed:{...$e(["columnsPreference"]),checkedColumns:{get(){return this.columnsPreference},set(s){this.setColumnsPreference(s)}}},watch:{checkedColumns(s,t){t!=null&&t.length&&s.length==1&&this.showSnackbar({display:!0,message:"One column needs to be selected at all times.",type:"default"})}},methods:{...He(["setColumnsPreference","showSnackbar"]),shouldDisableCheckbox(s){return this.checkedColumns.length===1&&this.checkedColumns.includes(s)}}},jf={class:"tw-px-1"},Wf={class:"tw-inline-block"},qf=["id","name","value","disabled"],Yf={class:"tw-align-middle tw-text-sm tw-text-earl-1000 dark:tw-text-earl-50"};function Kf(s,t,e,i,n,o){return w(),D("ul",jf,[(w(!0),D(ht,null,vt(e.columns,a=>(w(),D("li",{key:a.key,class:"tw-mb-2"},[g("label",Wf,[Ft(g("input",{id:a.key,"onUpdate:modelValue":t[0]||(t[0]=r=>o.checkedColumns=r),type:"checkbox",class:mt(["tw-mr-2","tw-align-middle",o.shouldDisableCheckbox(a.key)?"tw-cursor-default":"tw-cursor-pointer"]),name:a.key,value:a.key,disabled:o.shouldDisableCheckbox(a.key)},null,10,qf),[[dd,o.checkedColumns]]),g("span",Yf,L(a.name),1)])]))),128))])}const $a=St(Nf,[["render",Kf]]),Xf={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"13",fill:"#434648"},Gf=g("path",{d:"M0 7.111h7.111V8.89H0zm0 3.556h7.111v1.777H0zm0-7.111h7.111v1.777H0zM0 0h7.111v1.778H0zm14.222 1.778v8.889h-3.555v-8.89zM16 0H8.889v12.444H16z"},null,-1),Zf=[Gf];function Qf(s,t){return w(),D("svg",Xf,[...Zf])}const Ma={render:Qf},Jf={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},tp=g("path",{fill:"#F6F7F8",d:"M0 9.111h7.111v1.778H0zm0 3.556h7.111v1.777H0zm0-7.111h7.111v1.777H0zM0 2h7.111v1.778H0zm14.222 1.778v8.889h-3.555v-8.89zM16 2H8.889v12.444H16z"},null,-1),ep=[tp];function sp(s,t){return w(),D("svg",Jf,[...ep])}const Pa={render:sp},ip={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"14",fill:"#434648"},np=g("path",{d:"M14.222 10.07v1.888H1.778V10.07zM16 .624H0v1.889h16zm0 3.778H0v1.889h16zm0 3.778H0v5.666h16z"},null,-1),op=[np];function ap(s,t){return w(),D("svg",ip,[...op])}const Ia={render:ap},rp={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},lp=g("path",{fill:"#F6F7F8",d:"M14.222 11.07v1.888H1.778V11.07zM16 1.624H0v1.889h16zm0 3.778H0v1.889h16zm0 3.778H0v5.666h16z"},null,-1),cp=[lp];function dp(s,t){return w(),D("svg",rp,[...cp])}const Va={render:dp},up={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"14",fill:"#434648"},hp=g("path",{d:"M0 10h16V8H0zm0 4h16v-2H0zm0-8h16V4H0zm0-6v2h16V0z"},null,-1),fp=[hp];function pp(s,t){return w(),D("svg",up,[...fp])}const La={render:pp},mp={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},gp=g("path",{fill:"#F6F7F8",d:"M0 11h16V9H0zm0 4h16v-2H0zm0-8h16V5H0zm0-6v2h16V1z"},null,-1),wp=[gp];function vp(s,t){return w(),D("svg",mp,[...wp])}const Ea={render:vp};function ci(){const s=new ys,t=xt(),e=me(),i=ye(),{updateTicketWithSnackbar:n,updateTicketsWithSnackbar:o}=Kn(),a=I(null),r=I(null),l=I(""),c=I(!0),d=I(!1),u=I(!1),p=I(null),m=I(!1),b=I(!1),v=I(0),_=I(!1),x=I(!1),C=I(null),T=I(null),$=I(!1),k=I(!1),A=I(!1),P=S(()=>t.state.appConfig),z=S(()=>t.state.isCurrentTicketFullyLoaded),j=S(()=>t.state.loading),V=S(()=>t.state.ticketAttributesExpanded),O=S(()=>t.state.activities),B=S(()=>t.state.currentTicket),U=S(()=>t.state.currentTicketView),H=S(()=>t.state.deviceReferences),J=S(()=>t.state.tickets),K=S(()=>t.state.ticketComments),G=S(()=>t.state.watchers),ot=S(()=>t.state.ticketsLayout),et=S(()=>t.state.isShowingSummaryAndDescriptionDialog),ct=S(()=>t.state.isShowingDeleteCommentDialog),it=S({get:()=>t.state.softDeleteTicketCommentCallback,set:$t=>t.dispatch("setSoftDeleteTicketCommentCallback",$t)}),W=S(()=>t.getters.currentUser),wt=S(()=>t.getters.activeAlerts),at=S(()=>i.query.ticket_number||null),rt=S(()=>O.value.concat(K.value).sort((Ut,ee)=>Ut.createdAt>ee.createdAt?1:-1)),E=S(()=>B.value.organizationId),q=S(()=>p.value===500?"We could not load the ticket.":"Ticket not found."),Z=S(()=>p.value===500?"Please try again or select another ticket.":"Please select another ticket."),Pt=t.dispatch.bind(t,"showSnackbar"),Gt=t.dispatch.bind(t,"clearLivePollDataForTicket"),te=t.dispatch.bind(t,"getTickets"),le=t.dispatch.bind(t,"getCurrentTicket"),Q=t.dispatch.bind(t,"setTicketAttributesExpanded"),X=t.dispatch.bind(t,"setCurrentTicket"),R=t.dispatch.bind(t,"updateDocumentTitle"),nt=t.dispatch.bind(t,"setIsAnyCommentUnderEdit"),Kt=t.dispatch.bind(t,"setIsShowingSummaryAndDescriptionDialog"),jt=t.dispatch.bind(t,"setIsShowingDeleteCommentDialog"),Tt=()=>{const{params:$t,query:Ut}=i;t.dispatch("clearCurrentTicket"),e.replace({name:"Tickets",params:{page:$t.page||1,view:$t.view||U.value.name_path},query:{...Ut,ticket_number:void 0}}),R()},Mt=async()=>{var Ut;if(at.value)try{u.value=!0,await le()}catch(ee){p.value=(Ut=ee==null?void 0:ee.response)==null?void 0:Ut.status}finally{u.value=!1,nt(!1),m.value=!1,b.value=!1,ps(()=>{var ee;Wt(),(ee=a.value)==null||ee.addEventListener("scroll",ue)})}},Wt=async()=>{await ps(),a.value&&(a.value.scrollTop=a.value.scrollHeight)};_a(()=>{O.value.length>0&&Wt()}),_a(()=>{K.value.length>0&&Wt()});const ue=()=>{const $t=a.value,Ut=200,ee=$t.scrollTop,os=$t.scrollHeight,ga=$t.offsetHeight,wa=os/ga>=2;var va=ee<v.value;v.value=ee;const ba=ee<Ut,ya=os-ee-ga<Ut;b.value=wa&&(!va&&!ya||ba),m.value=wa&&(va&&!ba||ya)},xs=async $t=>{if(!$t||!B.value.id){_.value=!1;return}try{await s.deleteTicket(B.value.id),setTimeout(async()=>{Pt({display:!0,message:"Ticket deleted.",type:"success"}),await te(),X(null),R(),e.push({name:"Tickets",params:e.currentRoute.value.params,query:{...e.currentRoute.value.query,ticket_number:void 0}})},500)}catch(Ut){Pt({display:!0,message:Ut,type:"error"})}finally{_.value=!1}},ns=async $t=>{if(!$t||!B.value.id){jt(!1);return}try{await it.value(),Pt({display:!0,message:"Comment deleted successfully.",type:"success"})}catch(Ut){throw Pt({display:!0,message:"An error occurred while deleting the comment. Please try again.",type:"error"}),Ut}finally{jt(!1)}},Cs=async $t=>{try{B.value&&($t?await C.value():await T.value())}finally{x.value=!1}},ui=()=>{A.value=!1,_.value=!0,jt(!1),it.value=null},qs=$t=>{A.value=!1,_.value=!1,jt(!0),it.value=$t},hi=($t,Ut)=>{x.value=!0,C.value=$t,T.value=Ut},st=()=>{var $t=a.value;$t.scrollTo({top:0})},gt=$t=>["comment","note"].includes($t.activityType),se=async $t=>{let Ut=$t.watchers||G.value;Ut=Array.from(Ut,os=>({id:os.id,type:tn(os)}));const ee={...$t,watchers:Ut};await o(t.state.selectedTickets,ee)},dt=async $t=>{$.value=!0;let Ut=$t.watchers||G.value;Ut=Array.from(Ut,os=>({id:os.id,type:tn(os)}));const ee={...$t,watchers:Ut};await n(B.value,ee),Kt(!1),$.value=!1},Y=()=>{k.value=!0},Et=()=>{k.value=!1},tn=$t=>$t.uid.split(".")[0].replace("-","_");return{ticketHistoryElem:a,commentTextarea:r,areActivitiesAndCommentsLoading:u,isShowingDescriptionQuickScroll:m,isShowingLatestActivityQuickScroll:b,lastScrollPosition:v,isShowingDeleteTicketDialog:_,isShowingDeleteCommentDialog:ct,isShowingDeleteTicketCommentAttachmentDialog:x,deleteTicketCommentAttachmentCallback:C,cancelDeleteTicketCommentAttachmentCallback:T,isUpdating:$,isShowMergeDialog:k,showSnackbar:Pt,clearLivePollDataForTicket:Gt,getTickets:te,getCurrentTicket:le,setTicketAttributesExpanded:Q,setCurrentTicket:X,updateDocumentTitle:R,setIsAnyCommentUnderEdit:nt,appConfig:P,isCurrentTicketFullyLoaded:z,loading:j,ticketAttributesExpanded:V,activities:O,currentTicket:B,currentTicketView:U,deviceReferences:H,tickets:J,ticketComments:K,watchers:G,currentUser:W,activeAlerts:wt,ticketNumber:at,ticketActivityEntries:rt,organizationId:E,ticketFailureLineOne:q,ticketFailureLineTwo:Z,isShowingSummaryAndDescriptionDialog:et,desktopCloseTicketHistory:Tt,loadTicketData:Mt,setTicketHistoryQuickScrollVisibility:ue,deleteTicketAction:xs,softDeleteTicketCommentAction:ns,deleteTicketCommentAttachmentAction:Cs,onShowDeleteTicketDialog:ui,onShowDeleteTicketCommentDialog:qs,onShowDeleteTicketCommentAttachmentDialog:hi,scrollToTop:st,scrollBottom:Wt,isComment:gt,updateTicketHistory:dt,bulkupdateTicketsHistory:se,showMergeTicketDialog:Y,mergeDialogAction:Et,getPersonType:tn,comment:l,isPublic:c,ticketsLayout:ot,setIsShowingSummaryAndDescriptionDialog:Kt,isSubmittingComment:d}}const bp={class:"tw-my-6 tw-flex tw-flex-row tw-items-center tw-gap-2"},yp=g("label",{class:"tw-text-sm tw-font-medium"},"Status",-1),_p={__name:"BulkUpdateDialog",props:{isShowingDialog:{type:Boolean,default:!1}},emits:["update:isShowingDialog","close-dialog"],setup(s,{emit:t}){const{bulkupdateTicketsHistory:e}=ci(),i=xt(),n=s,o=I(["Closed"]),a=I(o.value[0]),r=t,l=I(n.isShowingDialog),c=S(()=>i.state.selectedTickets),d=I(!1);lt(()=>n.isShowingDialog,m=>{l.value=m}),lt(l,m=>{r("update:isShowingDialog",m)});const u=()=>{l.value=!1,r("update:isShowingDialog",!1)},p=()=>{e({status:a.value.toLowerCase()}),u()};return(m,b)=>(w(),M(ii,{"is-showing-dialog":l.value,"onUpdate:isShowingDialog":b[1]||(b[1]=v=>l.value=v),"show-action-buttons":!0,"show-close-button":!0,"close-button-text":"Cancel",onCloseDialog:u},{default:y(()=>[is(m.$slots,"default",{},()=>[N("Bulk Update ("+L(c.value.length)+" ticket"+L(c.value.length===1?"":"s")+")",1)])]),content:y(()=>[g("div",bp,[yp,f(Ze,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=v=>a.value=v),items:o.value,"item-title":"name","item-value":"id",class:"tw-ml-10 tw-flex-1"},null,8,["modelValue","items"])])]),buttonActions:y(()=>[f(ut,{disabled:d.value,"button-type":"primary",text:"Update Tickets",onClick:p},null,8,["disabled"])]),_:3},8,["is-showing-dialog"]))}};const kp=Bs({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:ud,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Io(),...hd({location:"top end"}),...fd(),...Vo(),...ol(),...Bd({transition:"scale-rotate-transition"})},"VBadge"),xp=Us()({name:"VBadge",inheritAttrs:!1,props:kp(),setup(s,t){const{backgroundColorClasses:e,backgroundColorStyles:i}=al(Xe(s,"color")),{roundedClasses:n}=pd(s),{t:o}=rl(),{textColorClasses:a,textColorStyles:r}=ll(Xe(s,"textColor")),{themeClasses:l}=Lo(),{locationStyles:c}=md(s,!0,d=>(s.floating?s.dot?2:4:s.dot?8:12)+(["top","bottom"].includes(d)?+(s.offsetY??0):["left","right"].includes(d)?+(s.offsetX??0):0));return Hs(()=>{const d=Number(s.content),u=!s.max||isNaN(d)?s.content:d<=+s.max?d:`${s.max}+`,[p,m]=gd(t.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return f(s.tag,Ht({class:["v-badge",{"v-badge--bordered":s.bordered,"v-badge--dot":s.dot,"v-badge--floating":s.floating,"v-badge--inline":s.inline},s.class]},m,{style:s.style}),{default:()=>{var b,v;return[f("div",{class:"v-badge__wrapper"},[(v=(b=t.slots).default)==null?void 0:v.call(b),f(wl,{transition:s.transition},{default:()=>{var _,x;return[Ft(f("span",Ht({class:["v-badge__badge",l.value,e.value,n.value,a.value],style:[i.value,r.value,s.inline?{}:c.value],"aria-atomic":"true","aria-label":o(s.label,d),"aria-live":"polite",role:"status"},p),[s.dot?void 0:t.slots.badge?(x=(_=t.slots).badge)==null?void 0:x.call(_):s.icon?f(bt,{icon:s.icon},null):u]),[[be,s.modelValue]])]}})])]}})}),{}}}),js=s=>(Pe("data-v-8393f063"),s=s(),Ie(),s),Cp={id:"table-wrapper"},Sp={class:"tw-flex tw-justify-between tw-border-b tw-border-earl-100 tw-px-2 tw-py-2 dark:tw-border-earl-600 dark:tw-bg-earl-900"},Tp=["title"],Dp=["value"],Ap={class:"tw-flex tw-items-center tw-justify-center"},$p={key:0},Mp={key:0,class:"tw-shrink-0"},Pp={class:"tw-hidden lg:tw-inline dark:tw-text-earl-50"},Ip=js(()=>g("span",null,"Change Split Views",-1)),Vp=js(()=>g("span",{class:"tw-font-medium"},"No split",-1)),Lp=js(()=>g("span",{class:"tw-font-medium"},"Vertical split",-1)),Ep=js(()=>g("span",{class:"tw-font-medium"},"Horizontal split",-1)),Rp=js(()=>g("span",{"aria-hidden":"true",class:"dark:tw-text-earl-900"},"NEW",-1)),zp=js(()=>g("div",{class:"tw-m-4 tw-flex tw-gap-4"},[g("div",null,[g("p",{class:"tw-text-base"},[N(""),g("strong",null,"Split Screen Views")]),g("div",null,"Now view the ticket list and ticket"),g("div",null,"details simultaneously. You can split"),g("div",null,"the view horizontally, vertically or no"),g("div",null,"split.")])],-1)),Op={key:1,class:"columns-checklist-container dark-tw-bg-earl-700 tw-z-20 dark:tw-bg-earl-1200 dark:tw-text-earl-50"},Fp=js(()=>g("p",{id:"chooseColumnsTitle",tabindex:"0",class:"tw-mb-2 tw-font-medium"}," Choose columns ",-1)),Bp={class:"tw-mb-2 tw-font-medium tw-text-earl-500 dark:tw-text-earl-50"},Up={__name:"TableWrapper",setup(s){const t=ye(),e=me(),i=xt(),n=I(!1),o=I(!1),a=I(50),r=S(()=>i.state.meta),l=S(()=>i.state.currentTicketView),c=S(()=>i.state.ticketViews),d=S(()=>i.state.customAttributeColumns),u=S(()=>i.state.ticketsLayout),p=S(()=>i.state.ticketsLoading),m=S(()=>i.state.showColumnCheckboxList),b=S(()=>i.state.columns),v=S(()=>i.state.organizations),_=S(()=>i.state.featureFlippers.bulkUpdateEnabled),x=S(()=>i.state.accountSubscriptionStatus==="active"),C=S(()=>_.value&&x.value),T=S(()=>i.getters.selectedTickets);lt(T,E=>{console.log("ticketsSelectedForBulkUpdate",E)});const $=S(()=>{let E="tw-flex tw-items-center tw-gap-2 tw-text-base tw-font-normal tw-z-50";return T.value.length>0&&(E+=" tw-bg-dusk-60 dark:tw-bg-dusk-700 tw-rounded tw-px-2 tw-py-1"),E}),k=S(()=>{if(x.value){if(C.value&&T.value.length===0)return A("Select 1 or more tickets to update tickets in bulk.")}else return A('Bulk Update is a Premium Plan feature. <a href="https://www.spiceworks.com/free-cloud-help-desk-software" target="_blank" class="tw-underline">Learn more</a>');return""}),A=E=>ku.sanitize(E,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href","target"]}),P=()=>{T.value.length>0&&(o.value=!0)},z=()=>{o.value=!1},j=()=>{i.dispatch("deselectAllTicketsForBulkUpdate")},{isDarkMode:V}=Zi(),{gtmEvent:O}=Yn(),B=S(()=>{const E=new Map;return d.value.forEach(q=>{E.has(q.organizationId)?E.get(q.organizationId).push(q):E.set(q.organizationId,[q])}),E}),U=S({get:()=>t.query.q,set:Ri.debounce(E=>{const q=t.query.sort.split("-")[0],Z=["id","priority","status","created_at","updated_at","due_at"].includes(q)?t.query.sort:"updated_at-desc";e.replace({name:"Tickets",params:{...t.params,page:1},query:{...t.query,sort:Z,q:E}})},500)}),H=S({get:()=>l.value,set:E=>{e.push({name:"Tickets",params:{page:1,view:E.name_path},query:t.query})}}),J=S(()=>{var q;const E=(q=r.value)!=null&&q.totalCountOffset?r.value.totalCountOffset:0;return r.value.totalCount+E}),K=S(()=>{var Gt,te;const E=r.value.currentPage===1?1:a.value*(r.value.currentPage-1)+1,q=(Gt=r.value)!=null&&Gt.endRangeOffset?r.value.endRangeOffset:0,Z=(te=r.value)!=null&&te.totalCountOffset?r.value.totalCountOffset:0;let Pt;return r.value.currentPage===r.value.totalPages?Pt=r.value.totalCount+Z:r.value.currentPage===1?Pt=a.value+q:Pt=a.value+E-1+q,`${E} - ${Pt}`}),G=S(()=>!window.localStorage.getItem("ticketsLayout")),ot=i.dispatch.bind(i,"setTicketsLayout"),et=i.dispatch.bind(i,"setShowColumnCheckboxList"),ct=async E=>{await i.dispatch("setTicketsLayoutAndReroute",E),rt("spilt-menu-dropdown",{noSplit:"no-split-option",verticalSplit:"vertical-option",horizontalSplit:"horizontal-option"}[E])},it=async()=>{await i.dispatch("refreshTickets"),rt("refresh-icon")},W=E=>{const q=E===-1?"left":"right",Z=r.value.currentPage+E;rt("pagination-ticker",q),Z>0&&Z<=r.value.totalPages&&e.push({name:"Tickets",params:{...t.params,page:Z},query:t.query}),j()},wt=E=>v.value.find(Z=>Z.id===parseInt(E)).name,at=()=>{v.value.length>0&&(n.value=!0,rt("new-ticket-button"))},rt=(E,q="")=>{O({category:"tickets",subcategory:"table",label:E,action:"click",value:q})};return(E,q)=>(w(),D("section",Cp,[f(Hf,{"is-showing-dialog":n.value,"onUpdate:isShowingDialog":q[0]||(q[0]=Z=>n.value=Z)},null,8,["is-showing-dialog"]),_.value?(w(),M(_p,{key:0,"is-showing-dialog":o.value,"onUpdate:isShowingDialog":q[1]||(q[1]=Z=>o.value=Z),onCloseDialog:z},null,8,["is-showing-dialog"])):F("",!0),g("div",Sp,[Ft(g("select",{"onUpdate:modelValue":q[2]||(q[2]=Z=>H.value=Z),class:"form-select tw-flex tw-max-w-15vw tw-justify-center tw-py-0 tw-text-xl tw-font-medium dark:tw-bg-earl-900 dark:tw-text-earl-50",title:H.value&&H.value.name,onClick:q[3]||(q[3]=Z=>rt("status-dropdown-ticker"))},[(w(!0),D(ht,null,vt(c.value,Z=>(w(),D("option",{key:Z.id,value:Z,class:"earl-200"},L(Z.name),9,Dp))),128))],8,Tp),[[si,H.value]]),g("div",Ap,[g("div",{class:mt($.value)},[T.value.length>0?(w(),D("span",$p,[g("b",null,L(T.value.length),1),N(" ticket"+L(T.value.length===1?"":"s")+" selected",1)])):F("",!0),g("div",{class:mt(_.value&&k.value?"button-tooltip-wrapper":"")},[_.value&&T.value.length>0?(w(),M(ut,{key:0,class:"ticketsTable_bulkUpdate_btn","button-type":"primary",text:"Bulk Update","hide-text-on-mobile":!0,disabled:!x.value,onClick:P},null,8,["disabled"])):F("",!0),_.value&&T.value.length===0?(w(),M(ut,{key:1,class:"ticketsTable_bulkUpdate_btn","button-type":"primary-ghost",text:"Bulk Update","hide-text-on-mobile":!0,disabled:!x.value,onClick:P},null,8,["disabled"])):F("",!0),_.value&&k.value?(w(),M(yl,{key:2,content:k.value},null,8,["content"])):F("",!0)],2),T.value.length>0?(w(),M(pt,{key:1,icon:"mdi-close","aria-label":"close",class:"ticketsTable_bulkClose_icon tw--mt-1",onClick:j})):F("",!0)],2),f(kt,{modelValue:U.value,"onUpdate:modelValue":q[4]||(q[4]=Z=>U.value=Z),placeholder:"Search",class:"tw-ml-3 tw-mr-3 tw-w-56","hide-details":"",clearable:"","append-inner-icon":"mdi-magnify",onClick:q[5]||(q[5]=Z=>rt("search-box"))},null,8,["modelValue"]),f(ut,{"button-type":"primary",icon:"mdi-plus",text:"New Ticket","hide-text-on-mobile":!0,disabled:!v.value.length,onClick:at},null,8,["disabled"]),f(pt,{disabled:p.value,icon:"mdi-refresh","aria-label":"refresh tickets",class:"tw-mx-2",onClick:it},null,8,["disabled"]),r.value.totalCount?(w(),D("div",Mp,[g("span",Pp,L(K.value)+" of "+L(J.value),1),f(pt,{icon:"mdi-chevron-left",disabled:r.value.currentPage===1,"aria-label":"page back",class:"tw-ml-1",onClick:q[6]||(q[6]=Z=>W(-1))},null,8,["disabled"]),f(pt,{icon:"mdi-chevron-right",disabled:r.value.currentPage===r.value.totalPages,"aria-label":"page forward",class:"tw-mr-1",onClick:q[7]||(q[7]=Z=>W(1))},null,8,["disabled"])])):F("",!0),f(ws,{class:"tw-z-50",attach:""},{activator:y(({props:Z})=>[f(xe,{location:"top"},{activator:y(({props:Pt})=>[f(pt,Ht({class:"tw-flex tw-items-center tw-p-1"},{...Z,...Pt},{onClick:q[8]||(q[8]=Gt=>h(ot)(u.value))}),{default:y(()=>[u.value===h(Dt).VerticalSplit&&!h(V)?(w(),M(h(Ma),{key:0,"aria-label":"layout menu - vertical split screen selected"})):u.value===h(Dt).VerticalSplit?(w(),M(h(Pa),{key:1,"aria-label":"layout menu - vertical split screen selected"})):u.value===h(Dt).HorizontalSplit&&!h(V)?(w(),M(h(Ia),{key:2,"aria-label":"layout menu - horizontal split screen selected"})):u.value===h(Dt).HorizontalSplit?(w(),M(h(Va),{key:3,"aria-label":"layout menu - horizontal split screen selected"})):h(V)?(w(),M(h(Ea),{key:5,"aria-label":"layout menu - no split screen selected"})):(w(),M(h(La),{key:4,"aria-label":"layout menu - no split screen selected"})),f(bt,null,{default:y(()=>[N("mdi-menu-down")]),_:1})]),_:2},1040)]),default:y(()=>[Ip]),_:2},1024)]),default:y(()=>[f(Jt,{class:"tw-py-0 dark:tw-bg-earl-700"},{default:y(()=>[f(ft,{class:"tw-gap-4",active:u.value===h(Dt).NoSplit?!0:void 0,onClick:q[9]||(q[9]=Z=>ct(h(Dt).NoSplit))},{prepend:y(()=>[h(V)?(w(),M(h(Ea),{key:1,fill:"#C4C4C4"})):(w(),M(h(La),{key:0,fill:"#989A9C"}))]),default:y(()=>[Vp]),_:1},8,["active"]),f(ft,{class:"tw-gap-4",active:u.value===h(Dt).VerticalSplit?!0:void 0,onClick:q[10]||(q[10]=Z=>ct(h(Dt).VerticalSplit))},{prepend:y(()=>[h(V)?(w(),M(h(Pa),{key:1,fill:"#C4C4C4"})):(w(),M(h(Ma),{key:0,fill:"#989A9C"}))]),default:y(()=>[Lp]),_:1},8,["active"]),f(ft,{class:"tw-gap-4",active:u.value===h(Dt).HorizontalSplit?!0:void 0,onClick:q[11]||(q[11]=Z=>ct(h(Dt).HorizontalSplit))},{prepend:y(()=>[h(V)?(w(),M(h(Va),{key:1,fill:"#C4C4C4"})):(w(),M(h(Ia),{key:0,fill:"#989A9C"}))]),default:y(()=>[Ep]),_:1},8,["active"])]),_:1})]),_:1}),f(xe,{location:"bottom",class:"tw-z-20"},{activator:y(({props:Z})=>[g("div",Qs(Js(Z)),[G.value?(w(),M(xp,{key:0,inline:"",color:h(V)?"#F68D8A":"#E51E17","aria-label":"New: Split Screen Views. Now view the ticket list and ticket details simultaneously. You can split the view horizontally, vertically or no split."},{badge:y(()=>[Rp]),_:1},8,["color"])):F("",!0)],16)]),default:y(()=>[zp]),_:1})])]),m.value?Ft((w(),D("div",Op,[Fp,f($a,{columns:b.value},null,8,["columns"]),(w(!0),D(ht,null,vt(B.value.keys(),Z=>(w(),D("div",{key:Z},[g("p",Bp,L(wt(Z)),1),f($a,{columns:B.value.get(Z)},null,8,["columns"])]))),128))])),[[Ed,()=>h(et)(!1)]]):F("",!0)]))}},Hp=St(Up,[["__scopeId","data-v-8393f063"]]);function Np(s){const t=xt(),e=I(null),i=I([15,30,60]),n=I(!1),o=Mo({time:"",assignee:null,description:null}),a=new ys;lt(()=>o.time,()=>{l.value.$touch()});const r=S(()=>({time:{timeTrackingFormatValid:gl.withMessage("Invalid format. Use -16m or 2h 21m.",()=>/^(?:-)?(?:(\d+)(?:\s*[Hh](?:(?:[Oo][Uu])?[Rr][Ss]?)?))?\s*(?:(\d+)+\s*(?:[Mm](?:(?:[Ii][Nn](?:[Uu][Tt][Ee])?[Ss]?)?)?)?)?$/.test(o.time))}})),l=ms(r,o);lt(s,C=>{o.assignee=C},{immediate:!0});const c=S(()=>{let C=0;const T=o.time.trim().startsWith("-")?-1:1,$=/(\d+)\s*m\D*/,k=o.time.match($);if(k){const z=k[1];C+=z*T}const A=/([\d.]+)\s*h\D*/,P=o.time.match(A);if(P){const z=P[1];C+=z*60*T}if(k==null&&P==null){const z=/(\d+)/,j=o.time.match(z);if(j!=null){const V=j[1];C+=V*T}}return C}),d=S(()=>e.value==="btnCustom"||o.time.length===0||c.value===0||l.value.$invalid),u=()=>{l.value.$touch()},p=()=>{l.value.time.$reset()},m=C=>`+${C>=60?C/60+"h":C+"m"}`,b=async(C,T=null,$=null)=>{var k;if(C)try{const A=await a.addTimeSpent({ticketId:t.state.currentTicket.id,duration:C,description:T,userId:$,userType:"User"});if(A!=null&&A.labor&&((k=A==null?void 0:A.tickets)==null?void 0:k.length)>0){const P={...t.state.currentTicket,timeSpentLabel:A.tickets[0].timeSpentLabel};t.dispatch("setCurrentTicket",P),t.dispatch("getActivities",t.state.currentTicket.id),t.dispatch("showSnackbar",{display:!0,message:"Time added successfully!",type:"success"})}else throw"Time addition failed. Please try again."}catch(A){t.dispatch("showSnackbar",{display:!0,message:A,type:"error"})}finally{e.value=null}},v=async C=>{e.value=`btn${C}`,await b(C)},_=()=>{l.value.$touch(),l.value.$invalid||(e.value="btnCustom",b(c.value,o.description,o.assignee.id))},x=S(()=>l.value.time.$dirty&&l.value.time.$invalid?l.value.time.timeTrackingFormatValid.$message:"");return{v$:l,timeTrackingDisabledButton:e,timeTrackingOptions:i,showCustomTimeTracking:n,timeTracking:o,customTimeTrackingMinutes:c,shouldDisableSaveCustomTimeButton:d,vuelidateTouch:u,resetTimeTrackingValidation:p,timeTrackingLabel:m,addTimeSpent:b,updateTimeTracking:v,saveCustomTimeTracking:_,customTimeTrackingErrors:x}}function Wo(s){const t=xt(),e=S(()=>{const st=t.getters.currentUser.id;return t.state.users.find(gt=>gt.id===st)}),{v$:i,timeTrackingDisabledButton:n,timeTrackingOptions:o,showCustomTimeTracking:a,timeTracking:r,customTimeTrackingMinutes:l,shouldDisableSaveCustomTimeButton:c,vuelidateTouch:d,resetTimeTrackingValidation:u,timeTrackingLabel:p,addTimeSpent:m,updateTimeTracking:b,saveCustomTimeTracking:v,customTimeTrackingErrors:_}=Np(e),x=I(!1),C=Mo({}),T=I(null),$=I(!1),k=I(!1),A=I(JSON.parse(window.localStorage.getItem("openTicketDetailsPanels"))||[1]),P=I(!1),z=I([]),j=I({}),V=I(!1),O=I(!1),B=I({});lt(()=>r.time,()=>{i.value.$touch()});const{createEndUser:U}=Ql(),H=S(()=>t.state.currentTicket),J=S({get(){return t.state.watchers},set(st){t.commit("SET_WATCHERS",st),Wt()}}),K=S(()=>t.state.currentUserAccessibleOrganizations),G=S(()=>t.state.customAttributes),ot=S(()=>t.state.deviceReferences),et=S(()=>t.state.organizations),ct=S(()=>t.state.priorities),it=S(()=>t.state.statuses),W=S(()=>t.state.tasks),wt=S(()=>t.state.ticketCategories),at=S(()=>t.state.users),rt=S(()=>t.state.currentTicket.timeSpentLabel);lt(e,st=>{r.assignee=st},{immediate:!0});const E=S(()=>t.getters.creators),q=S(()=>t.getters.activeAlerts),Z=S(()=>{const st=[...at.value];return st.find(se=>se.uid==="none")||st.unshift({id:null,uid:"none",type:null,name:"Unassigned"}),st}),Pt=S(()=>E.value.filter(st=>[null,H.value.organizationId].includes(st.organizationId))),Gt=S(()=>{const st=et.value.find(gt=>gt.id===H.value.organizationId);return st&&!K.value.find(gt=>gt.id===st.id)?K.value.concat([st]):K.value}),te=S(()=>{const st=wt.value.filter(gt=>gt.organizationId===H.value.organizationId);return st.unshift({id:null,name:"Unspecified"}),st}),le=S(()=>G.value.filter(gt=>gt.organizationId===H.value.organizationId).sort((gt,se)=>gt.id>se.id?1:-1)),Q=S(()=>{if(!W.value||W.value.length===0)return"";let st=0;return W.value.forEach(gt=>{gt.done&&st++}),`${st} of ${W.value.length} done`}),X=st=>t.dispatch("showSnackbar",st),R=st=>t.dispatch("getActivities",st);function nt(){Kt(),jt()}const Kt=()=>{H.value.dueAt&&(T.value=new Date(H.value.dueAt))},jt=()=>{O.value=!1;const st=[];H.value.customValues.forEach(gt=>{const se=le.value.find(dt=>dt.id===gt.customAttribute.id);se&&st.push({...gt,type:se.attrType,name:se.name,options:se.attrOptions})}),B.value={},st.forEach(gt=>{["text_field","text_area","phone","number"].includes(gt.type)?B.value[gt.id]=gt.value:gt.type==="date"?(C[gt.id]=!1,j[gt.id]=gt.value?new Date(gt.value):null):gt.type==="list"&&(gt.value||(gt.value="Unspecified"),gt.options.includes("Unspecified")||gt.options.unshift("Unspecified"))}),z.value=st,O.value=!0},Tt=st=>vo(st.value)?"":xl,Mt=st=>{(st==null?void 0:st.type)==="phone"&&!vo(st.value)||st.value!==B.value[st.id]&&(B.value[st.id]=st.value,Wt())},Wt=()=>{let st=H.value.dueAt;$.value?st=null:k.value&&(st=T.value.toISOString());const gt=z.value.map(dt=>({customAttribute:dt.customAttribute,id:dt.id,ticket:dt.ticket,value:dt.value})),se={organizationId:H.value.organizationId,assigneeId:H.value.assignee?H.value.assignee.id:null,creatorId:H.value.creator.id,creatorType:Dl(H.value.creator.type),status:H.value.status,priority:H.value.priority,ticketCategoryId:H.value.ticketCategoryId,customValues:gt,muted:H.value.muted,dueAt:st};s("update-ticket-history",se),k.value&&(k.value=!1)},ue=st=>{st!==-1&&(J.value.splice(st,1),Wt())},xs=()=>{$.value=!0,x.value=!1,Wt()},ns=st=>{st.value=null,C[st.id]=!1,Wt()},Cs=()=>{x.value=!1,$.value=!1,k.value=!0,Wt()},ui=(st,gt)=>{H.value[st]=gt,Wt()},qs=st=>{U(st,H.value.organizationId)},hi=(st,gt)=>{st.value=gt?Gs(gt,"yyyy-MM-dd"):"",C[st.id]=!1,Wt()};return lt(()=>H.value&&H.value.dueAt,Kt),lt(()=>H.value&&H.value.customValues,jt),lt(()=>H.value&&H.value.timeSpentLabel,()=>{n.value=null,r.time="",r.assignee=e.value,r.description=null,a.value=!1}),lt(A,st=>{window.localStorage.setItem("openTicketDetailsPanels",JSON.stringify(st))}),lt(le,()=>{jt()}),{v$:i,watchers:J,showDueDatePicker:x,showCustomDatePicker:C,dueDate:T,dueDateReset:$,dueDateUpdated:k,panels:A,showMoreAttributes:P,customValues:z,endUserLoading:V,timeTrackingDisabledButton:n,timeTrackingOptions:o,showCustomTimeTracking:a,timeTracking:r,isCustomValuesFullyLoaded:O,ticket:H,timeSpentLabel:rt,currentUserAccessibleOrganizations:K,customAttributes:G,deviceReferences:ot,organizations:et,priorities:ct,statuses:it,tasks:W,ticketCategories:wt,users:at,currentUser:e,creators:E,activeAlerts:q,assignees:Z,usersForCurrentOrganization:Pt,ticketAccessibleOrganizations:Gt,ticketCategoriesForCurrentOrg:te,customAttributesForCurrentOrg:le,customTimeTrackingMinutes:l,shouldDisableSaveCustomTimeButton:c,taskProgress:Q,customTimeTrackingErrors:_,showSnackbar:X,initializeData:nt,getActivities:R,updateText:Mt,updateTicketAttributes:Wt,updateAttributeFromDropdown:ui,removeWatcher:ue,clearDueDate:xs,clearCustomAttrDate:ns,updateDateTime:Cs,timeTrackingLabel:p,addTimeSpent:m,updateTimeTracking:b,saveCustomTimeTracking:v,createEndUserHandler:qs,vuelidateTouch:d,resetTimeTrackingValidation:u,customDatePickerDates:j,handleUpdateCustomAttrDate:hi,getPhoneErrorMessage:Tt}}const tc=Symbol.for("vuetify:v-window"),ec=Symbol.for("vuetify:v-window-group"),sc=Bs({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||s==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Io(),...Vo(),...ol()},"VWindow"),Ra=Us()({name:"VWindow",directives:{Touch:$l},props:sc(),emits:{"update:modelValue":s=>!0},setup(s,t){let{slots:e}=t;const{themeClasses:i}=wd(s),{isRtl:n}=vd(),{t:o}=rl(),a=bd(s,ec),r=I(),l=S(()=>n.value?!s.reverse:s.reverse),c=Li(!1),d=S(()=>{const $=s.direction==="vertical"?"y":"x",A=(l.value?!c.value:c.value)?"-reverse":"";return`v-window-${$}${A}-transition`}),u=Li(0),p=I(void 0),m=S(()=>a.items.value.findIndex($=>a.selected.value.includes($.id)));lt(m,($,k)=>{const A=a.items.value.length,P=A-1;A<=2?c.value=$<k:$===P&&k===0?c.value=!0:$===0&&k===P?c.value=!1:c.value=$<k}),yd(tc,{transition:d,isReversed:c,transitionCount:u,transitionHeight:p,rootRef:r});const b=S(()=>s.continuous||m.value!==0),v=S(()=>s.continuous||m.value!==a.items.value.length-1);function _(){b.value&&a.prev()}function x(){v.value&&a.next()}const C=S(()=>{const $=[],k={icon:n.value?s.nextIcon:s.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:a.prev,"aria-label":o("$vuetify.carousel.prev")};$.push(b.value?e.prev?e.prev({props:k}):f(pt,k,null):f("div",null,null));const A={icon:n.value?s.prevIcon:s.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:a.next,"aria-label":o("$vuetify.carousel.next")};return $.push(v.value?e.next?e.next({props:A}):f(pt,A,null):f("div",null,null)),$}),T=S(()=>s.touch===!1?s.touch:{...{left:()=>{l.value?_():x()},right:()=>{l.value?x():_()},start:k=>{let{originalEvent:A}=k;A.stopPropagation()}},...s.touch===!0?{}:s.touch});return Hs(()=>Ft(f(s.tag,{ref:r,class:["v-window",{"v-window--show-arrows-on-hover":s.showArrows==="hover"},i.value,s.class],style:s.style},{default:()=>{var $,k;return[f("div",{class:"v-window__container",style:{height:p.value}},[($=e.default)==null?void 0:$.call(e,{group:a}),s.showArrows!==!1&&f("div",{class:"v-window__controls"},[C.value])]),(k=e.additional)==null?void 0:k.call(e,{group:a})]}}),[[_d("touch"),T.value]])),{group:a}}}),ic=Bs({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Io(),...kd(),...Ud()},"VWindowItem"),za=Us()({name:"VWindowItem",directives:{Touch:Eu},props:ic(),emits:{"group:selected":s=>!0},setup(s,t){let{slots:e}=t;const i=cl(tc),n=xd(s,ec),{isBooted:o}=Hd();if(!i||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const a=Li(!1),r=S(()=>o.value&&(i.isReversed.value?s.reverseTransition!==!1:s.transition!==!1));function l(){!a.value||!i||(a.value=!1,i.transitionCount.value>0&&(i.transitionCount.value-=1,i.transitionCount.value===0&&(i.transitionHeight.value=void 0)))}function c(){var b;a.value||!i||(a.value=!0,i.transitionCount.value===0&&(i.transitionHeight.value=mo((b=i.rootRef.value)==null?void 0:b.clientHeight)),i.transitionCount.value+=1)}function d(){l()}function u(b){a.value&&ps(()=>{!r.value||!a.value||!i||(i.transitionHeight.value=mo(b.clientHeight))})}const p=S(()=>{const b=i.isReversed.value?s.reverseTransition:s.transition;return r.value?{name:typeof b!="string"?i.transition.value:b,onBeforeEnter:c,onAfterEnter:l,onEnterCancelled:d,onBeforeLeave:c,onAfterLeave:l,onLeaveCancelled:d,onEnter:u}:!1}),{hasContent:m}=Nd(s,n.isSelected);return Hs(()=>f(wl,{transition:p.value,disabled:!o.value},{default:()=>{var b;return[Ft(f("div",{class:["v-window-item",n.selectedClass.value,s.class],style:s.style},[m.value&&((b=e.default)==null?void 0:b.call(e))]),[[be,n.isSelected.value]])]}})),{groupItem:n}}});const qo=Symbol.for("vuetify:v-tabs"),jp=Bs({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...dl(Cd({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),yo=Us()({name:"VTab",props:jp(),setup(s,t){let{slots:e,attrs:i}=t;const{textColorClasses:n,textColorStyles:o}=ll(s,"sliderColor"),a=I(),r=I(),l=S(()=>s.direction==="horizontal"),c=S(()=>{var u,p;return((p=(u=a.value)==null?void 0:u.group)==null?void 0:p.isSelected.value)??!1});function d(u){var m,b;let{value:p}=u;if(p){const v=(b=(m=a.value)==null?void 0:m.$el.parentElement)==null?void 0:b.querySelector(".v-tab--selected .v-tab__slider"),_=r.value;if(!v||!_)return;const x=getComputedStyle(v).color,C=v.getBoundingClientRect(),T=_.getBoundingClientRect(),$=l.value?"x":"y",k=l.value?"X":"Y",A=l.value?"right":"bottom",P=l.value?"width":"height",z=C[$],j=T[$],V=z>j?C[A]-T[A]:C[$]-T[$],O=Math.sign(V)>0?l.value?"right":"bottom":Math.sign(V)<0?l.value?"left":"top":"center",U=(Math.abs(V)+(Math.sign(V)<0?C[P]:T[P]))/Math.max(C[P],T[P])||0,H=C[P]/T[P]||0,J=1.5;Wd(_,{backgroundColor:[x,"currentcolor"],transform:[`translate${k}(${V}px) scale${k}(${H})`,`translate${k}(${V/J}px) scale${k}(${(U-1)/J+1})`,"none"],transformOrigin:Array(3).fill(O)},{duration:225,easing:qd})}}return Hs(()=>{const u=pt.filterProps(s);return f(pt,Ht({symbol:qo,ref:a,class:["v-tab",s.class],style:s.style,tabindex:c.value?0:-1,role:"tab","aria-selected":String(c.value),active:!1},u,i,{block:s.fixed,maxWidth:s.fixed?300:void 0,"onGroup:selected":d}),{...e,default:()=>{var p;return f(ht,null,[((p=e.default)==null?void 0:p.call(e))??s.text,!s.hideSlider&&f("div",{ref:r,class:["v-tab__slider",n.value],style:o.value},null)])}})}),jd({},a)}});const Wp=Bs({...dl(sc(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),qp=Us()({name:"VTabsWindow",props:Wp(),emits:{"update:modelValue":s=>!0},setup(s,t){let{slots:e}=t;const i=cl(qo,null),n=ul(s,"modelValue"),o=S({get(){var a;return n.value!=null||!i?n.value:(a=i.items.value.find(r=>i.selected.value.includes(r.id)))==null?void 0:a.value},set(a){n.value=a}});return Hs(()=>{const a=Ra.filterProps(s);return f(Ra,Ht({_as:"VTabsWindow"},a,{modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,class:["v-tabs-window",s.class],style:s.style,mandatory:!1,touch:!1}),e)}),{}}}),Yp=Bs({...ic()},"VTabsWindowItem"),Kp=Us()({name:"VTabsWindowItem",props:Yp(),setup(s,t){let{slots:e}=t;return Hs(()=>{const i=za.filterProps(s);return f(za,Ht({_as:"VTabsWindowItem"},i,{class:["v-tabs-window-item",s.class],style:s.style}),e)}),{}}});function Xp(s){return s?s.map(t=>Ad(t)?t:{text:t,value:t}):[]}const Gp=Bs({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...xu({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Sd(),...Vo()},"VTabs"),Zp=Us()({name:"VTabs",props:Gp(),emits:{"update:modelValue":s=>!0},setup(s,t){let{attrs:e,slots:i}=t;const n=ul(s,"modelValue"),o=S(()=>Xp(s.items)),{densityClasses:a}=Td(s),{backgroundColorClasses:r,backgroundColorStyles:l}=al(Xe(s,"bgColor")),{scopeId:c}=Yd();return Dd({VTab:{color:Xe(s,"color"),direction:Xe(s,"direction"),stacked:Xe(s,"stacked"),fixed:Xe(s,"fixedTabs"),sliderColor:Xe(s,"sliderColor"),hideSlider:Xe(s,"hideSlider")}}),Hs(()=>{const d=Ca.filterProps(s),u=!!(i.window||s.items.length>0);return f(ht,null,[f(Ca,Ht(d,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${s.direction}`,`v-tabs--align-tabs-${s.alignTabs}`,{"v-tabs--fixed-tabs":s.fixedTabs,"v-tabs--grow":s.grow,"v-tabs--stacked":s.stacked},a.value,r.value,s.class],style:[{"--v-tabs-height":mo(s.height)},l.value,s.style],role:"tablist",symbol:qo},c,e),{default:()=>{var p;return[((p=i.default)==null?void 0:p.call(i))??o.value.map(m=>{var b;return((b=i.tab)==null?void 0:b.call(i,{item:m}))??f(yo,Ht(m,{key:m.text,value:m.value}),{default:i[`tab.${m.value}`]?()=>{var v;return(v=i[`tab.${m.value}`])==null?void 0:v.call(i,{item:m})}:void 0})})]}}),u&&f(qp,Ht({modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,key:"tabs-window"},c),{default:()=>{var p;return[o.value.map(m=>{var b;return((b=i.item)==null?void 0:b.call(i,{item:m}))??f(Kp,{value:m.value},{default:()=>{var v;return(v=i[`item.${m.value}`])==null?void 0:v.call(i,{item:m})}})}),(p=i.window)==null?void 0:p.call(i)]}})])}),{}}}),Qp={xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"none"},Jp=g("rect",{width:"39",height:"38",x:".5",y:"1.211",fill:"#fff",rx:"2.5"},null,-1),tm=g("rect",{width:"39",height:"38",x:".5",y:"1.211",stroke:"#BABCBD",rx:"2.5"},null,-1),em=g("path",{fill:"#434648",d:"M21.263 16.185H12v1.684h9.263zm0-3.369H12v1.685h9.263zm3.369 6.737v-3.368h-1.685v3.368H19.58v1.685h3.368v3.368h1.685v-3.369H28v-1.684zM12 21.238h5.895v-1.685H12z"},null,-1),sm=[Jp,tm,em];function im(s,t){return w(),D("svg",Qp,[...sm])}const nm={render:im},om={xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"none"},am=g("rect",{width:"39",height:"38",x:"1",y:"1.211",stroke:"#54585A",rx:"2.5"},null,-1),rm=g("path",{fill:"#F6F7F8",d:"M21.763 16.185H12.5v1.684h9.263zm0-3.369H12.5v1.685h9.263zm3.369 6.737v-3.368h-1.685v3.368H20.08v1.685h3.368v3.368h1.685v-3.369H28.5v-1.684zM12.5 21.238h5.895v-1.685H12.5z"},null,-1),lm=[am,rm];function cm(s,t){return w(),D("svg",om,[...lm])}const dm={render:cm};function nc(s){const t=I(null),e=I([...s.value]);return lt(t,i=>{i?e.value=s.value.filter(n=>n.name.toLowerCase().includes(i.trim().toLowerCase())):e.value=[...s.value]}),{filterInput:t,filteredList:e}}const oc=s=>(Pe("data-v-cc9f881d"),s=s(),Ie(),s),um={class:"button-tooltip-wrapper account-task-lists"},hm=oc(()=>g("span",null,"Add Tasklist",-1)),fm={class:"tw-flex"},pm=oc(()=>g("hr",{class:"chd-hr--shadow"},null,-1)),mm={key:0,class:"account-task-lists__entry account-task-lists__entry-no-results"},gm={__name:"AccountTaskListsMenu",emits:["add-tasks-from-account-task-lists"],setup(s,{emit:t}){const{mobile:e}=Eo(),i=I([]),n=I([]),{filterInput:o,filteredList:a}=nc(i),r=xt(),l=new tu,c=I(!1),d=I(!1),u={persistent:!0,scrollable:!0,fullscreen:!0},{isDarkMode:p}=Zi(),m=S(()=>i.value.length>0),b=S(()=>r.state.accountSubscriptionStatus==="active"),v=S(()=>m.value&&b.value),_=S(()=>b.value?"No tasklists have been configured.":"Tasklists are a Premium Plan feature. <a href='https://www.spiceworks.com/free-cloud-help-desk-software' target='_blank'>Learn more</a>"),x=t;lt(d,$=>{$||(o.value=null)}),re(()=>{b.value&&C()});async function C(){try{c.value=!0;const $=await l.getAccountTaskLists();i.value=$.accountTaskLists,a.value=i.value,n.value=$.accountTasks}catch($){r.dispatch("showSnackbar",{display:!0,message:$,type:"error"})}finally{c.value=!1}}function T($){d.value=!1;const k=n.value.filter(A=>A.accountTaskListId===$.id);x("add-tasks-from-account-task-lists",k),o.value=null}return($,k)=>(w(),D("div",um,[(w(),M(hl(h(e)&&v.value?h(Ki):h(ws)),Ht(h(e)&&v.value?u:{},{modelValue:d.value,"onUpdate:modelValue":k[4]||(k[4]=A=>d.value=A)}),{activator:y(({props:A})=>[f(xe,{disabled:h(e),location:"top"},{activator:y(({props:P})=>[f(pt,Ht({icon:"",id:"add-account-tasks",class:"tw-mr-2","aria-label":"Add Tasklist"},{...A,...P},{disabled:!v.value}),{default:y(()=>[h(p)?(w(),M(h(dm),{key:1})):(w(),M(h(nm),{key:0}))]),_:2},1040,["disabled"])]),default:y(()=>[hm]),_:2},1032,["disabled"])]),default:y(()=>[m.value?(w(),M(pe,{key:0,class:"tw-border-none lg:tw-w-72",variant:"elevated"},{default:y(()=>[f(ss,{id:"search-container"},{default:y(()=>[g("div",fm,[g("div",{class:"tw-mr-4 tw-cursor-pointer lg:tw-hidden",onClick:k[0]||(k[0]=A=>d.value=!1)},[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-arrow-left")]),_:1})]),f(kt,{id:"search-field",modelValue:h(o),"onUpdate:modelValue":k[1]||(k[1]=A=>Ct(o)?o.value=A:null),placeholder:"Search","hide-details":"",clearable:"",class:"tw-font-normal",onClick:k[2]||(k[2]=Lt(()=>{},["stop"])),onKeydown:k[3]||(k[3]=Je(Lt(()=>{},["prevent"]),["enter"]))},null,8,["modelValue"])])]),_:1}),pm,f(ce,{class:"tw-px-0 tw-py-2"},{default:y(()=>[c.value?(w(),M(de,{key:0,class:"lg:tw-h-40"})):m.value?(w(),M(Jt,{key:1,id:"items-list",class:"lg:tw-h-40 lg:tw-overflow-y-auto"},{default:y(()=>[h(o)&&h(a).length===0?(w(),D("div",mm," No matching results found. ")):F("",!0),(w(!0),D(ht,null,vt(h(a),A=>(w(),M(ft,{key:A.id,class:"account-task-lists__entry",onClick:P=>T(A)},{default:y(()=>[f(Re,{class:"tw-text-sm tw-font-normal"},{default:y(()=>[N(L(A.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):F("",!0)]),_:1})]),_:1})):F("",!0)]),_:1},16,["modelValue"])),v.value?F("",!0):(w(),M(yl,{key:0,content:_.value},null,8,["content"]))]))}},wm=St(gm,[["__scopeId","data-v-cc9f881d"]]);const vm={components:{draggable:eu,AccountTaskListsMenu:wm},props:{ticketId:{type:Number,required:!0}},data(){return{newTaskBody:"",isCreatingTask:!1,isUpdatingTaskIds:{},focusedTaskIds:{},showMoreTasks:!1}},computed:{...$e(["tasks"]),subscriptionActive(){return this.$store.state.accountSubscriptionStatus==="active"},visibleTasks:{get(){return this.showMoreTasks?this.tasks:this.tasks.slice(0,this.VISIBLE_TASKS_LIMIT)},async set(s){s.forEach((t,e)=>{t.position=e+1});try{await this.updateTasks(s),this.showSnackbar({display:!0,message:"Tasks updated.",type:"success"})}catch(t){this.showSnackbar({display:!0,message:t,type:"error"})}}},showMoreLessTasksText(){if(this.showMoreTasks)return"Less tasks...";{const s=this.tasks.length-this.VISIBLE_TASKS_LIMIT;return s===1?`${s} more task...`:`${s} more tasks...`}}},created(){this.originalTaskBody="",this.TASK_BODY_CHAR_LIMIT=1e3,this.VISIBLE_TASKS_LIMIT=4,this.ticketsService=new ys},methods:{...He(["showSnackbar","updateTasks","updateTask"]),async createTask(){if(this.newTaskBody)try{this.isCreatingTask=!0;const s={body:this.newTaskBody.trim(),ticketId:this.ticketId,position:this.tasks.length+1,done:!1},t=await this.ticketsService.createTicketTask(s);t.task&&(this.$store.commit("SET_TASKS",[...this.tasks,t.task]),this.showSnackbar({display:!0,message:"Task added.",type:"success"}),this.newTaskBody="",this.$nextTick(()=>{this.showMoreTasks=this.tasks.length>this.VISIBLE_TASKS_LIMIT}))}catch(s){this.showSnackbar({display:!0,message:s,type:"error"})}finally{this.isCreatingTask=!1}},async updateTaskBody(s){if(!s.body||this.originalTaskBody===s.body){s.body=this.originalTaskBody,this.focusedTaskIds={};return}this.isUpdatingTaskIds[s.id]=!0;try{await this.updateTask(s),this.showSnackbar({display:!0,message:"Task updated.",type:"success"})}catch(t){this.showSnackbar({display:!0,message:t,type:"error"})}finally{this.isUpdatingTaskIds={},this.focusedTaskIds={}}},async deleteTask(s){try{await this.ticketsService.deleteTicketTask(s.id);const t=[...this.tasks],e=t.findIndex(i=>s.id===i.id);t.splice(e,1);for(let i=s.position-1;i<t.length;i++){t[i].position-=1;const n=await this.ticketsService.updateTicketTask(t[i].id,{body:t[i].body,ticketId:t[i].ticket.id,position:t[i].position,done:t[i].done});if(n.task){const o=t.findIndex(a=>n.task.id===a.id);t.splice(o,1,n.task)}}this.$store.commit("SET_TASKS",t),this.showSnackbar({display:!0,message:"Task removed.",type:"success"})}catch(t){this.showSnackbar({display:!0,message:t,type:"error"})}},onTaskFocus(s){this.focusedTaskIds={[s.id]:!0},this.originalTaskBody=s.body},async onAddTasksFromAccountTaskLists(s){if(s.length!=0)try{for(const t of s){const e={body:t.body,ticketId:this.ticketId,position:this.tasks.length+1,done:!1},i=await this.ticketsService.createTicketTask(e);i.task&&(this.$store.commit("SET_TASKS",[...this.tasks,i.task]),this.showSnackbar({display:!0,message:"Tasklist added.",type:"success"}),this.$nextTick(()=>{this.showMoreTasks=this.tasks.length>this.VISIBLE_TASKS_LIMIT}))}}catch{this.showSnackbar({display:!0,message:"Failed to add tasklist. Try again.",type:"error"})}finally{this.isCreatingTask=!1}}}},bm={class:"item"},ym={class:"item tw-flex"};function _m(s,t,e,i,n,o){const a=_t("AccountTaskListsMenu"),r=_t("draggable");return w(),M(r,{modelValue:o.visibleTasks,"onUpdate:modelValue":t[6]||(t[6]=l=>o.visibleTasks=l),"item-key":"id",draggable:".item",delay:250,"delay-on-touch-only":!0,onStart:t[7]||(t[7]=l=>s.dragging=!0),onEnd:t[8]||(t[8]=l=>s.dragging=!1)},{item:y(({element:l})=>[g("div",bm,[f(Hn,{modelValue:l.done,"onUpdate:modelValue":[c=>l.done=c,()=>s.updateTask(l)],ripple:!1,class:"pt-0 mt-1","hide-details":""},{label:y(()=>[f(oe,{modelValue:l.body,"onUpdate:modelValue":c=>l.body=c,flat:"","hide-details":"","auto-grow":"",variant:n.focusedTaskIds[l.id]?"outlined":"solo","bg-color":"transparent",disabled:n.isUpdatingTaskIds[l.id],loading:n.isUpdatingTaskIds[l.id],rows:"1",class:mt([l.done?"task-line-through":"","task-list-textarea","tw-opacity-100"]),maxlength:s.TASK_BODY_CHAR_LIMIT,onFocus:c=>o.onTaskFocus(l),onClick:t[0]||(t[0]=Lt(()=>{},["stop"])),onBlur:c=>o.updateTaskBody(l),onKeyup:t[1]||(t[1]=Je(c=>c.target.blur(),["enter"])),onKeydown:t[2]||(t[2]=Je(Lt(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue","variant","disabled","loading","class","maxlength","onFocus","onBlur"])]),append:y(()=>[f(pt,{icon:"mdi-close","aria-label":"delete",onClick:c=>o.deleteTask(l)},null,8,["onClick"])]),default:y(()=>[f(bt,{class:"drag-handle"},{default:y(()=>[N("mdi-drag")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),header:y(()=>[g("div",ym,[f(a,{onAddTasksFromAccountTaskLists:o.onAddTasksFromAccountTaskLists},null,8,["onAddTasksFromAccountTaskLists"]),f(oe,{modelValue:n.newTaskBody,"onUpdate:modelValue":t[3]||(t[3]=l=>n.newTaskBody=l),"auto-grow":"",rows:"1",placeholder:o.subscriptionActive?"Add a task or tasklist...":"Add a task...",loading:n.isCreatingTask,disabled:n.isCreatingTask,maxlength:s.TASK_BODY_CHAR_LIMIT,onKeyup:Je(o.createTask,["enter"]),onKeydown:t[4]||(t[4]=Je(Lt(()=>{},["prevent"]),["enter"]))},null,8,["modelValue","placeholder","loading","disabled","maxlength","onKeyup"])])]),footer:y(()=>[s.tasks.length>s.VISIBLE_TASKS_LIMIT?(w(),D("button",{key:0,class:"tw-mt-1 tw-cursor-pointer tw-p-1 tw-text-sm tw-underline",onClick:t[5]||(t[5]=l=>n.showMoreTasks=!n.showMoreTasks)},L(o.showMoreLessTasksText),1)):F("",!0)]),_:1},8,["modelValue"])}const ac=St(vm,[["render",_m],["__scopeId","data-v-6e638c69"]]);class km{constructor(){Object.assign(this,Nn),this.assignCsrfToken()}async addDeviceReference(t){var i;const e="/api/device_references.json";try{const n=Bo(t),o=await Oe.post(e,n);return we(o.data)}catch(n){throw(i=n==null?void 0:n.response)!=null&&i.data?we(n.response.data):n}}async removeDeviceReference(t){var i;const e="/api/device_references";try{const n=await Oe.delete(`${e}/${t}`);return we(n.data)}catch(n){throw(i=n==null?void 0:n.response)!=null&&i.data?we(n.response.data):n}}}class xm{constructor(t){Object.assign(this,Nn),this.assignCsrfToken(),this.inventoryUrl=t}async search(t){if(!t)return[];const e=`${this.inventoryUrl}/api/public/devices/search?search_term=${t}&card_view=true`;let i;i=await Oe.get(e,{withCredentials:!0});const n=this.flatten(i);return we(n)}async getByIds(t){const e=`${this.inventoryUrl}/api/public/devices?id=[${t}]&card_view=true`;let i;i=await Oe.get(e,{withCredentials:!0});const n=this.flatten(i);return we(n)}async isDeviceInventorySetup(){var i,n,o;const t=`${this.inventoryUrl}/api/public/users`;var e;try{e=await Oe.get(t,{withCredentials:!0})}catch(a){if(((i=a==null?void 0:a.response)==null?void 0:i.status)===403)return!1;throw a}return!!((o=(n=e==null?void 0:e.data)==null?void 0:n.data)!=null&&o.length)}flatten(t){return t.data.data.map(e=>(Object.assign(e,e.attributes),delete e.attributes,e))}mapInventoryDeviceToDeviceReference(t,e){return{device_reference:{device_name:t.name,inventory_device_id:t.id,ticket_id:e}}}}const Cm={props:{ticketId:{required:!0,type:Number}},data(){return{ticketDevices:null,searchedForDevices:[],isInventorySetup:!0,isInventoryThrowingError:!1,isShowingAllDevices:!1,isShowMoreButtonVisibile:!1,showMoreButtonText:"",searchInput:null,searchTimeoutId:null,deviceIdToDeviceReferenceIdMap:null,isSearching:!1,isSaving:!1,isInitiallyLoading:!1}},computed:{...$e(["featureFlippers","appConfig","deviceReferences"]),cssVars(){return{"--minimized-chips-container--max-height":`${this.MINIMIZED_CHIPS_CONTAINER_MAX_HEIGHT}px`}}},watch:{deviceReferences:{handler(){this.initTicketDevices()}},searchInput(s){this.debouncedSearch(s)},ticketDevices(s,t){if(t){const e=s.filter(i=>!t.includes(i));e.length>0&&this.saveDeviceReference(e[0])}this.$nextTick(function(){this.updateShowMoreButtonVisibility()})},isShowingAllDevices(){this.$nextTick(function(){this.updateShowMoreButtonText()})}},created(){this.MINIMIZED_CHIPS_CONTAINER_MAX_HEIGHT=132,this.deviceReferencesService=new km,this.deviceInventoryService=new xm(this.appConfig.inventoryBackendUrl)},mounted(){this.updateShowMoreButtonVisibility(),this.initTicketDevices()},methods:{...He(["showSnackbar"]),async search(s){try{this.isSearching=!0,this.searchedForDevices=await this.deviceInventoryService.search(s)}catch{this.showSnackbar({display:!0,message:"Failed to search for devices. Please try again.",type:"error"})}finally{this.isSearching=!1}},async initTicketDevices(){this.isInitiallyLoading=!0;try{if(this.isInventorySetup=await this.deviceInventoryService.isDeviceInventorySetup(),!this.isInventorySetup){this.isInitiallyLoading=!1;return}if(this.deviceIdToDeviceReferenceIdMap=new Map,this.deviceReferences.length===0){this.ticketDevices=[];return}this.deviceReferences.forEach(t=>this.deviceIdToDeviceReferenceIdMap.set(t.inventoryDeviceId,t.id));const s=this.deviceReferences.map(t=>t.inventoryDeviceId);this.ticketDevices=await this.deviceInventoryService.getByIds(s)}catch{this.isInventoryThrowingError=!0}finally{this.isInitiallyLoading=!1}},async debouncedSearch(s){clearTimeout(this.searchTimeoutId),this.searchTimeoutId=setTimeout(async()=>{this.search(s)},500)},async remove(s){try{const t=this.deviceIdToDeviceReferenceIdMap.get(parseInt(s.id));await this.deviceReferencesService.removeDeviceReference(t),this.deviceIdToDeviceReferenceIdMap.delete(parseInt(s.id));const e=this.ticketDevices.indexOf(s);e>=0&&(this.ticketDevices.splice(e,1),this.ticketDevices=[...this.ticketDevices]),this.showSnackbar({display:!0,message:"Related device removed.",type:"success"})}catch{this.showSnackbar({display:!0,message:"Failed to remove related device. Please try again.",type:"error"})}},async saveDeviceReference(s){try{this.isSaving=!0;const t=this.deviceInventoryService.mapInventoryDeviceToDeviceReference(s,this.ticketId),e=await this.deviceReferencesService.addDeviceReference(t);this.deviceIdToDeviceReferenceIdMap.set(e.deviceReference.inventoryDeviceId,e.deviceReference.id),this.isShowingAllDevices=!0,this.showSnackbar({display:!0,message:"Related device added.",type:"success"})}catch{this.ticketDevices=this.ticketDevices.filter(e=>e!==s),this.showSnackbar({display:!0,message:"Failed to add related device. Please try again.",type:"error"})}finally{this.isSaving=!1}},deviceSubtitle(s){const{manufacturer:t,model:e,ipAddresses:i,serialNumber:n}=s,r=!t&&!e?"Manufacturer & model unknown":`${t??"Manufacturer unknown"} ${e??"Model unknown"}`;let l=i;return i.length==0&&(l="unknown"),i.length>1&&(l=`${i[0]}...+${i.length-1}`),`${r}  IP ${l}  S/N ${n??"unknown"}`},updateShowMoreButtonVisibility(){const s=document.getElementById("chipsContainer");if(!s){this.isShowMoreButtonVisibile=!1;return}this.isShowMoreButtonVisibile=s.scrollHeight>this.MINIMIZED_CHIPS_CONTAINER_MAX_HEIGHT,this.updateShowMoreButtonText()},updateShowMoreButtonText(){const s=document.getElementById("chipsContainer"),e=Array.from(s.children).reduce(function(i,n){const o=n.getBoundingClientRect().top,a=s.getBoundingClientRect().bottom;return o>a?i.concat(n):i},[]).length;this.showMoreButtonText=this.isShowingAllDevices?"Less related devices...":`${e} more related device${e===1?"":"s"}...`}}},Sm={key:0,class:"tw-flex tw-h-8 tw-items-center tw-justify-center"},Tm={key:1},Dm={key:0},Am={key:1},$m=g("a",{href:"https://apps.spiceworks.com/tools/device-inventory/",target:"_blank",class:"tw-text-inherit tw-underline"},"set up a new Inventory online via a desktop browser",-1),Mm={key:2,class:"related-devices"},Pm={class:"tw-text-sm tw-font-normal tw-text-earl-1000 dark:tw-text-earl-50"},Im={class:"tw-max-w-full tw-truncate"};function Vm(s,t,e,i,n,o){return w(),D("div",{style:Bn(o.cssVars),class:"tw-mb-3"},[n.isInitiallyLoading?(w(),D("div",Sm,[f(Be,{color:"earl-600",indeterminate:"",class:"tw-my-4"})])):(w(),D("div",Tm,[n.isInventoryThrowingError?(w(),D("div",Dm," Unable to connect to Inventory online at the moment. Please check again in a few hours. ")):n.isInventorySetup?(w(),D("div",Mm,[f(vn,{"model-value":n.ticketDevices,items:n.searchedForDevices,"item-title":"name","item-value":"id",placeholder:"Add related devices...",multiple:"","no-filter":"","hide-details":"","hide-selected":"","return-object":"","hide-no-data":"",loading:n.isSearching||n.isSaving,"append-icon":"",class:"tw-z-30",search:n.searchInput,"onUpdate:modelValue":t[0]||(t[0]=a=>n.ticketDevices=a),"onUpdate:search":t[1]||(t[1]=a=>n.searchInput=a)},{item:y(({item:a,props:r})=>[f(ft,Ht({class:"tw-max-w-fit"},r),{title:y(({title:l})=>[g("div",Pm,L(l),1)]),default:y(()=>[f(Kd,{class:"tw-text-earl-500 dark:tw-text-earl-50"},{default:y(()=>[N(L(o.deviceSubtitle(a.raw)),1)]),_:2},1024)]),_:2},1040)]),selection:y(()=>[]),_:1},8,["model-value","items","loading","search"]),n.ticketDevices!=null&&n.ticketDevices.length>0?(w(),D("div",{key:0,id:"chipsContainer",class:mt(["tw-inline-flex","tw-flex-wrap","tw-max-w-full","tw-mt-3","tw--ml-0.5","tw-content-start",n.isShowingAllDevices?"":"chips-container--show-only-some"])},[(w(!0),D(ht,null,vt(n.ticketDevices,a=>(w(),M(Tl,{key:a.id,closable:"","close-icon":"mdi-close",class:"related-device-chip tw-mx-0.5 tw-my-0.5 tw-h-10 tw-rounded-sm","onClick:close":r=>o.remove(a)},{default:y(()=>[g("span",Im,L(a.name),1)]),_:2},1032,["onClick:close"]))),128))],2)):F("",!0),n.isShowMoreButtonVisibile?(w(),D("button",{key:1,class:"tw-mt-1 tw-cursor-pointer tw-p-1 tw-text-sm tw-text-earl-1000 tw-underline",onClick:t[2]||(t[2]=a=>n.isShowingAllDevices=!n.isShowingAllDevices)},L(n.showMoreButtonText),1)):F("",!0)])):(w(),D("div",Am,[N(" To add devices, "),$m,N(" or ask an admin to invite you to an existing one. ")]))]))],4)}const Lm=St(Cm,[["render",Vm]]);class Em{constructor(){Object.assign(this,Nn),this.assignCsrfToken()}async startZohoSession(t){const e="/api/zoho.json",i=Bo({ticketId:t}),n=await Oe.post(e,i);return we(n.data)}}const Rm={xmlns:"http://www.w3.org/2000/svg",width:"100",height:"36",viewBox:"0 0 822 296"},zm=["fill"],Om=["fill"],Fm=["fill"],Bm={__name:"ZohoLogo",props:{isDarkMode:{type:Boolean,default:!1}},setup(s){return(t,e)=>(w(),D("svg",Rm,[g("path",{fill:s.isDarkMode?"#fff":"",d:"M396.7 140.8h28.8L464 255.7h-23l-8.5-26.5h-45.1l-8.3 26.5H358l38.7-114.9zm30.8 72.4L410 158.8l-17.6 54.5 35.1-.1zM486.8 230.6c.8 2 1.9 3.8 3.3 5.4 1.4 1.5 3 2.8 4.9 3.8 1.8 1 3.8 1.7 6 2.2s4.4.8 6.6.8c1.6 0 3.3-.1 5-.4s3.3-.8 4.7-1.6c1.4-.8 2.6-1.8 3.5-3.1.9-1.3 1.4-2.9 1.4-4.9 0-2.1-.5-3.8-1.6-5.2-1-1.4-2.5-2.5-4.3-3.4-1.8-.9-3.9-1.7-6.2-2.3-2.3-.6-4.8-1.2-7.4-1.7-3.4-.7-6.7-1.6-10.2-2.5-3.4-.9-6.5-2.2-9.2-4s-4.9-4.1-6.7-7c-1.7-2.9-2.6-6.8-2.6-11.5 0-4.3.9-8.1 2.8-11.3 1.8-3.2 4.2-5.8 7.2-7.9 3-2.1 6.3-3.7 10-4.7 3.7-1.1 7.5-1.6 11.3-1.6 3.4 0 6.7.3 10.2 1s6.7 1.7 9.8 3.2c3.1 1.5 5.8 3.4 8.3 5.7 2.5 2.3 4.4 5.1 5.8 8.4l-14.9 6.4c-.8-1.9-1.9-3.5-3.3-4.8-1.4-1.3-2.9-2.3-4.5-3.2s-3.4-1.4-5.3-1.8c-1.8-.4-3.6-.6-5.3-.6-1.7 0-3.3.2-4.9.5s-3 .9-4.2 1.6-2.2 1.7-2.9 2.9-1.1 2.7-1.1 4.4c0 1.9.5 3.5 1.5 4.8s2.3 2.2 3.9 3.1c1.6.8 3.6 1.5 5.9 2s4.6 1 7.1 1.5c3.5.7 7 1.5 10.5 2.4 3.6.9 6.8 2.2 9.7 4s5.3 4.2 7.1 7.2c1.8 3 2.8 7 2.8 11.9s-1 9.1-2.9 12.5c-1.9 3.4-4.5 6.2-7.6 8.3-3.2 2.1-6.8 3.6-10.9 4.6s-8.3 1.4-12.7 1.4c-3.7 0-7.4-.3-11.1-1-3.7-.7-7.2-1.8-10.4-3.4-3.2-1.6-6.1-3.6-8.7-6.2s-4.5-5.7-5.8-9.5l15.4-6.4zM566.3 230.6c.8 2 1.9 3.8 3.3 5.4 1.4 1.5 3 2.8 4.9 3.8 1.8 1 3.8 1.7 6 2.2s4.4.8 6.6.8c1.6 0 3.3-.1 5-.4 1.7-.3 3.3-.8 4.7-1.6 1.4-.8 2.6-1.8 3.5-3.1.9-1.3 1.4-2.9 1.4-4.9 0-2.1-.5-3.8-1.6-5.2-1-1.4-2.5-2.5-4.3-3.4-1.8-.9-3.9-1.7-6.2-2.3-2.3-.6-4.8-1.2-7.4-1.7-3.3-.7-6.7-1.6-10.2-2.5-3.4-.9-6.5-2.2-9.2-4s-4.9-4.1-6.7-7c-1.7-2.9-2.6-6.8-2.6-11.5 0-4.3.9-8.1 2.8-11.3 1.8-3.2 4.2-5.8 7.2-7.9 3-2.1 6.3-3.7 10-4.7s7.5-1.6 11.3-1.6c3.3 0 6.8.3 10.2 1s6.7 1.7 9.8 3.2c3.1 1.5 5.8 3.4 8.3 5.7 2.5 2.3 4.4 5.1 5.8 8.4l-14.9 6.4c-.8-1.9-1.9-3.5-3.3-4.8-1.4-1.3-2.9-2.3-4.5-3.2s-3.4-1.4-5.3-1.8c-1.8-.4-3.6-.6-5.3-.6-1.7 0-3.3.2-4.9.5s-3 .9-4.2 1.6c-1.2.8-2.2 1.7-2.9 2.9s-1.1 2.7-1.1 4.4c0 1.9.5 3.5 1.5 4.8 1 1.2 2.3 2.2 3.9 3.1 1.7.8 3.6 1.5 5.8 2s4.6 1 7.1 1.5c3.5.7 7 1.5 10.5 2.4 3.6.9 6.8 2.2 9.7 4s5.3 4.2 7.1 7.2c1.8 3 2.8 7 2.8 11.9s-1 9.1-2.9 12.5c-1.9 3.4-4.5 6.2-7.6 8.3-3.2 2.1-6.8 3.6-10.9 4.6s-8.3 1.4-12.7 1.4c-3.7 0-7.4-.3-11.1-1s-7.2-1.8-10.4-3.4c-3.2-1.6-6.1-3.6-8.7-6.2s-4.5-5.7-5.8-9.5l15.5-6.4zM635.6 147.5c0-1.7.3-3.2.9-4.6s1.5-2.6 2.6-3.6 2.4-1.8 3.8-2.4 3-.8 4.6-.8c1.6 0 3.1.3 4.5.9 1.4.6 2.7 1.4 3.7 2.4 1.1 1 1.9 2.2 2.5 3.6.6 1.4.9 2.9.9 4.6 0 1.6-.3 3.1-.9 4.6s-1.4 2.6-2.4 3.6-2.2 1.8-3.7 2.4c-1.4.6-3 .9-4.6.9-1.6 0-3.2-.3-4.6-.9-1.5-.6-2.8-1.4-3.8-2.4s-2-2.2-2.6-3.6c-.5-1.6-.9-3.1-.9-4.7zm1.8 24.3h20.1v83.9h-20.1v-83.9zM689.2 230.6c.8 2 1.9 3.8 3.3 5.4 1.4 1.5 3 2.8 4.9 3.8 1.8 1 3.8 1.7 6 2.2s4.4.8 6.6.8c1.6 0 3.3-.1 5-.4 1.7-.3 3.3-.8 4.7-1.6 1.4-.8 2.6-1.8 3.5-3.1.9-1.3 1.4-2.9 1.4-4.9 0-2.1-.5-3.8-1.6-5.2-1-1.4-2.5-2.5-4.3-3.4-1.8-.9-3.9-1.7-6.2-2.3-2.3-.6-4.8-1.2-7.4-1.7-3.3-.7-6.7-1.6-10.2-2.5-3.4-.9-6.5-2.2-9.2-4s-4.9-4.1-6.7-7c-1.7-2.9-2.6-6.8-2.6-11.5 0-4.3.9-8.1 2.8-11.3 1.8-3.2 4.2-5.8 7.2-7.9 3-2.1 6.3-3.7 10-4.7s7.5-1.6 11.3-1.6c3.3 0 6.8.3 10.2 1s6.7 1.7 9.8 3.2c3.1 1.5 5.8 3.4 8.3 5.7 2.5 2.3 4.4 5.1 5.8 8.4l-14.9 6.4c-.8-1.9-1.9-3.5-3.3-4.8-1.4-1.3-2.9-2.3-4.5-3.2s-3.4-1.4-5.3-1.8c-1.8-.4-3.6-.6-5.3-.6-1.7 0-3.3.2-4.9.5s-3 .9-4.2 1.6c-1.2.8-2.2 1.7-2.9 2.9s-1.1 2.7-1.1 4.4c0 1.9.5 3.5 1.5 4.8 1 1.2 2.3 2.2 3.9 3.1 1.7.8 3.6 1.5 5.8 2s4.6 1 7.1 1.5c3.5.7 7 1.5 10.5 2.4 3.6.9 6.8 2.2 9.7 4s5.3 4.2 7.1 7.2c1.8 3 2.8 7 2.8 11.9s-1 9.1-2.9 12.5c-1.9 3.4-4.5 6.2-7.6 8.3-3.2 2.1-6.8 3.6-10.9 4.6s-8.3 1.4-12.7 1.4c-3.7 0-7.4-.3-11.1-1s-7.2-1.8-10.4-3.4c-3.2-1.6-6.1-3.6-8.7-6.2s-4.5-5.7-5.8-9.5l15.5-6.4zM802.3 255.1c-2.2.6-4.4 1.1-6.7 1.5s-4.6.5-7.1.5c-8 0-14.3-2.1-18.8-6.2-4.5-4.2-6.8-10.4-6.8-18.8v-45.7h-11.3v-14.8H763v-17.3l20.1-8.7v26.1h18.5v14.8h-18.5v43.9c0 3.3.8 5.9 2.3 7.8s4.2 2.9 7.9 2.9c1.4 0 2.9-.1 4.4-.4s3.1-.7 4.6-1.2v15.6zM367.1 104.4l37-53.4h-33.2V40.5h50.6v5.2l-36.1 53.4h35v10.5h-53.3v-5.2zM424.8 84.5c0-4 .8-7.6 2.3-10.8 1.5-3.3 3.6-6.1 6.2-8.4 2.6-2.3 5.6-4.1 9-5.4s7-1.9 10.9-1.9c3.8 0 7.4.6 10.7 1.9 3.3 1.3 6.2 3.1 8.6 5.4s4.4 5.1 5.7 8.3c1.4 3.2 2.1 6.8 2.1 10.7 0 4-.7 7.6-2.2 10.8-1.5 3.2-3.4 6-5.9 8.3-2.5 2.3-5.4 4.1-8.8 5.3-3.4 1.3-7 1.9-10.8 1.9-3.8 0-7.5-.6-10.9-1.9-3.4-1.3-6.3-3.1-8.8-5.4-2.5-2.3-4.5-5.1-5.9-8.2-1.5-3.2-2.2-6.8-2.2-10.6zm28.2 16.8c2.5 0 4.7-.5 6.5-1.4s3.3-2.2 4.5-3.8c1.2-1.6 2-3.4 2.6-5.4.5-2.1.8-4.2.8-6.4 0-2.3-.3-4.5-.9-6.6-.6-2.1-1.5-3.9-2.7-5.4-1.2-1.6-2.7-2.8-4.6-3.7s-4-1.3-6.5-1.3-4.7.5-6.5 1.4-3.3 2.2-4.4 3.8c-1.1 1.6-2 3.4-2.5 5.5s-.8 4.3-.8 6.6c0 2.2.3 4.4.9 6.4s1.5 3.8 2.7 5.3c1.2 1.5 2.7 2.7 4.5 3.6 1.8 1 3.9 1.4 6.4 1.4zM489.2 36.1h12.1v31c.8-1.6 1.8-2.9 3-4.1 1.2-1.2 2.5-2.1 4-2.8 1.5-.7 3-1.3 4.7-1.7s3.4-.5 5.1-.5c3 0 5.7.5 7.9 1.5s4.2 2.4 5.7 4.2c1.5 1.8 2.7 3.9 3.4 6.3.8 2.4 1.1 5.1 1.1 8v31.7H524V79.2c0-3.7-.9-6.4-2.8-8.4s-4.5-2.9-8.1-2.9c-3.9 0-6.9 1.1-9 3.3s-3.1 5.1-3.1 8.7v29.7h-12.1l.3-73.5zM544.2 84.5c0-4 .8-7.6 2.3-10.8 1.5-3.3 3.6-6.1 6.2-8.4 2.6-2.3 5.6-4.1 9-5.4s7-1.9 10.8-1.9c3.8 0 7.4.6 10.7 1.9 3.3 1.3 6.2 3.1 8.6 5.4s4.4 5.1 5.7 8.3c1.4 3.2 2.1 6.8 2.1 10.7 0 4-.7 7.6-2.2 10.8-1.5 3.2-3.4 6-5.9 8.3-2.5 2.3-5.4 4.1-8.8 5.3-3.4 1.3-7 1.9-10.8 1.9-3.8 0-7.5-.6-10.8-1.9-3.4-1.3-6.3-3.1-8.8-5.4-2.5-2.3-4.5-5.1-5.9-8.2-1.5-3.2-2.2-6.8-2.2-10.6zm28.1 16.8c2.5 0 4.7-.5 6.5-1.4s3.3-2.2 4.5-3.8c1.2-1.6 2-3.4 2.6-5.4.5-2.1.8-4.2.8-6.4 0-2.3-.3-4.5-.9-6.6-.6-2.1-1.5-3.9-2.7-5.4-1.2-1.6-2.7-2.8-4.6-3.7s-4-1.3-6.5-1.3-4.7.5-6.5 1.4-3.3 2.2-4.4 3.8c-1.1 1.6-2 3.4-2.5 5.5s-.8 4.3-.8 6.6c0 2.2.3 4.4.9 6.4s1.5 3.8 2.7 5.3c1.2 1.5 2.7 2.7 4.5 3.6 1.8 1 4 1.4 6.4 1.4z"},null,8,zm),g("path",{fill:s.isDarkMode?"#fff":"#226db4",d:"M114.7 293c-8.3 0-16.2-3.3-22-9.1L21.8 213c-12.2-12.2-12.2-31.9 0-44.1L92.7 98c12.2-12.2 31.9-12.2 44.1 0l26.6 26.7c3.3 3.3 3.3 8.7 0 12-3.3 3.3-8.7 3.3-12 0L124.7 110c-5.5-5.5-14.5-5.5-20 0l-70.9 70.9c-5.5 5.5-5.5 14.5 0 20l70.9 70.9c5.5 5.5 14.5 5.5 20 0l26.7-26.6c3.3-3.3 8.7-3.2 12 .1 3.2 3.3 3.2 8.6 0 11.9l-26.6 26.6c-5.9 5.9-13.8 9.2-22.1 9.2z"},null,8,Om),g("path",{fill:s.isDarkMode?"#fff":"#089949",d:"M200.6 293c-8.3 0-16.2-3.3-22-9.1l-71-70.9c-12.2-12.2-12.2-31.9 0-44.1L178.5 98c12.2-12.2 31.9-12.2 44.1 0l70.9 70.9c12.2 12.2 12.2 31.9 0 44.1l-70.9 70.9c-5.8 5.8-13.8 9.1-22 9.1zm0-187.2c-3.8 0-7.4 1.5-10 4.2l-70.9 70.9c-5.5 5.5-5.5 14.5 0 20l70.9 70.9c5.5 5.5 14.5 5.5 20 0l70.9-70.9c5.5-5.5 5.5-14.5 0-20L210.6 110c-2.7-2.7-6.3-4.2-10-4.2zM157.6 77.6c-20.6 0-37.3-16.7-37.3-37.3S137.1 3 157.6 3c20.6 0 37.3 16.7 37.3 37.3s-16.7 37.3-37.3 37.3zm0-57.6c-11.2 0-20.3 9.1-20.3 20.3s9.1 20.3 20.3 20.3 20.3-9.1 20.3-20.3c0-11.2-9-20.3-20.3-20.3z"},null,8,Fm)]))}};const Um={class:"tw-flex tw-w-full tw-items-center tw-justify-between"},Hm=g("div",{class:"tw-flex tw-items-center"},[g("span",{class:"text-h5"},"Remote session")],-1),Nm={class:"tw-flex tw-items-center"},jm=g("span",null,"by",-1),Wm={key:0},qm=g("div",{class:"tw-text-earl-1000 dark:tw-text-earl-50"}," Contacting Zoho to initiate a remote session... ",-1),Ym={key:1,class:"tw-text-earl-1000 dark:tw-text-earl-50"},Km={key:2,class:"zoho-modal__ready-div tw-flex tw-flex-col tw-justify-between tw-text-earl-1000 dark:tw-text-earl-50"},Xm=g("div",null,"The remote session is ready. Follow the steps to begin.",-1),Gm=g("div",{class:"tw-font-medium"},"1. Start your remote session",-1),Zm=["href"],Qm=g("div",{class:"tw-font-medium"},"2. Invite your Help Desk end user",-1),Jm=g("div",null," Share this link with your end-user. This link has also been sent as a comment on the ticket. ",-1),t1={class:"tw-flex"},e1={key:3},s1={class:"tw-inline-flex"},i1=g("div",null," When launched, the session will open in a new tab and send an invite link as a public response in the ticket. There will also be a shareable link to the session on the next page. Once the end user joins, your session will start. ",-1),n1=g("div",{class:"tw-py-2 tw-text-sm tw-font-medium"},"No signup required.",-1),o1=g("div",null,[g("ul",{class:"tw-pl-6"},[g("li",{class:"tw-list-disc"},"Multiple technicians"),g("li",{class:"tw-list-disc"},"Concurrent sessions"),g("li",{class:"tw-list-disc"}," File transfer, session recordings, remote printing, audit reports, and more ")])],-1),a1=g("div",{class:"tw-mt-2 tw-text-xs tw-text-earl-500 dark:tw-text-earl-40"},[N(" This service is provided in partnership with Zoho Assist, and Zoho's "),g("a",{href:"https://www.zoho.com/terms.html",target:"_blank",class:"tw-text-inherit tw-underline"},"terms of service"),N(" and "),g("a",{href:"https://www.zoho.com/privacy.html",target:"_blank",class:"tw-text-inherit tw-underline"},"privacy policy"),N(" apply. ")],-1),r1={__name:"ZohoModal",props:{isShowingDialog:{type:Boolean,default:!1},ticketId:{type:Number,required:!0}},emits:["update:isShowingDialog","dialog-action","zoho-session-started-action"],setup(s,{emit:t}){const e=s,i=t,n=xt(),o=Object.freeze({initial:1,loading:2,error:3,sessionCreated:4}),a=I(o.initial),r=I(""),l=I(""),c=I(e.isShowingDialog),{isDarkMode:d}=Zi(),u=new Em;lt(()=>e.isShowingDialog,x=>{c.value=x}),lt(c,x=>{i("update:isShowingDialog",x)});const p=async()=>{try{a.value=o.loading;const x=await u.startZohoSession(e.ticketId);i("zoho-session-started-action"),a.value=o.sessionCreated,r.value=x.zohoSession.customerUrl,l.value=x.zohoSession.technicianUrl,window.open(l.value,"_blank"),Yt.track("remote-support-session-launched","tickets|vue")}catch{a.value=o.error}},m=()=>{i("dialog-action",!1),setTimeout(()=>{a.value=o.initial},1e3)},b=()=>{window.open("https://www.zoho.com/assist/?utm_source=Spiceworks&utm_medium=Product&utm_campaign=CloudHelpdesk-Integration&utm_term=Jan2019&utm_content","_blank"),Yt.track("remote-support-full-feature-redirected","tickets|vue")},v=()=>{window.open("https://www.zoho.com/assist/?utm_source=spw-ast-hd-tlogo&utm_medium=web&utm_campaign=ast-spw-intg","_blank"),Yt.track("remote-support-logo-redirected","tickets|vue")},_=async()=>{try{await navigator.clipboard.writeText(r.value),n.dispatch("showSnackbar",{display:!0,message:"Copied!",type:"success"})}catch{n.dispatch("showSnackbar",{display:!0,message:"Copy failed",type:"error"})}};return(x,C)=>(w(),M(Le,{justify:"center","no-gutters":""},{default:y(()=>[f(Ki,{modelValue:c.value,"onUpdate:modelValue":C[6]||(C[6]=T=>c.value=T),"content-class":"tw-text-earl-1000",class:"chd-modal","max-width":"720px","onClick:outside":C[7]||(C[7]=T=>m()),onKeydown:C[8]||(C[8]=Je(T=>m(),["esc"]))},{default:y(()=>[f(pe,{variant:"elevated",class:"zoho-modal__parent-card"},{default:y(()=>[f(ss,{class:"chd-modal-title"},{default:y(()=>[g("div",Um,[Hm,g("div",Nm,[g("button",{class:"tw-flex tw-items-center tw-space-x-2 tw-text-sm",onClick:C[0]||(C[0]=T=>v())},[jm,f(Bm,{class:"tw-self-center","aria-label":"Zoho","is-dark-mode":h(d)},null,8,["is-dark-mode"])]),f(pt,{icon:"mdi-close-circle-outline","aria-label":"close",onClick:C[1]||(C[1]=T=>m())})])])]),_:1}),f(ce,{class:"chd-modal-text tw-pb-5 tw-pt-4"},{default:y(()=>[a.value===h(o).loading?(w(),D("div",Wm,[qm,f(Be,{class:"tw-mx-auto tw-my-8 tw-block",color:"earl-600",indeterminate:""})])):a.value===h(o).error?(w(),D("div",Ym," Contacting Zoho failed. Please close this window and try again. ")):a.value===h(o).sessionCreated?(w(),D("div",Km,[Xm,g("div",null,[Gm,g("div",null,[N(" The remote session was opened in another window. If you have popups blocked, "),g("a",{href:l.value,target:"_blank",class:"tw-text-inherit tw-underline"},"you can use this link to open the remote session in a new tab.",8,Zm)])]),g("div",null,[Qm,Jm,g("div",t1,[f(kt,{modelValue:r.value,"onUpdate:modelValue":C[2]||(C[2]=T=>r.value=T),class:"zoho-modal__customer-url-text-field tw-mr-3 tw-mt-4"},null,8,["modelValue"]),f(ut,{text:"Copy",class:"tw-mt-4",onClick:C[3]||(C[3]=T=>_())})])])])):(w(),D("div",e1,[g("div",s1,[f(pe,{class:"tw-mr-2 tw-basis-1/2 tw-border-earl-100 dark:tw-border-earl-500 dark:tw-bg-earl-1200 dark:hover:tw-bg-earl-1200"},{default:y(()=>[f(ss,{class:"tw-py-2 tw-text-sm tw-text-earl-1000 dark:tw-text-earl-50"},{default:y(()=>[N("Try the free remote support tool. ")]),_:1}),f(ce,{class:"tw-pb-0 tw-text-earl-1000 dark:tw-text-earl-50"},{default:y(()=>[i1,n1]),_:1}),f(Tn,{class:"tw-px-4 tw-pb-4"},{default:y(()=>[f(ut,{"button-type":"primary",text:"Start remote session",onClick:C[4]||(C[4]=T=>p())})]),_:1})]),_:1}),f(pe,{class:"tw-ml-2 tw-flex tw-basis-1/2 tw-flex-col tw-justify-between tw-border-earl-100 tw-bg-earl-50 dark:tw-border-earl-500 dark:tw-bg-earl-1200"},{default:y(()=>[g("div",null,[f(ss,{class:"tw-py-2 tw-text-sm tw-text-earl-1000 dark:tw-text-earl-50"},{default:y(()=>[N("Need additional features?")]),_:1}),f(ce,{class:"tw-text-earl-1000 dark:tw-text-earl-50"},{default:y(()=>[o1]),_:1})]),f(Tn,{class:"tw-px-4 tw-pb-4"},{default:y(()=>[f(ut,{"button-type":"primary-ghost",text:"Try the full feature set",onClick:C[5]||(C[5]=T=>b())})]),_:1})]),_:1})]),a1]))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};function l1(s,t,e){const i=I(null),n=I(null),o=I(null),a=I(null),r=I({}),l=()=>{i.value=s.value.ticketCategoryId,n.value=s.value.organizationId,o.value=s.value.status,a.value=s.value.priority,t.value.forEach(v=>{r.value[v.id]=v.value})},c=(v,_,x)=>{x||(s.value[v]=_.value,e())},d=v=>c("ticketCategoryId",i,v),u=v=>c("organizationId",n,v),p=v=>c("status",o,v),m=v=>c("priority",a,v),b=(v,_)=>{_||(v.value=r.value[v.id],e())};return lt(()=>s.value.ticketCategoryId,v=>{i.value=v}),lt(()=>s.value.organizationId,v=>{n.value=v}),lt(()=>s.value.status,v=>{o.value=v}),lt(()=>s.value.priority,v=>{a.value=v}),lt(t,v=>{v.forEach(_=>{r.value[_.id]||(r.value[_.id]=_.value)})},{deep:!0}),{selectedCategory:i,selectedOrganization:n,selectedStatus:o,selectedPriority:a,selectedCustomAttributeValues:r,initializeSelectedValues:l,onCategoryMenuUpdate:d,onOrganizationMenuUpdate:u,onStatusMenuUpdate:p,onPriorityMenuUpdate:m,onCustomAttributeMenuUpdate:b}}const c1={class:"tw-flex tw-items-center tw-space-x-3 tw-border-b tw-border-earl-100 tw-p-4 dark:tw-border-none dark:tw-bg-earl-1200"},d1={class:"tw-ml-auto tw-flex-none tw-font-normal"},u1={class:"tw-flex tw-items-center tw-justify-between tw-text-sm"},h1=g("span",{class:"tw-text-sm dark:tw-text-earl-50"}," Mute email notifications ",-1),f1={key:0},p1={class:"overflow-auto"},m1=g("div",null,[g("div",{class:"tw-cursor-pointer tw-text-sm tw-underline"},"More Attributes...")],-1),g1={key:2},w1={key:0},v1={key:1},b1={key:2},y1={key:3},_1={key:4},k1={key:5},x1={class:"overflow-auto"},C1=g("div",{class:"tw-py-0"},[g("div",{class:"tw-cursor-pointer tw-text-sm tw-underline"},"Less Attributes...")],-1),S1={class:"tw-ml-auto tw-flex-none tw-font-normal"},T1={class:"tw-ml-auto tw-flex-none tw-font-normal"},D1={key:0,class:"tw-top-0 tw-z-10 tw-w-full tw-whitespace-nowrap tw-bg-white tw-py-4 dark:tw-bg-earl-1200"},A1={key:1},$1={class:"tw-max-w-40 tw-truncate"},M1={__name:"DesktopTicketAttributes",emits:["update:ticket","update-ticket-history","load-ticket-data","getActivities","showSnackbar"],setup(s,{emit:t}){const e=t,{ticket:i,showCustomDatePicker:n,updateTicketAttributes:o,initializeData:a,showCustomTimeTracking:r,activeAlerts:l,panels:c,isCustomValuesFullyLoaded:d,showMoreAttributes:u,ticketAccessibleOrganizations:p,usersForCurrentOrganization:m,endUserLoading:b,customValues:v,createEndUserHandler:_,assignees:x,statuses:C,priorities:T,clearDueDate:$,dueDate:k,updateDateTime:A,showDueDatePicker:P,ticketCategoriesForCurrentOrg:z,taskProgress:j,timeTrackingOptions:V,timeTrackingDisabledButton:O,timeTrackingLabel:B,timeTracking:U,watchers:H,updateTimeTracking:J,removeWatcher:K,vuelidateTouch:G,resetTimeTrackingValidation:ot,shouldDisableSaveCustomTimeButton:et,users:ct,saveCustomTimeTracking:it,timeSpentLabel:W,v$:wt,updateText:at,customDatePickerDates:rt,clearCustomAttrDate:E,handleUpdateCustomAttrDate:q,getPhoneErrorMessage:Z}=Wo(e),{formatDate:Pt}=Ne(),{gtmEvent:Gt}=Yn(),{selectedCategory:te,selectedOrganization:le,selectedStatus:Q,selectedPriority:X,selectedCustomAttributeValues:R,initializeSelectedValues:nt,onCategoryMenuUpdate:Kt,onOrganizationMenuUpdate:jt,onStatusMenuUpdate:Tt,onPriorityMenuUpdate:Mt,onCustomAttributeMenuUpdate:Wt}=l1(i,v,o),ue=xt(),xs=S(()=>ue.state.isCurrentTicketFullyLoaded),ns=I(!1),Cs=I(null);re(()=>{a(),nt()});const ui=()=>{r.value=!r.value,qs()},qs=(se=100)=>{ps(()=>{setTimeout(()=>{Cs.value.scrollTop=Cs.value.scrollHeight},se)})},hi=()=>{ns.value=!0,Yt.track("remote-support-modal-opened","tickets|vue")},st=()=>{ns.value=!1},gt=()=>{Gt({category:"tickets",subcategory:"details",label:"print-icon",action:"click",value:"icon"}),setTimeout(()=>{window.print()},50)};return(se,dt)=>(w(),D("div",{ref_key:"ticketAttributesElement",ref:Cs,class:"ticket-attributes-container tw-block tw-overflow-y-auto"},[g("div",c1,[f(ut,{text:"Remote session",onClick:dt[0]||(dt[0]=Y=>hi())}),f(ut,{icon:"mdi-printer-outline","aria-label":"Print ticket",onClick:gt})]),f(_l,{id:"ticket-attributes-container",modelValue:h(c),"onUpdate:modelValue":dt[18]||(dt[18]=Y=>Ct(c)?c.value=Y:null),multiple:"",variant:"accordion",class:"tw-max-w-full","selected-class":"tw-bg-earl-1200"},{default:y(()=>[Ft(f(Te,{id:"alerts-expansion-panel",class:"chd-expansion-panel dark:tw-bg-earl-1200"},{default:y(()=>[f(De,{class:"tw-justify-between","selected-class":"tw-bg-earl-1200"},{default:y(()=>[N(" Alerts "),g("span",d1,L(h(l).length),1)]),_:1}),f(Ae,{class:"tw-pb-2"},{default:y(()=>[f(Jt,{class:"tw-py-0"},{default:y(()=>[(w(!0),D(ht,null,vt(h(l),Y=>(w(),M(ft,{key:Y.id,class:"tw-font-normal dark:tw-bg-earl-800"},{default:y(()=>[g("div",null,[g("span",u1,L(Y.message)+". ",1)])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},512),[[be,h(l).length>0]]),f(Te,{class:"dark:tw-bg-earl-1200","selected-class":"tw-bg-earl-1200"},{default:y(()=>[f(De,null,{default:y(()=>[N(" Attributes ")]),_:1}),f(Ae,{class:"tw-p-0 tw-pb-2"},{default:y(()=>[f(Jt,{class:"tw-py-0 dark:tw-bg-earl-1200"},{default:y(()=>[f(ft,null,{default:y(()=>[f(zo,{modelValue:h(i).muted,"onUpdate:modelValue":[dt[1]||(dt[1]=Y=>h(i).muted=Y),h(o)],class:"tw-ml-2"},{label:y(()=>[h1]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),f(ft,null,{default:y(()=>[g("div",null,[f(Ze,{modelValue:h(le),"onUpdate:modelValue":dt[2]||(dt[2]=Y=>Ct(le)?le.value=Y:null),items:h(p),"item-title":"name","item-value":"id",label:"Organization","hide-details":"",class:"tw-z-30","onUpdate:menu":h(jt)},{selection:y(({item:Y})=>[h(p)&&h(p).length>0?(w(),D("span",f1,L(Y.title),1)):F("",!0)]),_:1},8,["modelValue","items","onUpdate:menu"])])]),_:1}),f(ft,null,{default:y(()=>[g("div",null,[f(Is,{modelValue:h(i).creator,"onUpdate:modelValue":dt[3]||(dt[3]=Y=>h(i).creator=Y),users:h(m),"item-text":"name","item-value":"uid",label:"Contact","custom-class":"tw-z-30","allow-end-user-creation":!0,loading:h(b),"return-object":!0,onChange:h(o),onCreateEndUser:h(_)},null,8,["modelValue","users","loading","onChange","onCreateEndUser"])])]),_:1}),f(ft,null,{default:y(()=>[g("div",null,[f(Is,{modelValue:h(i).assignee,"onUpdate:modelValue":dt[4]||(dt[4]=Y=>h(i).assignee=Y),users:h(x),"item-text":"name","item-value":"id",label:"Assignee","custom-class":"tw-z-30",onChange:h(o)},null,8,["modelValue","users","onChange"])])]),_:1}),f(ft,null,{default:y(()=>[g("div",null,[f(Ze,{modelValue:h(Q),"onUpdate:modelValue":dt[5]||(dt[5]=Y=>Ct(Q)?Q.value=Y:null),items:h(C),"item-title":"name","item-value":"id",label:"Status","hide-details":"",class:"tw-z-30","onUpdate:menu":h(Tt)},null,8,["modelValue","items","onUpdate:menu"])])]),_:1}),f(ft,null,{default:y(()=>[g("div",null,[f(Ze,{modelValue:h(X),"onUpdate:modelValue":dt[6]||(dt[6]=Y=>Ct(X)?X.value=Y:null),items:h(T),"item-title":"name","item-value":"id",label:"Priority","hide-details":"",class:"tw-z-30","onUpdate:menu":h(Mt)},null,8,["modelValue","items","onUpdate:menu"])])]),_:1}),f(ft,null,{default:y(()=>[f(kt,{"model-value":h(Pt)(h(i).dueAt),label:"Due Date","prepend-inner-icon":"mdi-calendar",readonly:"",clearable:"","hide-details":"",class:"tw-z-30",onClick:dt[7]||(dt[7]=Y=>P.value=!0),"onClick:clear":h($)},null,8,["model-value","onClick:clear"]),g("div",p1,[Ft(f(ni,{modelValue:h(k),"onUpdate:modelValue":[dt[8]||(dt[8]=Y=>Ct(k)?k.value=Y:null),h(A)]},null,8,["modelValue","onUpdate:modelValue"]),[[be,h(P)]])])]),_:1}),f(ft,null,{default:y(()=>[g("div",null,[f(Ze,{modelValue:h(te),"onUpdate:modelValue":dt[9]||(dt[9]=Y=>Ct(te)?te.value=Y:null),items:h(z),"item-title":"name","item-value":"id",label:"Category","hide-details":"",class:"tw-z-30","onUpdate:menu":h(Kt)},null,8,["modelValue","items","onUpdate:menu"])])]),_:1}),h(d)?h(d)&&!h(u)&&h(v).length>0?(w(),M(ft,{key:1,class:"custom-attrs-toggle",onClick:dt[10]||(dt[10]=Y=>u.value=!0)},{default:y(()=>[m1]),_:1})):(w(),D("div",g1,[(w(!0),D(ht,null,vt(h(v),Y=>(w(),M(ft,{key:Y.id},{default:y(()=>[Y.type==="list"?(w(),D("div",w1,[f(Ze,{modelValue:h(R)[Y.id],"onUpdate:modelValue":Et=>h(R)[Y.id]=Et,items:Y.options,label:Y.name,"hide-details":"",class:"tw-z-30","onUpdate:menu":Et=>h(Wt)(Y,Et)},null,8,["modelValue","onUpdate:modelValue","items","label","onUpdate:menu"])])):Y.type==="text_area"?(w(),D("div",v1,[f(oe,{modelValue:Y.value,"onUpdate:modelValue":Et=>Y.value=Et,label:Y.name,"hide-details":"",class:"tw-z-30",onBlur:Et=>h(at)(Y)},null,8,["modelValue","onUpdate:modelValue","label","onBlur"])])):Y.type==="phone"?(w(),D("div",b1,[f(kt,{modelValue:Y.value,"onUpdate:modelValue":Et=>Y.value=Et,type:"phone",label:Y.name,"error-messages":h(Z)(Y),class:"tw-z-30",onBlur:Et=>h(at)(Y)},null,8,["modelValue","onUpdate:modelValue","label","error-messages","onBlur"])])):Y.type==="number"?(w(),D("div",y1,[f(kt,{modelValue:Y.value,"onUpdate:modelValue":Et=>Y.value=Et,type:"number",label:Y.name,"hide-details":"",class:"tw-z-30",onBlur:Et=>h(at)(Y)},null,8,["modelValue","onUpdate:modelValue","label","onBlur"])])):Y.type==="text_field"?(w(),D("div",_1,[f(kt,{modelValue:Y.value,"onUpdate:modelValue":Et=>Y.value=Et,label:Y.name,"hide-details":"",class:"tw-z-30",onBlur:Et=>h(at)(Y)},null,8,["modelValue","onUpdate:modelValue","label","onBlur"])])):Y.type==="date"?(w(),D("div",k1,[f(kt,{"model-value":h(Pt)(Y.value),label:Y.name,"prepend-inner-icon":"mdi-calendar",readonly:"",clearable:"","hide-details":"",class:"tw-z-30",onClick:Et=>h(n)[Y.id]=!0,"onClick:clear":Et=>h(E)(Y)},null,8,["model-value","label","onClick","onClick:clear"]),g("div",x1,[Ft(f(ni,{modelValue:h(rt)[Y.id],"onUpdate:modelValue":[Et=>h(rt)[Y.id]=Et,Et=>h(q)(Y,Et)]},null,8,["modelValue","onUpdate:modelValue"]),[[be,h(n)[Y.id]]])])])):F("",!0)]),_:2},1024))),128))])):(w(),M(de,{key:0,size:32,width:4})),h(u)&&h(v).length>0?(w(),M(ft,{key:3,class:"custom-attrs-toggle",onClick:dt[11]||(dt[11]=Y=>u.value=!1)},{default:y(()=>[C1]),_:1})):F("",!0)]),_:1})]),_:1})]),_:1}),f(Te,{class:"chd-expansion-panel dark:tw-bg-earl-1200"},{default:y(()=>[f(De,{class:"tw-justify-between tw-text-sm"},{default:y(()=>[N(" Related devices ")]),_:1}),f(Ae,{class:"tw-px-4 tw-pb-2"},{default:y(()=>[xs.value?(w(),M(Lm,{key:1,"ticket-id":h(i).id},null,8,["ticket-id"])):(w(),M(de,{key:0,size:32,width:4}))]),_:1})]),_:1}),f(Te,{class:"chd-expansion-panel dark:tw-bg-earl-1200"},{default:y(()=>[f(De,{class:"tw-text-sm"},{default:y(()=>[N(" Tasks "),g("span",S1,L(h(j)),1)]),_:1}),f(Ae,{class:"tw-px-4 tw-pb-2"},{default:y(()=>[xs.value?(w(),M(ac,{key:1,"ticket-id":h(i).id},null,8,["ticket-id"])):(w(),M(de,{key:0,size:32,width:4}))]),_:1})]),_:1}),f(Te,{class:"chd-expansion-panel dark:tw-bg-earl-1200"},{default:y(()=>[f(De,{class:"tw-justify-between",onClick:dt[12]||(dt[12]=Y=>qs(500))},{default:y(()=>[N(" Time spent "),g("span",T1,L(h(W)),1)]),_:1}),f(Ae,{class:"tw-px-4 tw-py-2 tw-pb-4"},{default:y(()=>[f(fl,{divided:"",class:"time-tracking tw-flex-wrap dark:tw-bg-earl-1200"},{default:y(()=>[(w(!0),D(ht,null,vt(h(V),Y=>(w(),M(ut,{key:Y,text:h(B)(Y),disabled:!!h(O),class:mt(`${h(O)&&h(O)!=="btn"+Y?"tw-opacity-60":""}`),onClick:Lt(Et=>h(J)(Y),["stop"])},{default:y(()=>[h(O)===`btn${Y}`?(w(),M(Be,{key:0,size:18,width:2,class:mt(`${h(B)(Y).length===4?"tw-mx-3":"tw-mx-1"}`),indeterminate:""},null,8,["class"])):F("",!0)]),_:2},1032,["text","disabled","class","onClick"]))),128)),f(ut,{text:"Custom",disabled:!!h(O),class:mt([h(r)?"tw-border-l":"",h(O)?"tw-opacity-60":""]),onClick:ui},null,8,["disabled","class"])]),_:1}),h(r)?(w(),D("div",D1,[f(kt,{modelValue:h(U).time,"onUpdate:modelValue":dt[13]||(dt[13]=Y=>h(U).time=Y),label:"Time spent",placeholder:"e.g. -16m or 2h 21m",hint:"Use a dash - to remove time.","error-messages":h(wt).time.$dirty&&h(wt).time.$invalid?h(wt).time.timeTrackingFormatValid.$message:"",onBlur:h(G),onFocus:h(ot)},null,8,["modelValue","error-messages","onBlur","onFocus"]),f(Is,{modelValue:h(U).assignee,"onUpdate:modelValue":dt[14]||(dt[14]=Y=>h(U).assignee=Y),users:h(ct),"item-text":"name","item-value":"id",label:"Admin or tech","custom-class":"tw-z-30 tw-mt-3"},null,8,["modelValue","users"]),f(oe,{modelValue:h(U).description,"onUpdate:modelValue":dt[15]||(dt[15]=Y=>h(U).description=Y),label:"Description (optional)",counter:"100",maxlength:"100",rows:"3",class:"tw-my-2"},null,8,["modelValue"]),f(ut,{"button-type":"primary",class:"tw-float-right",text:"Save",disabled:h(et),onClick:h(it)},{default:y(()=>[h(O)==="btnCustom"?(w(),M(Be,{key:0,size:18,width:2,indeterminate:""})):F("",!0)]),_:1},8,["disabled","onClick"]),f(ut,{class:"tw-float-right tw-mr-3",disabled:h(O)==="btnCustom",text:"Cancel",onClick:dt[16]||(dt[16]=Y=>r.value=!1)},null,8,["disabled"])])):F("",!0)]),_:1})]),_:1}),f(Te,{class:"dark:tw-bg-earl-1200"},{default:y(()=>[f(De,{class:"tw-text-sm"},{default:y(()=>[N(" CC'ed users ")]),_:1}),f(Ae,{class:"tw-px-4 tw-py-2"},{default:y(()=>[xs.value?(w(),D("div",A1,[f(Is,{modelValue:h(H),"onUpdate:modelValue":dt[17]||(dt[17]=Y=>Ct(H)?H.value=Y:null),users:h(m),"item-text":"name","item-value":"uid","show-selected-chips":!1,"return-object":!0,label:"Add user",multiple:!0,"custom-class":"tw-z-30","allow-end-user-creation":!0,loading:h(b),onCreateEndUser:h(_)},null,8,["modelValue","users","loading","onCreateEndUser"]),f(Jt,{class:"cc-users-list dark:tw-bg-earl-1200",density:"compact"},{default:y(()=>[(w(!0),D(ht,null,vt(h(H),(Y,Et)=>(w(),M(ft,{key:Y.uid,class:"tw-px-0",density:"compact"},{prepend:y(()=>[f(ri,{size:24,class:"tw-mr-2",user:Y},null,8,["user"])]),default:y(()=>[g("div",$1,L(Y.name),1)]),append:y(()=>[f(pt,{class:"",icon:"",size:"x-small",onClick:tn=>h(K)(Et)},{default:y(()=>[f(bt,{class:"tw-text-lg"},{default:y(()=>[N("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):(w(),M(de,{key:0,size:32,width:4}))]),_:1})]),_:1})]),_:1},8,["modelValue"]),f(r1,{"is-showing-dialog":ns.value,"onUpdate:isShowingDialog":dt[19]||(dt[19]=Y=>ns.value=Y),"ticket-id":h(i).id,onDialogAction:st,onZohoSessionStartedAction:dt[20]||(dt[20]=Y=>se.$emit("load-ticket-data"))},null,8,["is-showing-dialog","ticket-id"])],512))}},P1=g("h2",{class:"tw-mb-2 tw-text-xs tw-font-medium"},"Ticket Attributes",-1),I1={class:"tw-space-y-4"},V1={class:"tw-font-medium"},L1={class:"tw-mt-1"},E1={class:"tw-break-words tw-font-medium"},R1={class:"tw-mt-1 tw-whitespace-pre-wrap"},z1={__name:"PrinterTicketAttributes",props:{ticket:{type:Object,required:!0}},setup(s){const t=s,{customAttributes:e,statuses:i,priorities:n,ticketCategories:o}=Wo(),{formatDateTimeRelativeWithHoursAndMinutes:a}=Ne(),r=S(()=>{var _,x,C;return{status:t.ticket.status,priority:t.ticket.priority,category:t.ticket.ticketCategoryId,assignee:((_=t.ticket.assignee)==null?void 0:_.name)||"Unassigned",creator:(x=t.ticket.creator)==null?void 0:x.name,createdAt:t.ticket.createdAt,updatedAt:t.ticket.updatedAt,dueAt:t.ticket.dueAt,organization:(C=t.ticket.assignee)==null?void 0:C.organizationName,timeSpent:t.ticket.timeSpentLabel}}),l=S(()=>t.ticket.customValues||[]),c=_=>_.replace(/([A-Z])/g," $1").replace(/^./,x=>x.toUpperCase()).trim(),d=(_,x)=>_==="status"?u(x):_==="priority"?p(x):_==="category"?m(x):_.includes("At")&&x?v(x):x||"-",u=_=>{const x=i.value.find(C=>C.id===_);return x?x.name:_},p=_=>{const x=n.value.find(C=>C.id===_);return x?x.name:_},m=_=>{if(!_)return"Unspecified";const x=o.value.find(C=>C.id===_);return x?x.name:_},b=_=>{const x=e.value.find(C=>C.id===_.customAttribute.id);return x?x.name:`Custom Attribute ${_.customAttribute.id}`},v=_=>a(_);return(_,x)=>(w(),D("div",null,[P1,g("div",I1,[(w(!0),D(ht,null,vt(r.value,(C,T)=>(w(),D("div",{key:T,class:"tw-flex tw-flex-col"},[g("span",V1,L(c(T)),1),g("span",L1,L(d(T,C)),1)]))),128)),(w(!0),D(ht,null,vt(l.value,C=>(w(),D("div",{key:C.id,class:"tw-flex tw-flex-col"},[g("span",E1,L(b(C)),1),g("span",R1,L(C.value||"-"),1)]))),128))])]))}};function rc(){const{formatDate:s}=Ne();return{formatActivityEntry:e=>{if(!e)return"";let i="",n="",o="";if(e.property==="due date"||e.activityType==="customAttribute"){i=(e.htmlLabel||"").replace(/<.*/,"");const r=e.activityType==="customAttribute"?Object.values(e.change||{})[0]:e.change;if(Array.isArray(r)&&r.length===2){const[l,c]=r.map(d=>Cu(d)?s(d):d);l&&c?n=`${l}  ${c}.`:c?n=`${c}.`:l&&(n=l,o=` from ${e.property}.`)}return`${i}<strong>${n}</strong>${o}`}if(e.htmlLabel)return e.htmlLabel;switch(e.activityType){case"ticketProperty":return e.property==="created the ticket"?"created the ticket.":`updated ${e.property||"a property"}.`;case"comment":case"note":return e.body||"";default:return""}}}}function lc(){return{formatPrinterAttachmentHeader:e=>{const i=e.length;return i===1?`Attachment (${i})`:`Attachments (${i})`},formatPrinterAttachmentList:e=>e.map(i=>i.filename).join(", ")}}const O1={class:"tw-mb-4 tw-break-inside-avoid"},F1={key:0},B1={class:"tw-font-medium"},U1={class:"tw-ml-2"},H1={class:"tw-mb-1 tw-flex tw-items-center tw-justify-between"},N1={class:"tw-flex tw-flex-wrap tw-items-center"},j1={class:"tw-font-bold"},W1={class:"tw-ml-4"},q1={key:0,class:"tw-ml-4"},Y1={key:0},K1=["innerHTML"],X1={key:0,class:"tw-mt-2"},G1={class:"tw-break-words"},Z1={class:"tw-font-medium"},Q1={class:"tw-ml-1"},J1=g("hr",{class:"tw-my-4 tw-border-t tw-border-earl-200"},null,-1),tg={__name:"PrinterTicketActivity",props:{entry:{type:Object,required:!0}},setup(s){const{formatDateTimeRelativeWithHoursAndMinutes:t}=Ne(),{formatActivityEntry:e}=rc(),{formatPrinterAttachmentHeader:i,formatPrinterAttachmentList:n}=lc(),o=r=>t(r),a=r=>{var c;return`${r.activityType==="note"?"Internal note":"Comment"} was removed by ${(c=r.creator)==null?void 0:c.name}`};return(r,l)=>{var c;return w(),D("div",O1,[s.entry.deleted?(w(),D("div",F1,[g("span",B1,L(a(s.entry)),1),g("span",U1,L(o(s.entry.deletedAt)),1)])):(w(),D(ht,{key:1},[g("div",H1,[g("div",N1,[g("span",j1,L((c=s.entry.creator)==null?void 0:c.name),1),g("span",W1,L(o(s.entry.createdAt)),1),s.entry.editedAt?(w(),D("span",q1," (edited "+L(o(s.entry.editedAt))+") ",1)):F("",!0)]),s.entry.activityType==="note"?(w(),D("span",Y1,"Internal Note")):F("",!0)]),g("p",{class:"tw-whitespace-pre-wrap",innerHTML:h(e)(s.entry)},null,8,K1),s.entry.files&&s.entry.files.length>0?(w(),D("div",X1,[g("p",G1,[g("span",Z1,L(h(i)(s.entry.files)),1),g("span",Q1,L(h(n)(s.entry.files)),1)])])):F("",!0)],64)),J1])}}},eg={class:"tw-min-h-screen tw-bg-white tw-text-[0.625rem] tw-text-earl-900"},sg={class:"tw-mb-2 tw-text-xs"},ig=g("span",{class:"tw-font-medium"},"Ticket No: ",-1),ng={class:"tw-mb-2 tw-text-xs"},og=g("span",{class:"tw-font-medium"},"Summary ",-1),ag={class:"tw-mb-4"},rg=g("span",{class:"tw-mb-2 tw-block tw-font-medium"},"Description",-1),lg={class:"tw-whitespace-pre-wrap"},cg={key:0,class:"tw-mb-4"},dg={class:"tw-break-words"},ug={class:"tw-font-medium"},hg={class:"tw-ml-1"},fg=g("hr",{class:"tw-my-4 tw-border-t tw-border-earl-300"},null,-1),pg=g("hr",{class:"tw-my-4 tw-border-t tw-border-earl-300"},null,-1),mg=g("h2",{class:"tw-mb-2 tw-text-xs tw-font-medium"},"Ticket Activity",-1),gg={__name:"PrinterTicketHistory",setup(s){const{currentTicket:t,ticketActivityEntries:e}=ci(),{formatPrinterAttachmentHeader:i,formatPrinterAttachmentList:n}=lc(),o=S(()=>{var a;return((a=t.value)==null?void 0:a.files)||[]});return(a,r)=>(w(),D("div",eg,[g("div",sg,[ig,g("span",null,L(h(t).ticketNumber),1)]),g("div",ng,[og,g("span",null,L(h(t).summary),1)]),g("div",ag,[rg,g("p",lg,L(h(t).description),1)]),o.value.length>0?(w(),D("div",cg,[g("p",dg,[g("span",ug,L(h(i)(o.value)),1),g("span",hg,L(h(n)(o.value)),1)])])):F("",!0),fg,f(z1,{ticket:h(t)},null,8,["ticket"]),pg,mg,(w(!0),D(ht,null,vt(h(e),l=>(w(),M(tg,{key:`print-${l.id}-${l.activityType}`,entry:l},null,8,["entry"]))),128))]))}},wg={class:"tw-flex tw-w-full tw-items-center tw-justify-between"},vg={class:"tw-flex tw-justify-start"},bg={class:"tw-prefix tw-flex"},cc={__name:"SummaryAndDescription",props:{ticket:{type:Object,required:!0},isUpdating:{type:Boolean,default:!1}},emits:["update-ticket-history"],setup(s,{emit:t}){const e=s,i=t,n=xt(),o=I(""),a=I(""),r=I(""),l=I([]),c=I([]),{removeAttachment:d,uploadAttachment:u}=Xi(l),p=I(""),m=I(""),b={summary:{required:ls,maxLength:gs(255)},description:{required:ls,maxLength:gs(1e5)}},v=ms(b,{summary:o,description:a}),_=S(()=>n.state.isShowingSummaryAndDescriptionDialog),x=I(!1),C=I(!1);let T=null;const $=S(()=>{const K=[];return!v.value||!v.value.summary.$dirty||(v.value.summary.maxLength.$invalid&&K.push("Summary must be at most 255 characters long."),v.value.summary.required.$invalid&&K.push("Summary is required.")),K}),k=S(()=>{const K=[];return!v.value||!v.value.description.$dirty||(v.value.description.maxLength.$invalid&&K.push("Description must be at most 10000 characters long."),v.value.description.required.$invalid&&K.push("Description is required.")),K}),A=()=>{c.value=[],p.value=o.value,m.value=a.value,v.value.$reset()};lt(()=>e.ticket,K=>{K&&(o.value=K.summary||"",a.value=K.description||"",r.value=K.id||"",l.value=Array.isArray(K.files)?[...K.files]:[],A())},{immediate:!0});const P=()=>{v.value.$reset(),n.dispatch("setIsShowingSummaryAndDescriptionDialog",!1),z()},z=()=>{o.value=e.ticket.summary||"",a.value=e.ticket.description||"",r.value=e.ticket.id||"",l.value=Array.isArray(e.ticket.files)?[...e.ticket.files]:[],c.value=[]},j=K=>K.map(G=>G.signedId),V=K=>K.map(G=>G.id),O=S(()=>o.value!==p.value||a.value!==m.value||l.value.length!==e.ticket.files.length||c.value.length>0),B=S(()=>C.value||!O.value),U=()=>{if(v.value.$touch(),!v.value.$invalid){C.value=!0;const K=j(l.value),G=V(c.value);i("update-ticket-history",{summary:o.value,description:a.value,attachments:l.value,pendingAttachmentIds:K,attachmentIdsToRemove:G}),C.value=!1}},H=K=>{T=K,x.value=!0},J=K=>{K&&T!==null&&(Array.isArray(e.ticket.files)&&e.ticket.files.some(G=>G.id===l.value[T].id)&&c.value.push(l.value[T]),d(T)),T=null,x.value=!1};return(K,G)=>(w(),D(ht,null,[f(ii,{"is-showing-dialog":_.value,"show-action-buttons":!0,onCloseDialog:P},{content:y(()=>[f(kt,{modelValue:o.value,"onUpdate:modelValue":G[0]||(G[0]=ot=>o.value=ot),label:"Summary (required)",counter:255,"error-messages":$.value,class:"mt-4 mb-2"},null,8,["modelValue","error-messages"]),f(oe,{modelValue:a.value,"onUpdate:modelValue":G[1]||(G[1]=ot=>a.value=ot),label:"Description (required)","error-messages":k.value},null,8,["modelValue","error-messages"]),f(Gi,{"pending-attachments":l.value,class:"tw-pt-2",onAttachmentRemoved:H},null,8,["pending-attachments"])]),buttonActions:y(()=>[g("div",wg,[g("div",vg,[f(Oo,{onUploadAttachment:h(u)},null,8,["onUploadAttachment"])]),g("div",bg,[f(ut,{text:"Cancel",onClick:P}),f(ut,{"button-type":"primary",text:"Save",loading:s.isUpdating,disabled:B.value,onClick:U},null,8,["loading","disabled"])])])]),default:y(()=>[is(K.$slots,"default",{},()=>[N("Edit ticket")])]),_:3},8,["is-showing-dialog"]),f(Ue,{"is-showing-dialog":x.value,"onUpdate:isShowingDialog":G[2]||(G[2]=ot=>x.value=ot),title:"Delete attachments?","confirm-text":"Delete",onDialogAction:J},{default:y(()=>[N(" Are you sure you want to delete this attachment? ")]),_:1},8,["is-showing-dialog"])],64))}};const yg={class:"tw-flex tw-w-full tw-flex-col"},_g={key:0,class:"tw-flex tw-font-medium"},kg=["innerHTML"],dc={__name:"TicketActivity",props:{entry:{type:Object,required:!0},next:{type:Object,default:null},prev:{type:Object,default:null}},setup(s){const t=s,e=xt(),i=S(()=>e.state.ticketAttributesExpanded),{isTruncated:n,delayedSetIsTruncated:o,truncateContainer:a}=gu(),{formatActivityEntry:r}=rc(),l=I(!1),c=S(()=>!1),d=S(()=>c.value?"":"tw-py-3 tw-mb-2"),u=b=>["labor","ticketProperty","customAttribute"].includes(b==null?void 0:b.activityType),p=S(()=>c.value?u(t.next)?"extra-left-padding tw-pb-1":"extra-left-padding tw-pb-4":""),m=S(()=>l.value?"tw-line-clamp-none":"tw-line-clamp-1");return(b,v)=>(w(),D("div",{class:mt(["ticket-entry activity tw-flex tw-rounded-sm tw-px-3 tw-text-sm dark:tw-bg-earl-600",d.value])},[c.value?F("",!0):(w(),M(ri,{key:0,size:36,class:"mr-4",user:s.entry.creator},null,8,["user"])),g("div",yg,[c.value?F("",!0):(w(),D("div",_g,[g("span",{class:mt(["tw-max-w-44 tw-truncate lg:tw-max-w-32 dark:tw-text-earl-50",i.value?"xl:tw-max-w-28 3xl:tw-max-w-52":"3xl:tw-max-w-64"])},L(s.entry.creator.name),3),f(wu,{date:s.entry.createdAt},null,8,["date"])])),Ft((w(),D("div",{ref_key:"truncateContainer",ref:a,class:mt(["label tw-max-w-70vw tw-whitespace-pre-wrap tw-text-earl-700 [overflow-wrap:anywhere] lg:tw-max-w-none dark:tw-text-earl-50",[p.value,m.value]])},[g("span",{innerHTML:h(r)(s.entry)},null,8,kg)],2)),[[Cl,h(o)]]),h(n)?(w(),D("button",{key:1,class:"tw-self-start tw-text-earl-700 tw-underline dark:tw-text-earl-50","aria-hidden":"true",onClick:v[0]||(v[0]=Lt(_=>l.value=!l.value,["stop"]))},L(l.value?"Show less":"Show more"),1)):F("",!0)])],2))}};const uc=s=>(Pe("data-v-bed85670"),s=s(),Ie(),s),xg={class:"tw-relative tw-z-10 tw-flex tw-justify-center"},Cg={key:0,class:"tw-flex tw-justify-center"},Sg=uc(()=>g("div",{class:"tw-pl-2 tw-text-xs tw-font-normal tw-text-earl-1000 dark:tw-text-earl-50"}," Ticket description ",-1)),Tg={key:1,class:"tw-flex tw-justify-center"},Dg=uc(()=>g("div",{class:"tw-pl-2 tw-text-xs tw-font-normal tw-text-earl-1000 dark:tw-text-earl-50"}," Latest activity ",-1)),Ag={__name:"TicketHistoryQuickScrollButton",props:{isUp:{required:!0,type:Boolean}},emits:["scroll"],setup(s,{emit:t}){const e=t,i=()=>{e("scroll")};return(n,o)=>(w(),D("div",xg,[f(pt,{rounded:"",color:"",variant:"flat",size:"small",class:"quick-button tw-absolute tw-my-2 tw-h-9 tw-bg-white md:tw-h-7 dark:tw-border-earl-600 dark:tw-bg-earl-600",onClick:o[0]||(o[0]=a=>i())},{default:y(()=>[s.isUp?(w(),D("div",Cg,[f(bt,null,{default:y(()=>[N("mdi-arrow-up")]),_:1}),Sg])):(w(),D("div",Tg,[f(bt,null,{default:y(()=>[N("mdi-arrow-down")]),_:1}),Dg]))]),_:1})]))}},$n=St(Ag,[["__scopeId","data-v-bed85670"]]),$g={props:{id:{type:String,required:!0},parentCss:{type:Array,required:!0},firstPanelCss:{type:Array,required:!0},secondPanelCss:{type:Array,required:!0},resizeHandleCss:{type:Array,required:!0},defaultFirstPanelFlexBasis:{type:String,required:!0},shouldHideResizeHandle:{type:Boolean,default:!1},isHorizontalSplit:{type:Boolean,default:!1},minimumFirstPanelPercentage:{type:Number,required:!0},maximumFirstPanelPercentage:{type:Number,required:!0}},data(){return{isMouseDownOnResizeHandle:!1,firstPanelDiv:null,firstPanelFlexBasis:this.defaultFirstPanelFlexBasis}},watch:{defaultFirstPanelFlexBasis(s){this.firstPanelFlexBasis=s}},mounted(){this.firstPanelDiv=document.querySelector(`#firstPanelDiv${this.id}`),this.setFlexBasisFromStorage()},methods:{setFlexBasisFromStorage(){const s=window.localStorage.getItem(`ticketHistoryFlexBasis${this.id}`);if(this.firstPanelDiv)if(s){const t=parseFloat(s.replace("%","")),e=this.getClampValue(t,this.minimumFirstPanelPercentage,this.maximumFirstPanelPercentage);this.firstPanelFlexBasis=`${e}%`}else this.firstPanelFlexBasis=this.defaultFirstPanelFlexBasis},setFlexBasisToDefault(){this.firstPanelFlexBasis=this.defaultFirstPanelFlexBasis,window.localStorage.setItem(`ticketHistoryFlexBasis${this.id}`,this.firstPanelFlexBasis)},setFlexBasisToZero(){this.firstPanelFlexBasis="0%",window.localStorage.setItem(`ticketHistoryFlexBasis${this.id}`,this.firstPanelFlexBasis)},onMouseDownResizeHandle(){this.isMouseDownOnResizeHandle=!0,this.$el.addEventListener("mousemove",this.onMouseMoveResizeHandle),document.body.addEventListener("mouseup",this.onEndResize)},onMouseMoveResizeHandle(s){if(!this.isMouseDownOnResizeHandle)return;const t=this.isHorizontalSplit?this.firstPanelDiv.offsetTop:this.firstPanelDiv.offsetLeft,i=(this.isHorizontalSplit?s.clientY:s.clientX)-t,n=this.isHorizontalSplit?this.$el.offsetHeight:this.$el.offsetWidth,o=i/n*100,a=this.getClampValue(o,this.minimumFirstPanelPercentage,this.maximumFirstPanelPercentage);this.firstPanelFlexBasis=`${a}%`},getClampValue(s,t,e){return Math.min(Math.max(s,t),e)},onEndResize(){this.isMouseDownOnResizeHandle=!1,document.body.removeEventListener("mouseup",this.onEndResize),this.$el.removeEventListener("mousemove",this.onMouseMoveResizeHandle),window.localStorage.setItem(`ticketHistoryFlexBasis${this.id}`,this.firstPanelFlexBasis)}}},Mg=["id"],Pg=["id"];function Ig(s,t,e,i,n,o){return w(),D("div",{class:mt([...e.parentCss,"tw-flex"])},[g("div",{id:`firstPanelDiv${e.id}`,style:Bn({flexBasis:n.firstPanelFlexBasis}),class:mt([...e.firstPanelCss,`${n.isMouseDownOnResizeHandle?"tw-select-none":""}`])},[is(s.$slots,"firstPanelContent")],14,Mg),e.shouldHideResizeHandle?F("",!0):(w(),D("div",{key:0,id:`resize-handle${e.id}`,class:mt(["tw-relative tw-flex-shrink-0 tw-flex-grow-0 tw-border-x tw-border-earl-100 tw-text-center hover:tw-bg-dusk-500 hover-[&>i]:tw-text-white dark:tw-border-earl-600 dark:tw-bg-earl-800 dark:hover:tw-bg-dusk-200 dark:hover-[&>i]:tw-text-earl-900",...e.resizeHandleCss,`${n.isMouseDownOnResizeHandle?"tw-bg-dusk-500":""}`,e.isHorizontalSplit?"tw-h-3 tw-cursor-row-resize":"tw-w-3 tw-cursor-col-resize"]),onMousedown:t[0]||(t[0]=(...a)=>o.onMouseDownResizeHandle&&o.onMouseDownResizeHandle(...a))},[f(bt,{size:"small",class:mt(["tw-absolute tw-left-1/2 tw-top-1/2 tw--translate-x-1/2 tw--translate-y-1/2 tw-transform"]),"aria-hidden":"true"},{default:y(()=>[N(L(e.isHorizontalSplit?"mdi-drag-horizontal":"mdi-drag-vertical"),1)]),_:1})],42,Pg)),g("div",{class:mt([...e.secondPanelCss,`${n.isMouseDownOnResizeHandle?"tw-select-none":""}`])},[is(s.$slots,"secondPanelContent")],2)],2)}const hc=St($g,[["render",Ig]]);const je=Object.freeze({searching:1,merging:2,confirming:3}),Vg={components:{SpiceworksButton:ut},props:{isShowingDialog:{type:Boolean,default:!1},currentTicket:{type:Object,required:!0}},emits:["dialog-action","update:isShowingDialog"],data(){return{searchInput:"",filteredTickets:[],masterTicketIndex:-1,searchTimeoutId:null,isSearchInProgress:!1,ModalStateEnum:je,modalState:je.searching,isShowingDialogData:this.isShowingDialog}},computed:{masterTicketId(){var s;return(s=this.filteredTickets[this.masterTicketIndex])==null?void 0:s.id},masterTicket(){return this.filteredTickets[this.masterTicketIndex]},modalTitle(){return this.modalState===je.searching?"Choose ticket to merge with":this.modalState===je.confirming?"Are you sure you want to merge?":this.modalState===je.merging?"Merging tickets...":""}},watch:{searchInput(s){this.debouncedSearch(s)},isShowingDialog(s){this.isShowingDialogData=s},isShowingDialogData(s){this.$emit("update:isShowingDialog",s)}},created(){this.ticketsService=new ys},methods:{...He(["showSnackbar","getTickets"]),async merge(){try{this.modalState=je.merging,await this.ticketsService.mergeTickets(this.currentTicket.id,parseInt(this.masterTicketId)),this.showSnackbar({display:!0,message:"Tickets merged.",type:"success"}),this.$router.push({name:"Tickets",params:this.$route.params,query:{...this.$route.query,ticket_number:this.masterTicketId}}),this.getTickets()}catch{this.showSnackbar({display:!0,message:"Ticket merge failed. Please try again.",type:"error"})}finally{this.close()}},async debouncedSearch(s){s&&(this.isSearchInProgress=!0),clearTimeout(this.searchTimeoutId),this.searchTimeoutId=setTimeout(async()=>{s?this.search(s):(this.filteredTickets=[],this.isSearchInProgress=!1)},500)},async search(s){try{const t=await this.ticketsService.getTicketsList({q:s,filter:{status:{eq:"open"},organization_id:{eq:this.currentTicket.organizationId}},sort:"id-desc"});this.filteredTickets=t.tickets.filter(e=>e.id!==this.currentTicket.id)}catch{this.showSnackbar({display:!0,message:"Unable to return search results.",type:"error"})}finally{this.isSearchInProgress=!1}},close(){setTimeout(()=>{this.modalState=je.searching,this.filteredTickets=[],this.searchInput="",this.masterTicketIndex=-1,this.isSearchInProgress=!1},1e3),this.$emit("dialog-action",!1)},back(){this.modalState=je.searching,this.masterTicketIndex=-1},goToConfirmState(){this.modalState=je.confirming,clearTimeout(this.searchTimeoutId)}}},Yo=s=>(Pe("data-v-63c9ff7d"),s=s(),Ie(),s),Lg={class:"tw-flex tw-items-center"},Eg={class:"text-h5"},Rg={key:0},zg=Yo(()=>g("span",{class:"tw-pl-4 tw-text-earl-500"},"No matching results found.",-1)),Og=[zg],Fg={key:1},Bg={class:"tw-p-0"},Ug={class:"tw-max-w-xs tw-truncate tw-font-bold tw-text-earl-1000 dark:tw-text-earl-50"},Hg={class:"tw-text-earl-500 dark:tw-text-earl-50"},Ng={class:"tw-max-w-xs tw-truncate tw-text-earl-1000 dark:tw-text-earl-40"},jg={key:1},Wg={class:"tw-pb-2"},qg={class:"tw-max-w-xs tw-truncate tw-font-bold tw-text-earl-1000 dark:tw-text-earl-50"},Yg={class:"tw-text-earl-500 dark:tw-text-earl-40"},Kg={class:"tw-max-w-xs tw-truncate tw-text-earl-1000 dark:tw-text-earl-40"},Xg={class:"tw-flex tw-justify-center tw-py-3"},Gg={class:"tw-max-w-xs tw-truncate tw-font-bold tw-text-earl-1000 dark:tw-text-earl-50"},Zg={class:"tw-text-earl-500 dark:tw-text-earl-40"},Qg={class:"tw-max-w-xs tw-truncate tw-text-earl-1000 dark:tw-text-earl-40"},Jg={class:"tw-pb-2 tw-pt-3"},t0=Yo(()=>g("div",{class:"tw-pt-3 tw-font-bold"}," Merging tickets cannot be undone. Do you want to continue? ",-1)),e0=Yo(()=>g("hr",{class:"chd-hr--shadow"},null,-1)),s0={key:0,class:"tw-pl-4"};function i0(s,t,e,i,n,o){const a=_t("SpiceworksButton");return w(),M(Le,{justify:"center","no-gutters":""},{default:y(()=>[f(Ki,{modelValue:n.isShowingDialogData,"onUpdate:modelValue":t[5]||(t[5]=r=>n.isShowingDialogData=r),"content-class":"tw-text-earl-1000 tw-absolute tw-top-0",class:"chd-modal","max-width":"488px","onClick:outside":t[6]||(t[6]=r=>o.close()),onKeydown:t[7]||(t[7]=Je(r=>o.close(),["esc"]))},{default:y(()=>[f(pe,{variant:"elevated"},{default:y(()=>[f(ss,{class:"chd-modal-title"},{default:y(()=>[f(Le,{"no-gutters":""},{default:y(()=>[g("div",Lg,[n.modalState===n.ModalStateEnum.confirming?(w(),M(pt,{key:0,icon:"mdi-arrow-left","aria-label":"back",class:"tw--ml-3",onClick:t[0]||(t[0]=r=>o.back())})):F("",!0),g("span",Eg,L(o.modalTitle),1)]),f(fi),f(pt,{icon:"mdi-close-circle-outline","aria-label":"close",disabled:n.modalState===n.ModalStateEnum.merging,onClick:t[1]||(t[1]=r=>o.close())},null,8,["disabled"])]),_:1})]),_:1}),n.modalState===n.ModalStateEnum.searching?(w(),M(ce,{key:0,class:"chd-modal-text"},{default:y(()=>[f(kt,{modelValue:n.searchInput,"onUpdate:modelValue":t[2]||(t[2]=r=>n.searchInput=r),placeholder:"Search by ID, summary or description","append-inner-icon":"mdi-magnify",loading:n.isSearchInProgress},null,8,["modelValue","loading"]),f(Jt,{class:"tw-max-h-screen tw-overflow-y-auto"},{default:y(()=>[n.filteredTickets.length===0&&n.searchInput&&!n.isSearchInProgress?(w(),D("div",Rg,Og)):(w(),D("div",Fg,[(w(!0),D(ht,null,vt(n.filteredTickets,(r,l)=>(w(),M(ft,{key:r.id,class:"master-ticket-list__list-item tw-border-b tw-border-dashed tw-border-earl-200 tw-p-0",active:n.masterTicketIndex===l,onClick:c=>{n.masterTicketIndex=l,o.goToConfirmState()}},{default:y(()=>[g("div",Bg,[f(pe,{class:"tw-rounded-none",variant:"elevated"},{default:y(()=>[f(ce,{class:"chd-modal-text tw-pt-4"},{default:y(()=>[f(Le,{"no-gutters":""},{default:y(()=>[g("span",Ug,L(r.summary),1),f(fi),g("span",Hg,L(`#${r.id}`),1)]),_:2},1024),f(Le,{"no-gutters":""},{default:y(()=>[g("span",Ng,L(r.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)])]),_:2},1032,["active","onClick"]))),128))]))]),_:1})]),_:1})):n.modalState===n.ModalStateEnum.confirming?(w(),D("div",jg,[f(ce,{class:"chd-modal-text"},{default:y(()=>[g("div",Wg,[N(" Ticket "),g("b",null,L(`#${e.currentTicket.id}`),1),N(" will be merged into ticket "),g("b",null,L(`#${o.masterTicketId}`),1),N(". ")]),f(pe,{class:"tw-border tw-border-solid tw-border-earl-100 tw-bg-earl-50 tw-shadow-none dark:tw-bg-earl-900",variant:"elevated"},{default:y(()=>[f(ce,null,{default:y(()=>[f(Le,{"no-gutters":""},{default:y(()=>[g("span",qg,L(e.currentTicket.summary),1),f(fi),g("span",Yg,L(`#${e.currentTicket.id}`),1)]),_:1}),f(Le,{"no-gutters":""},{default:y(()=>[g("span",Kg,L(e.currentTicket.description),1)]),_:1})]),_:1})]),_:1}),g("div",Xg,[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-arrow-down")]),_:1})]),f(pe,{class:"tw-border tw-border-solid tw-border-earl-100 tw-shadow-none",varient:"elevated"},{default:y(()=>[f(ce,null,{default:y(()=>[f(Le,{"no-gutters":""},{default:y(()=>[g("span",Gg,L(o.masterTicket.summary),1),f(fi),g("span",Zg,L(`#${o.masterTicketId}`),1)]),_:1}),f(Le,{"no-gutters":""},{default:y(()=>[g("span",Qg,L(o.masterTicket.description),1)]),_:1})]),_:1})]),_:1}),g("div",Jg,[N(" Ticket "),g("b",null,L(`#${e.currentTicket.id}`),1),N(" will be merged into ticket "),g("b",null,L(`#${o.masterTicketId}`),1),N(" "+L(`Public responses, internal notes, time spent, and attachments will be kept from
              both tickets. New attributes will transfer over from ticket #${e.currentTicket.id}. The
              summary, description, tasks, and related devices from ticket #${e.currentTicket.id} will
              not transfer over.`),1)]),t0]),_:1}),e0,f(Tn,{class:"chd-modal-actions"},{default:y(()=>[f(fi),f(a,{text:"Cancel",onClick:t[3]||(t[3]=r=>o.close())}),f(a,{"button-type":"primary",text:"Merge tickets",onClick:t[4]||(t[4]=r=>o.merge())})]),_:1})])):n.modalState===n.ModalStateEnum.merging?(w(),M(ce,{key:2,class:"chd-modal-text"},{default:y(()=>[o.masterTicketId?(w(),D("span",s0,[N("Ticket "),g("b",null,L(`#${e.currentTicket.id}`),1),N(" will be merged into ticket "),g("b",null,L(`#${o.masterTicketId}`),1),N(". Please wait... ")])):F("",!0),f(Be,{class:"tw-mx-auto tw-mb-6 tw-mt-2 tw-block",color:"earl-600",indeterminate:""})]),_:1})):F("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})}const n0=St(Vg,[["render",i0],["__scopeId","data-v-63c9ff7d"]]),fc={__name:"SpiceworksOverflowMenuButton",props:{buttonType:{type:String,default:"default",validator:function(s){const t=["default","basic","primary","primary-ghost","inverted-ghost","brand"];return t.includes(s)||console.error(`SpiceworksOverflowMenuButton invalid prop: Expected 'buttonType' to be one of ${t.join(", ")}, but got '${s}'`),!0}}},setup(s){const t=s,{buttonColor:e,buttonVariant:i,buttonCss:n,iconCss:o}=Tu(t);return(a,r)=>(w(),M(pt,{color:h(e),density:"default",variant:h(i),class:mt([h(n),"tw-rounded-l-none tw-p-0"]),"aria-label":"overflow menu",width:"1.875rem","min-width":"1.875rem"},{default:y(()=>[f(bt,{size:"1.5rem",class:mt(h(o))},{default:y(()=>[N(" mdi-menu-down ")]),_:1},8,["class"])]),_:1},8,["color","variant","class"]))}},o0={key:0,class:"tw-flex-initial tw-border-b tw-border-earl-100 dark:tw-border-earl-600"},a0={class:"tw-flex tw-flex-row tw-justify-between tw-p-3 dark:tw-bg-earl-1200 dark:tw-text-earl-50"},r0={class:"tw-flex tw-min-w-0 tw-items-center"},l0={class:"tw-mr-2 tw-line-clamp-2 tw-text-sm tw-font-medium"},c0={class:"tw-ml-2 tw-flex tw-gap-2"},d0={class:"tw-flex tw-items-center"},u0={key:2,class:"chd-hr--shadow"},h0=g("span",null,"Show/hide ticket details",-1),f0=g("div",{class:"tw-text-medium tw-py-3 tw-text-earl-1000 dark:tw-text-earl-50"}," Are you sure you want to delete the ticket and all of its history, including public responses, internal notes, updates, and attachments? This cannot be undone. ",-1),p0={__name:"DesktopTicketHeader",setup(s){const t=xt(),{isShowingDeleteTicketDialog:e,deleteTicketAction:i,isShowingDeleteCommentDialog:n,softDeleteTicketCommentAction:o,isShowMergeDialog:a,mergeDialogAction:r,showMergeTicketDialog:l,onShowDeleteTicketDialog:c,ticketsLayout:d,currentTicket:u,desktopCloseTicketHistory:p,ticketAttributesExpanded:m,updateTicketHistory:b,setIsShowingSummaryAndDescriptionDialog:v,currentUser:_}=ci(),x=S(()=>t.getters.isCurrentUserTech),C=t.dispatch.bind(t,"setTicketAttributesExpanded"),T=()=>{C(!m.value)};return($,k)=>h(u)?(w(),D("div",o0,[g("div",a0,[g("div",r0,[h(d)===h(Dt).NoSplit?(w(),M(pt,{key:0,icon:"mdi-arrow-left","aria-label":"hide ticket panel",class:"tw-mr-2",onClick:h(p)},null,8,["onClick"])):F("",!0),g("div",l0,L(`#${h(u).id} ${h(u).summary}`),1),f(pt,{icon:"mdi-pencil-outline",size:"small","aria-label":"edit summary",onClick:k[0]||(k[0]=A=>h(v)(!0))})]),g("div",c0,[g("div",d0,[h(u).assignee?F("",!0):(w(),M(ut,{key:0,class:"tw-mr-2","button-type":"primary-ghost",text:"Accept",onClick:k[1]||(k[1]=Lt(A=>h(b)({assigneeId:h(_).id}),["stop"]))})),h(u).status==="waiting"?(w(),M(ut,{key:1,class:"tw-rounded-r-none",text:"Resume",onClick:k[2]||(k[2]=Lt(A=>h(b)({status:"open"}),["stop"]))})):F("",!0),h(u).status==="closed"?(w(),M(ut,{key:2,class:"tw-rounded-r-none",text:"Reopen",onClick:k[3]||(k[3]=Lt(A=>h(b)({status:"open"}),["stop"]))})):F("",!0),h(u).status==="open"?(w(),M(ut,{key:3,class:"tw-rounded-r-none tw-border-r-0",text:"Close",onClick:k[4]||(k[4]=Lt(A=>h(b)({status:"closed"}),["stop"]))})):F("",!0),f(ws,{attach:""},{activator:y(({props:A})=>[f(fc,Qs(Js(A)),null,16)]),default:y(()=>[f(Jt,{class:"tw-py-0 dark:tw-bg-earl-700"},{default:y(()=>[h(u).status==="waiting"?(w(),M(ft,{key:0,onClick:k[5]||(k[5]=A=>h(b)({status:"closed"}))},{default:y(()=>[f(Re,null,{default:y(()=>[N("Close")]),_:1})]),_:1})):F("",!0),h(u).status==="closed"||h(u).status==="open"?(w(),M(ft,{key:1,onClick:k[6]||(k[6]=A=>h(b)({status:"waiting"}))},{default:y(()=>[f(Re,null,{default:y(()=>[N("Wait for user")]),_:1})]),_:1})):F("",!0),f(ft,{onClick:h(l)},{default:y(()=>[f(Re,null,{default:y(()=>[N("Merge into another ticket")]),_:1})]),_:1},8,["onClick"]),x.value?F("",!0):(w(),D("hr",u0)),x.value?F("",!0):(w(),M(ft,{key:3,onClick:h(c)},{default:y(()=>[f(Re,null,{default:y(()=>[N("Delete ticket")]),_:1})]),_:1},8,["onClick"]))]),_:1})]),_:1})]),f(xe,null,{activator:y(({props:A})=>[f(pt,Ht(A,{icon:"mdi-information-outline",variant:h(m)?"tonal":"text",color:h(m)?"primary":"earl-700",location:"right","aria-label":"show or hide ticket details","aria-pressed":h(m),onClick:k[7]||(k[7]=P=>T())}),null,16,["variant","color","aria-pressed"])]),default:y(()=>[h0]),_:1}),h(d)!==h(Dt).NoSplit?(w(),M(pt,{key:0,icon:"mdi-close",location:"right","aria-label":"hide ticket panel",onClick:h(p)},null,8,["onClick"])):F("",!0)])]),f(Ue,{"is-showing-dialog":h(e),"onUpdate:isShowingDialog":k[8]||(k[8]=A=>Ct(e)?e.value=A:null),"confirm-text":"Delete ticket",title:"Delete ticket forever?",onDialogAction:h(i)},{default:y(()=>[f0]),_:1},8,["is-showing-dialog","onDialogAction"]),f(Ue,{"is-showing-dialog":h(n),"onUpdate:isShowingDialog":k[9]||(k[9]=A=>Ct(n)?n.value=A:null),title:"Delete comment forever?","confirm-text":"Delete",onDialogAction:h(o)},{default:y(()=>[N(" Are you sure you want to delete this comment and all included attachments? This cannot be undone. ")]),_:1},8,["is-showing-dialog","onDialogAction"]),f(n0,{"is-showing-dialog":h(a),"onUpdate:isShowingDialog":k[10]||(k[10]=A=>Ct(a)?a.value=A:null),"current-ticket":h(u),onDialogAction:h(r)},null,8,["is-showing-dialog","current-ticket","onDialogAction"])])):F("",!0)}},m0={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"17",fill:"none"},g0=g("path",{fill:"#434648","fill-rule":"evenodd",d:"M0 8a8 8 0 0 0 11.365 7.26l3.356.712c.864.184 1.416-.37 1.236-1.236l-.702-3.36A8 8 0 1 0 0 8m14.217 6.234-3.041-.65-.484.225a6.4 6.4 0 1 1 3.113-3.108l-.225.482z","clip-rule":"evenodd"},null,-1),w0=g("path",{fill:"#4D4D4D",d:"m7.992 10.619 1.818.956c.485.254.952-.085.86-.625l-.348-2.025c.004.02.01.002-.005.016l1.472-1.434c.392-.382.213-.932-.329-1.01L9.427 6.2c.02.003.005-.008.013.01l-.909-1.843c-.242-.49-.82-.491-1.062 0l-.91 1.843c.01-.018-.006-.007.014-.01l-2.033.295c-.542.08-.72.628-.329 1.01l1.472 1.435c-.015-.014-.009.004-.005-.016L5.33 10.95c-.092.54.375.88.86.625l1.818-.956c-.017.009.002.009-.016 0"},null,-1),v0=[g0,w0];function b0(s,t){return w(),D("svg",m0,[...v0])}const y0={render:b0},_0={xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",fill:"none"},k0=g("path",{fill:"#F6F7F8","fill-rule":"evenodd",d:"M.143 8a8 8 0 0 0 11.366 7.26l3.355.712c.864.184 1.416-.37 1.236-1.236l-.702-3.36A8 8 0 1 0 .143 8m14.217 6.234-3.041-.65-.484.225a6.4 6.4 0 1 1 3.113-3.108l-.225.482z","clip-rule":"evenodd"},null,-1),x0=g("path",{fill:"#F6F7F8",d:"m8.135 10.619 1.818.956c.485.254.953-.085.86-.625l-.347-2.025c.003.02.009.002-.005.016l1.47-1.434c.393-.382.215-.932-.328-1.01L9.57 6.2c.02.003.005-.008.014.01l-.91-1.843c-.242-.49-.82-.491-1.062 0l-.91 1.843c.01-.018-.006-.007.014-.01l-2.033.295c-.542.08-.72.628-.328 1.01l1.47 1.435c-.014-.014-.008.004-.004-.016l-.348 2.025c-.092.54.375.88.86.625l1.818-.956c-.017.009.002.009-.016 0"},null,-1),C0=[k0,x0];function S0(s,t){return w(),D("svg",_0,[...C0])}const T0={render:S0};const D0=s=>(Pe("data-v-9984e5d1"),s=s(),Ie(),s),A0={class:"canned-responses"},$0=D0(()=>g("span",null,"Add Canned Response",-1)),M0={class:"tw-flex"},P0={key:1,class:"chd-hr--shadow"},I0={key:0,class:"canned-responses__entry canned-responses__entry-no-results"},V0={__name:"CannedResponsesMenu",emits:["add-canned-response-to-comment"],setup(s,{emit:t}){const{mobile:e}=Eo(),i=I([]),{filterInput:n,filteredList:o}=nc(i),a=xt(),r=new su,l=I(!1),c=I(!1),d=I(!1),u={persistent:!0,scrollable:!0,fullscreen:!0},{isDarkMode:p}=Zi(),m=S(()=>i.value.length>0),b=t;lt(c,$=>{$||(n.value=null)}),re(v);async function v(){try{l.value=!0;const $=await r.getAllCannedResponses();i.value=$.cannedResponses,o.value=i.value}catch($){a.dispatch("showSnackbar",{display:!0,message:$,type:"error"})}finally{l.value=!1}}function _(){v(),a.dispatch("showSnackbar",{display:!0,message:"New canned response created.",type:"success"})}function x($){c.value=!1,b("add-canned-response-to-comment",$.body),n.value=null}function C(){window.location.href="/settings/canned-responses"}function T(){d.value=!0,e.value||(c.value=!1)}return($,k)=>(w(),D("div",A0,[(w(),M(hl(h(e)&&m.value?h(Ki):h(ws)),Ht(h(e)&&m.value?u:{},{modelValue:c.value,"onUpdate:modelValue":k[4]||(k[4]=A=>c.value=A)}),{activator:y(({props:A})=>[f(xe,{disabled:h(e),location:"top"},{activator:y(({props:P})=>[f(pt,Ht({icon:"",class:"tw-mr-2","aria-label":"Add Canned Response"},{...A,...P}),{default:y(()=>[h(p)?(w(),M(h(T0),{key:1})):(w(),M(h(y0),{key:0}))]),_:2},1040)]),default:y(()=>[$0]),_:2},1032,["disabled"])]),default:y(()=>[f(pe,{class:"tw-border-none lg:tw-w-72",variant:"elevated"},{default:y(()=>[m.value?(w(),M(ss,{key:0,id:"search-container"},{default:y(()=>[g("div",M0,[g("div",{class:"tw-mr-4 tw-cursor-pointer lg:tw-hidden",onClick:k[0]||(k[0]=A=>c.value=!1)},[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-arrow-left")]),_:1})]),f(kt,{id:"search-field",modelValue:h(n),"onUpdate:modelValue":k[1]||(k[1]=A=>Ct(n)?n.value=A:null),placeholder:"Search canned responses...","hide-details":"",clearable:"",class:"tw-font-normal",onClick:k[2]||(k[2]=Lt(()=>{},["stop"])),onKeydown:k[3]||(k[3]=Je(Lt(()=>{},["prevent"]),["enter"]))},null,8,["modelValue"])])]),_:1})):F("",!0),m.value?(w(),D("hr",P0)):F("",!0),f(ce,{class:"tw-px-0 tw-py-2"},{default:y(()=>[l.value?(w(),M(de,{key:0,class:"lg:tw-h-40"})):m.value?(w(),M(Jt,{key:1,id:"items-list",class:"lg:tw-h-40 lg:tw-overflow-y-auto"},{default:y(()=>[h(n)&&h(o).length===0?(w(),D("div",I0," No matching results found. ")):F("",!0),(w(!0),D(ht,null,vt(h(o),A=>(w(),M(ft,{key:A.id,class:"canned-responses__entry",onClick:P=>x(A)},{default:y(()=>[f(Re,{class:"tw-text-sm tw-font-normal"},{default:y(()=>[N(L(A.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):F("",!0),m.value?(w(),M(vs,{key:2,id:"separator-line",class:"tw-mx-3 lg:tw-mx-4 lg:tw-my-1"})):F("",!0),f(Jt,null,{default:y(()=>[f(ft,{id:"add-new-canned-response",class:"canned-responses__entry tw-text-sm",onClick:T},{default:y(()=>[N(" Add new canned response... ")]),_:1}),m.value?(w(),M(ft,{key:0,id:"edit-canned-responses",class:"canned-responses__entry tw-hidden lg:tw-flex",onClick:C},{default:y(()=>[N(" Edit canned responses... ")]),_:1})):F("",!0)]),_:1})]),_:1})]),_:1})]),_:1},16,["modelValue"])),f(iu,{id:"addCannedResponseModal",modelValue:d.value,"onUpdate:modelValue":k[5]||(k[5]=A=>d.value=A),onCannedResponseCreated:_},null,8,["modelValue"])]))}},pc=St(V0,[["__scopeId","data-v-9984e5d1"]]);function mc(s,t){const e=new ys,i=I(""),n=I(!0),o=I(!1),a=xt(),{currentTicket:r,updateTicketHistory:l}=ci(),c=S(()=>a.state.ticketComments),d=a.dispatch.bind(a,"showSnackbar"),u=I([]),{uploadingAttachment:p,removeAttachment:m,uploadAttachment:b,resetAttachments:v}=Xi(u),_=ms({comment:{required:zi(()=>i.value.trim().length===0),maxLength:gs(1e5)}},{comment:i}),x=S(()=>{const B=[];if(!_.value||!_.value.comment.$dirty)return B;const U=n.value?"response":"internal note";return u.value.length===0&&_.value.comment.required.$invalid?B.push(`The ${U} can't be empty.`):_.value.comment.maxLength.$invalid&&B.push(`The ${U} should be less than 100,000 characters.`),B}),C=()=>_.value.comment.$touch(),T=S(()=>n.value?"":"internal-note-bg"),$=S(()=>n.value?"Type a public response...":"Type a note just for your team..."),k=S(()=>{var B;return i.value||((B=u.value)==null?void 0:B.length)>0}),A=S(()=>u.value.length===0&&_.value.comment.$invalid||o.value||p.value),P=()=>{_.value.$reset(),o.value=!1,v()},z=async B=>{if(_.value.$touch(),!(x.value.length>0||o.value))try{o.value=!0;const U=n.value?"comment":"note",H=await e.submitTicketComment(r.value.id,{ticketComment:{activityType:U,body:i.value,initialUploadIds:Array.from(u.value,J=>J.signedId)}});if(H!=null&&H.comment)c.value.push(H.comment),B&&["closed","open","waiting"].includes(B)&&l({status:B}),s.value.reset(),d({display:!0,message:`${U.charAt(0).toUpperCase()+U.slice(1)} added successfully.`,type:"success"});else throw`${U.charAt(0).toUpperCase()+U.slice(1)} submit failed... Please try again.`}catch(U){throw d({display:!0,message:"An error occurred while submitting your comment. Please try again.",type:"error"}),U}finally{P()}},j=B=>{var U;((U=i.value)==null?void 0:U.length)>0?(i.value+=" ",i.value+=B):i.value=B,ps(()=>{t.value.focus()})},V=S(()=>n.value?"Public response":"Internal note"),O=S(()=>n.value?"Internal note":"Public response");return{submitComment:z,commentErrors:x,commentValidation:C,commentPlaceholder:$,commentBackgroundColor:T,isCommentSubmitDisabled:A,comment:i,isPublic:n,form:s,attachments:u,removeAttachment:m,uploadAttachment:b,onAddCannedResponseToComment:j,commentType:V,commentTypeAlternative:O,isNewComment:k,isSubmittingComment:o,uploadingAttachment:p,currentTicket:r}}const L0={class:"tw-flex tw-flex-row tw-justify-between"},E0={class:"tw-flex tw-items-center"},R0=["title"],z0={class:"tw-flex tw-items-center tw-justify-between tw-gap-px"},O0=g("span",{class:"tw-font-medium"},"Send and reopen ticket",-1),F0=g("span",{class:"tw-font-medium"},"Send and close ticket",-1),B0={__name:"DesktopCommentEntryForm",setup(s){const t=I(null),e=I(null),{submitComment:i,commentErrors:n,commentValidation:o,commentPlaceholder:a,commentBackgroundColor:r,isCommentSubmitDisabled:l,comment:c,isPublic:d,attachments:u,uploadAttachment:p,removeAttachment:m,onAddCannedResponseToComment:b,commentType:v,commentTypeAlternative:_,currentTicket:x}=mc(t,e);return(C,T)=>(w(),M(Du,{class:"comments-container tw-relative tw-z-20 dark:tw-bg-earl-900"},{default:y(()=>[f(Gi,{"pending-attachments":h(u),class:"tw-px-4",onAttachmentRemoved:h(m)},null,8,["pending-attachments","onAttachmentRemoved"]),f(jn,{ref_key:"form",ref:t,class:"tw-flex tw-flex-col tw-items-stretch tw-px-4",onClick:T[4]||(T[4]=Lt(()=>{},["stop"])),onSubmit:T[5]||(T[5]=Lt(()=>{},["prevent"]))},{default:y(()=>[f(oe,{ref_key:"commentTextarea",ref:e,modelValue:h(c),"onUpdate:modelValue":T[0]||(T[0]=$=>Ct(c)?c.value=$:null),"error-messages":h(n),placeholder:h(a),class:mt(h(r)),"bg-color":h(r),"auto-grow":"",rows:"1",onKeydown:h(o)},null,8,["modelValue","error-messages","placeholder","class","bg-color","onKeydown"]),g("div",L0,[g("div",E0,[f(ws,{attach:"",location:"top"},{activator:y(({props:$})=>[g("button",Ht({class:"tw-align-items tw-flex tw-cursor-pointer tw-font-medium tw-text-earl-1000 focus:tw-outline-none dark:tw-text-earl-50"},$),[g("span",{class:"tw-line-clamp-1",title:h(v)},L(h(v)),9,R0),f(bt,null,{default:y(()=>[N("mdi-menu-down")]),_:1})],16)]),default:y(()=>[f(Jt,{class:"tw-py-0"},{default:y(()=>[f(ft,{class:"tw-cursor-pointer tw-font-medium tw-text-earl-1000 dark:tw-text-earl-50",onClick:T[1]||(T[1]=$=>d.value=!h(d))},{default:y(()=>[f(Re,null,{default:y(()=>[N(L(h(_)),1)]),_:1})]),_:1})]),_:1})]),_:1}),f(Oo,{onUploadAttachment:h(p)},null,8,["onUploadAttachment"]),f(pc,{onAddCannedResponseToComment:h(b)},null,8,["onAddCannedResponseToComment"])]),g("div",z0,[f(ut,{"button-type":"primary",text:"Send",size:"small",class:"tw-rounded-r-none",disabled:h(l),onClick:Lt(h(i),["stop"])},null,8,["disabled","onClick"]),f(ws,{attach:"",location:"top right"},{activator:y(({props:$})=>[f(fc,Ht({"button-type":"primary",size:"small",disabled:h(l)},$),null,16,["disabled"])]),default:y(()=>[f(Jt,{class:"tw-py-0"},{default:y(()=>[h(x).status==="closed"?(w(),M(ft,{key:0,onClick:T[2]||(T[2]=$=>h(i)("open"))},{default:y(()=>[O0]),_:1})):(w(),M(ft,{key:1,onClick:T[3]||(T[3]=$=>h(i)("closed"))},{default:y(()=>[F0]),_:1}))]),_:1})]),_:1})])])]),_:1},512)]),_:1}))}};const U0={class:"tw-flex tw-w-full tw-flex-col"},H0={key:1},N0={key:3,class:"tw-mt-16 tw-w-full tw-px-2.5 tw-py-4 tw-text-center print:tw-hidden"},j0={class:"tw-text-xl tw-font-medium dark:tw-text-earl-50"},W0={class:"tw-text-xl tw-font-medium dark:tw-text-earl-50"},q0={class:"tw-mt-2.5"},Y0={__name:"DesktopTicketHistory",props:{ariaHidden:{type:Boolean,default:!1}},setup(s){const t=xt(),{ticketAttributesExpanded:e,isCurrentTicketFullyLoaded:i,currentTicket:n,ticketFailureLineOne:o,ticketFailureLineTwo:a,desktopCloseTicketHistory:r,isUpdating:l,updateTicketHistory:c,activeAlerts:d,isShowingDescriptionQuickScroll:u,areActivitiesAndCommentsLoading:p,ticketActivityEntries:m,isShowingLatestActivityQuickScroll:b,loadTicketData:v,isComment:_,ticketHistoryElem:x,scrollBottom:C,scrollToTop:T,onShowDeleteTicketCommentDialog:$,onShowDeleteTicketCommentAttachmentDialog:k,ticketsLayout:A,setIsShowingSummaryAndDescriptionDialog:P,isShowingDeleteTicketCommentAttachmentDialog:z,deleteTicketCommentAttachmentAction:j,ticketNumber:V,comment:O,clearLivePollDataForTicket:B}=ci(),U=I(null),H=I(null),J=S(()=>t.state.descriptionPinned),K=()=>{var ot;if((ot=H.value)!=null&&ot.isFullEntryBodyShown&&x.value&&J.value){const et=H.value.$el,ct=parseFloat(getComputedStyle(et).lineHeight);et.clientHeight-x.value.scrollTop<=5*ct&&(H.value.isFullEntryBodyShown=!1)}};re(v),Po(()=>{x.value&&x.value.removeEventListener("scroll",K)}),lt(x,(ot,et)=>{ot&&ot.addEventListener("scroll",K),et&&et.removeEventListener("scroll",K)}),lt(()=>t.state.ticketsLayout,()=>{U.value&&U.value.setFlexBasisToDefault()}),lt(V,(ot,et)=>{ot!==et&&(B(parseInt(ot)),O.value="",v())});const G=()=>{const ot=document.getElementById("alerts-expansion-panel").offsetTop;document.getElementById("ticket-attributes-container").scrollTop=ot};return(ot,et)=>(w(),D("div",U0,[h(n)?(w(),M(gg,{key:0,class:"tw-hidden print:tw-absolute print:tw-left-0 print:tw-top-0 print:tw-block print:tw-w-full"})):F("",!0),h(n)?(w(),D(ht,{key:1},[f(p0,{class:"print:tw-hidden"}),g("div",{class:mt(["tw-flex tw-flex-auto tw-flex-col tw-overflow-auto print:tw-hidden",h(A)===h(Dt).VerticalSplit?"xl:tw-flex-row":"lg:tw-flex-row"])},[f(cc,{ticket:h(n),"is-updating":h(l),onUpdateTicketHistory:h(c)},null,8,["ticket","is-updating","onUpdateTicketHistory"]),f(hc,{id:"ticketHistoryResizablePanels",ref_key:"resizablePanels",ref:U,"parent-css":["tw-w-full"],"first-panel-css":["tw-flex-shrink-0 tw-flex-col tw-overflow-auto dark:tw-bg-earl-1200",h(A)===h(Dt).VerticalSplit?"xl:tw-flex":"lg:tw-flex",h(e)?"tw-hidden":"tw-flex tw-basis-full"],"second-panel-css":["tw-w-full tw-flex-grow tw-overflow-auto tw-transition-none tw-duration-100 tw-ease-in-out dark:tw-border-none dark:tw-bg-earl-1200",h(e)?"tw-border-l tw-border-earl-100":"",{"lg:tw-transition-all":h(e)&&h(A)===h(Dt).HorizontalSplit,"xl:tw-transition-all":h(e)&&h(A)===h(Dt).VerticalSplit}],"resize-handle-css":["tw-hidden",h(e)&&h(A)===h(Dt).VerticalSplit?"xl:tw-block":"",h(e)&&h(A)!==h(Dt).VerticalSplit?"lg:tw-block":""],"default-first-panel-flex-basis":"70%","minimum-first-panel-percentage":h(A)===h(Dt).VerticalSplit?25:15,"maximum-first-panel-percentage":h(A)===h(Dt).VerticalSplit?75:85},{firstPanelContent:y(()=>[h(d).length>0?(w(),M(kl,{key:0,type:"warning",message:`${h(d)[0].message}.`,"link-message":`${h(d).length>1?`${h(d).length-1} more alerts.`:""}`,dismissible:!0,class:"tw-mb-0 tw-flex-none",onLinkClicked:G},null,8,["message","link-message"])):F("",!0),f($n,{class:mt(!h(u)&&"tw-hidden"),"is-up":!0,onScroll:et[0]||(et[0]=ct=>h(T)())},null,8,["class"]),g("div",{ref_key:"ticketHistoryElem",ref:x,class:"tw-flex-auto tw-overflow-y-auto tw-px-4 dark:tw-bg-earl-1200"},[f(Dn,{ref_key:"ticketDescriptionEntry",ref:H,entry:h(n),class:"tw-bg-white dark:tw-bg-earl-1200 dark:tw-text-earl-50",onEditButtonClicked:et[1]||(et[1]=ct=>h(P)(!0)),onScrollToTop:h(T)},null,8,["entry","onScrollToTop"]),h(p)?(w(),M(de,{key:0,class:"tw-my-auto tw-h-full tw-w-full"})):(w(),D("div",H0,[(w(!0),D(ht,null,vt(h(m),(ct,it)=>(w(),D("div",{key:`${ct.id}-${ct.activityType}`},[h(_)(ct)?(w(),M(Dn,{key:0,entry:ct,onShowTicketCommentDeleteModal:h($),onShowTicketCommentAttachmentDeleteModal:h(k),"onUpdate:entryBody":W=>ct.body=W,"onUpdate:entryPreviousBody":W=>ct.previousBody=W,"onUpdate:entryFiles":W=>ct.files=W},null,8,["entry","onShowTicketCommentDeleteModal","onShowTicketCommentAttachmentDeleteModal","onUpdate:entryBody","onUpdate:entryPreviousBody","onUpdate:entryFiles"])):(w(),M(dc,{key:1,entry:ct,prev:h(m)[it-1],next:h(m)[it+1]},null,8,["entry","prev","next"]))]))),128))]))],512),f($n,{class:mt(["tw-bottom-10",{"tw-hidden":!h(b)}]),"is-up":!1,onScroll:et[2]||(et[2]=ct=>h(C)())},null,8,["class"]),f(B0)]),secondPanelContent:y(()=>[f(M1,{"aria-hidden":!h(e),onUpdateTicketHistory:h(c),onLoadTicketData:h(v)},null,8,["aria-hidden","onUpdateTicketHistory","onLoadTicketData"])]),_:1},8,["first-panel-css","second-panel-css","resize-handle-css","minimum-first-panel-percentage","maximum-first-panel-percentage"])],2)],64)):h(i)?(w(),D("div",N0,[g("div",j0,L(h(o)),1),g("div",W0,L(h(a)),1),g("div",q0,[h(A)===h(Dt).NoSplit?(w(),M(ut,{key:0,"button-type":"primary",text:"Take me to the Tickets page",onClick:Lt(h(r),["stop"])},null,8,["onClick"])):F("",!0)])])):(w(),M(de,{key:2,class:"tw-my-auto tw-h-full tw-w-full print:tw-hidden"})),f(Ue,{"is-showing-dialog":h(z),"onUpdate:isShowingDialog":et[3]||(et[3]=ct=>Ct(z)?z.value=ct:null),title:"Delete attachments?","confirm-text":"Edit and delete",onDialogAction:h(j)},{default:y(()=>[N(" Are you sure you want to delete comment attachments as part of this edit? This cannot be undone. ")]),_:1},8,["is-showing-dialog","onDialogAction"])]))}},K0=St(Y0,[["__scopeId","data-v-30c312de"]]),X0={class:"tw-flex tw-flex-auto tw-flex-col tw-overflow-y-auto"},G0={__name:"DesktopTickets",setup(s){const t=xt(),e=Lo(),i=I(null),n=S(()=>t.state.ticketAttributesExpanded),o=S(()=>t.state.ticketsLayout),a=S(()=>t.getters.currentUser),r=S(()=>t.state.currentTicket),l=S(()=>o.value!==Dt.NoSplit||!r.value),c=S(()=>r.value&&o.value!==Dt.NoSplit);lt(o,async p=>{await ps(),p===Dt.NoSplit?i.value.setFlexBasisToZero():i.value.setFlexBasisToDefault()}),re(()=>{u(a.value.colorTheme)});function d(p){e.global.name.value=p.matches?"darkTheme":"lightTheme"}function u(p){if(p=="system_settings"){const m=window.matchMedia("(prefers-color-scheme: dark)");window.matchMedia&&m&&(m.addListener(d),d(m))}else e.global.name.value=p=="dark"?"darkTheme":"lightTheme"}return(p,m)=>(w(),D("section",X0,[l.value?(w(),M(Hp,{key:0,class:"print:tw-hidden"})):F("",!0),f(hc,{id:"ticketsResizablePanels",ref_key:"desktopTicketsPanels",ref:i,"parent-css":["tw-flex-auto tw-overflow-y-auto",{"tw-flex-col":o.value===h(Dt).HorizontalSplit}],"first-panel-css":["tw-flex tw-min-w-0 tw-overflow-y-auto print:tw-hidden",r.value?"tw-flex-shrink-0":"tw-flex-1"],"resize-handle-css":["tw-block print:tw-hidden"],"second-panel-css":["tw-z-10 tw-flex tw-min-w-0 tw-overflow-auto tw-border-earl-100 dark:tw-border-t-1 dark:tw-border-earl-600",r.value?"tw-transition-all tw-w-full tw-flex-grow":"tw-flex-hidden tw-transition-none",o.value===h(Dt).VerticalSplit?"tw-flex-1":"tw-flex-2",{"xl:tw-flex-2":n.value&&r.value,"tw-duration-100 tw-ease-in-out":o.value!==h(Dt).NoSplit,"tw-border-l tw-shadow-pane-divider":o.value===h(Dt).VerticalSplit&&r.value,"tw-border-t tw-shadow-pane-divider":o.value===h(Dt).HorizontalSplit&&r.value}],"default-first-panel-flex-basis":o.value===h(Dt).NoSplit?"0%":"30%","minimum-first-panel-percentage":o.value===h(Dt).VerticalSplit?3:o.value===h(Dt).HorizontalSplit?5:0,"maximum-first-panel-percentage":70,"should-hide-resize-handle":!c.value,"is-horizontal-split":o.value===h(Dt).HorizontalSplit},{firstPanelContent:y(()=>[l.value?(w(),M(Vf,{key:0})):F("",!0)]),secondPanelContent:y(()=>[f(K0,{"aria-hidden":!r.value},null,8,["aria-hidden"])]),_:1},8,["parent-css","first-panel-css","second-panel-css","default-first-panel-flex-basis","minimum-first-panel-percentage","should-hide-resize-handle","is-horizontal-split"]),l.value?(w(),M(Ns,{key:1,class:"print:tw-hidden"})):F("",!0)]))}},Z0={__name:"TicketsCommon",setup(s){const t=xt(),{isMobile:e}=vl(),i=ye(),n=me(),o=S(()=>t.state.ticketViews),a=()=>t.dispatch("setCurrentTicketView"),r=()=>t.dispatch("getTickets",e.value);let l=null;lt(()=>i.fullPath,async()=>{if(l&&i.params.view===l.view&&i.params.page===l.page&&i.query.sort===l.sort&&i.query.q===l.q){l={view:i.params.view,page:i.params.page,sort:i.query.sort,q:i.query.q};return}(o.value.length===0||i.params.view!==(l&&l.view))&&await a(),d()?await r():u(),l={view:i.params.view,page:i.params.page,sort:i.query.sort,q:i.query.q}},{immediate:!0});const d=()=>i.params.view&&o.value.some(p=>p.name_path===i.params.view),u=()=>{const{params:p,query:m}=i;n.replace({name:"Tickets",params:{page:p.page||"1",view:"open"},query:{sort:m.sort||window.localStorage.getItem("ticketsSort")||"updated_at-desc",q:m.q,ticket_number:m.ticket_number}})};return(p,m)=>h(e)?(w(),M(Wh,{key:0})):(w(),M(G0,{key:1}))}};const Q0={class:"tw-flex tw-gap-2"},J0={__name:"SearchableDropdown",props:Ei({errorMessages:{type:Array,default:null},options:{type:Array,default:()=>[]},label:{type:String,required:!0},searchLabel:{type:String,default:"Search"},optionText:{type:String,required:!0},optionValue:{type:String,required:!0},singleSelect:{type:Boolean,default:!0},hideDetails:{type:Boolean,default:!1},returnObject:{type:Boolean,default:!1},actionText:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:Ei(["update:modelValue","search-action"],["update:modelValue"]),setup(s,{emit:t}){var $;const e=s,i=Ro(s,"modelValue"),{smAndDown:n}=Eo(),o=xt(),a=t,r=k=>{if(k instanceof Object&&Object.prototype.hasOwnProperty.call(k,"uid"))return e.options.find(A=>A.uid===k.uid);if(k instanceof Object&&Object.prototype.hasOwnProperty.call(k,"type")&&Object.prototype.hasOwnProperty.call(k,"id")){const A=`${k.type}.${k.id}`;return e.options.find(P=>P.uid===A||P.id===k.id)}return e.options.find(A=>A[e.optionValue]===k)},l=k=>{const A=r(k);return A?A[e.optionValue]||A.uid:null},c=k=>{const A=r(k);return A?A[e.optionText]:""},d=I(e.singleSelect?[l(i.value)]:(($=i.value)==null?void 0:$.map(k=>k[e.optionValue]))||[]),u=I(""),p=I(!1),m=I(e.singleSelect?c(i.value):""),b=S(()=>e.options.filter(k=>k[e.optionText].toLowerCase().includes(u.value?u.value.toLowerCase():"")));lt(()=>i,k=>{!e.singleSelect&&k instanceof Array&&(d.value=k.map(A=>A[e.optionValue]))}),lt(()=>e.options,()=>{var k;e.singleSelect?(m.value=c(i.value)||"",d.value=[l(i.value)]):d.value=((k=i.value)==null?void 0:k.map(A=>A[e.optionValue]))||[]},{immediate:!0});const v=()=>{if(!e.singleSelect){const k=[];d.value.forEach(A=>k.push(e.options.find(P=>P[e.optionValue]==A))),a("update:modelValue",k)}u.value="",p.value=!1},_=()=>{if(!e.singleSelect)return;const k=e.label==="Contact";d.value.length>1&&d.value.shift(),k&&d.value.length===0?(o.dispatch("showSnackbar",{display:!0,message:"Contact cannot be empty.",type:"warning"}),d.value=[l(i.value)]):x(),u.value="",p.value=!1},x=()=>{const k=e.options.find(A=>A[e.optionValue]==d.value[0]||A.uid==d.value[0]);k&&Object.prototype.hasOwnProperty.call(k,e.optionText)&&(m.value=k[e.optionText],e.returnObject?C(k):C(k[e.optionValue]))},C=k=>{a("update:modelValue",k)},T=()=>{e.actionText&&b.value.length===0&&a("search-action",u.value)};return(k,A)=>(w(),D("div",null,[f(Ki,{modelValue:p.value,"onUpdate:modelValue":A[3]||(A[3]=P=>p.value=P),persistent:"",scrollable:"",class:"chd-modal",fullscreen:h(n),"max-width":"600px"},{activator:y(({props:P})=>[f(kt,Ht({modelValue:m.value,"onUpdate:modelValue":A[0]||(A[0]=z=>m.value=z)},P,{"error-messages":s.errorMessages,"hide-details":s.hideDetails,label:s.label,readonly:""}),null,16,["modelValue","error-messages","hide-details","label"])]),default:y(()=>[f(pe,{class:"chd-searchable-dropdown",variant:"elevated"},{default:y(()=>[f(ss,null,{default:y(()=>[g("div",Q0,[f(pt,{icon:"mdi-arrow-left",onClick:v}),f(kt,{modelValue:u.value,"onUpdate:modelValue":A[1]||(A[1]=P=>u.value=P),label:s.searchLabel,clearable:"",class:"searchable-dropdown__input",onKeyup:Je(T,["enter"])},null,8,["modelValue","label"])])]),_:1}),f(vs),f(ce,null,{default:y(()=>[(w(!0),D(ht,null,vt(b.value,P=>(w(),M(Hn,{key:P[s.optionValue]||P.uid,modelValue:d.value,"onUpdate:modelValue":[A[2]||(A[2]=z=>d.value=z),_],label:P[s.optionText],value:P[s.optionValue]||P.uid,class:"searchable-dropdown__checkbox"},null,8,["modelValue","label","value"]))),128))]),_:1}),s.actionText?(w(),M(Tn,{key:0,class:"tw-text-sm tw-text-earl-500"},{default:y(()=>[N(L(s.actionText),1)]),_:1})):F("",!0)]),_:1})]),_:1},8,["modelValue","fullscreen"])]))}},$i=St(J0,[["__scopeId","data-v-361c2579"]]);const tw={class:"chd-native-dropdown"},ew={class:"floating-label"},sw=["value"],Qe={__name:"NativeDropdown",props:Ei({options:{type:Array,default:()=>[]},label:{type:String,required:!0},optionText:{type:String,default:null},optionValue:{type:String,default:null},errorMessages:{type:Array,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const t=s,e=Ro(s,"modelValue"),i=S(()=>t.optionValue?t.options.find(n=>n[t.optionValue]==e.value):t.options.find(n=>n==e.value));return(n,o)=>(w(),D("div",tw,[g("div",ew,[Ft(g("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>e.value=a),class:mt(["floating-select",[i.value?"floating-select--valid":"",s.errorMessages.length===0?"":"error-text"]])},[(w(!0),D(ht,null,vt(s.options,a=>(w(),D("option",{key:s.optionValue?a[s.optionValue]:a,value:s.optionValue?a[s.optionValue]:a},L(s.optionText?a[s.optionText]:a),9,sw))),128))],2),[[si,e.value]]),g("label",{class:mt(s.errorMessages.length===0?"":"error-text")},L(s.label),3)])]))}};const iw={class:"header tw-flex tw-items-center tw-justify-start tw-gap-4 tw-px-4 tw-py-3"},nw={class:"tw-truncate tw-break-words tw-text-lg"},ow={key:0},aw={key:1},rw={class:"tw-ml-auto tw-flex-none tw-font-normal"},lw={class:"tw-flex tw-items-center tw-justify-between tw-text-sm"},cw=g("div",null,[g("div",{class:"tw-cursor-pointer tw-text-sm tw-underline"},"More Attributes...")],-1),dw={key:1},uw={key:0},hw={key:1},fw={key:2},pw={key:3},mw={key:4},gw={key:5},ww=g("div",{class:"tw-py-0"},[g("div",{class:"tw-cursor-pointer tw-text-sm tw-underline"},"Less Attributes...")],-1),vw={class:"tw-ml-auto tw-flex-none tw-font-normal"},bw={class:"tw-ml-auto tw-flex-none tw-font-normal"},yw={key:1},_w={class:"tw-truncate"},kw={key:1},xw={class:"tw-mt-17 tw-w-full tw-px-5 tw-py-6"},Cw={class:"bottom"},Sw={__name:"MobileTicketAttributes",emits:["load-ticket-data","update-ticket-history","getActivities","showSnackbar"],setup(s,{expose:t,emit:e}){const i=e,{ticket:n,showCustomDatePicker:o,updateTicketAttributes:a,initializeData:r,showCustomTimeTracking:l,activeAlerts:c,panels:d,showMoreAttributes:u,ticketAccessibleOrganizations:p,usersForCurrentOrganization:m,customValues:b,createEndUserHandler:v,assignees:_,statuses:x,priorities:C,clearDueDate:T,dueDate:$,updateDateTime:k,showDueDatePicker:A,ticketCategoriesForCurrentOrg:P,taskProgress:z,timeTrackingOptions:j,timeTrackingDisabledButton:V,timeTrackingLabel:O,timeTracking:B,watchers:U,updateTimeTracking:H,removeWatcher:J,shouldDisableSaveCustomTimeButton:K,users:G,saveCustomTimeTracking:ot,v$:et,updateText:ct,clearCustomAttrDate:it,customDatePickerDates:W,handleUpdateCustomAttrDate:wt,customTimeTrackingErrors:at,updateAttributeFromDropdown:rt,getPhoneErrorMessage:E}=Wo(i),{formatDate:q}=Ne(),Z=I(!1),Pt=I(!1),Gt=S(()=>{const Q=window.innerWidth;return Z.value?Q:"0"});re(()=>{r()});const te=()=>{l.value?l.value=!1:Z.value=!1};return t({showAttributesMenu:()=>{Z.value=!0}}),(Q,X)=>(w(),D("div",null,[h(n)?(w(),M(nu,{key:0,modelValue:Z.value,"onUpdate:modelValue":X[23]||(X[23]=R=>Z.value=R),temporary:"",scrim:!1,location:"right",width:Gt.value,class:"ticket-attributes tw-z-20 tw-pb-4",onTransitionend:X[24]||(X[24]=R=>Pt.value=!0)},{default:y(()=>[g("div",iw,[f(pt,{icon:"mdi-arrow-left",onClick:te}),g("div",nw,[h(l)?(w(),D("span",ow,"Add time spent")):(w(),D("span",aw,L(`#${h(n).id} ${h(n).summary}`),1))])]),h(l)?(w(),D("div",kw,[g("div",xw,[f(kt,{modelValue:h(B).time,"onUpdate:modelValue":X[19]||(X[19]=R=>h(B).time=R),label:"Time spent",placeholder:"e.g. -16m or 2h 21m",hint:"Use a dash - to remove time.","error-messages":h(at),onBlur:h(et).$touch,onFocus:h(et).time.$reset},null,8,["modelValue","error-messages","onBlur","onFocus"]),f(Is,{modelValue:h(B).assignee,"onUpdate:modelValue":X[20]||(X[20]=R=>h(B).assignee=R),users:h(G),"item-text":"name","item-value":"id",label:"Admin or tech","custom-class":"tw-z-30 tw-mt-3"},null,8,["modelValue","users"]),f(oe,{modelValue:h(B).description,"onUpdate:modelValue":X[21]||(X[21]=R=>h(B).description=R),label:"Description (optional)",counter:"100",maxlength:"100",rows:"3",class:"tw-my-2"},null,8,["modelValue"])]),g("div",Cw,[f(ut,{"button-type":"primary",text:"Save",class:"tw-float-right",disabled:h(K),onClick:h(ot)},{default:y(()=>[h(V)==="btnCustom"?(w(),M(Be,{key:0,size:18,width:2,indeterminate:""})):F("",!0)]),_:1},8,["disabled","onClick"]),f(ut,{class:"tw-float-right tw-mr-3",text:"Cancel",disabled:h(V)==="btnCustom",onClick:X[22]||(X[22]=R=>l.value=!1)},null,8,["disabled"])])])):(w(),M(_l,{key:0,modelValue:h(d),"onUpdate:modelValue":X[18]||(X[18]=R=>Ct(d)?d.value=R:null),multiple:"",variant:"accordion",class:"tw-pt-16"},{default:y(()=>[Ft(f(Te,{class:"chd-expansion-panel"},{default:y(()=>[f(De,{class:"tw-justify-between"},{actions:y(()=>[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-chevron-down")]),_:1})]),default:y(()=>[N(" Alerts "),g("span",rw,L(h(c).length),1)]),_:1}),f(Ae,{class:"tw-pb-2"},{default:y(()=>[f(Jt,{class:"tw-py-0"},{default:y(()=>[(w(!0),D(ht,null,vt(h(c),R=>(w(),M(ft,{key:R.id},{default:y(()=>[g("div",null,[g("span",lw,L(R.message)+". ",1)])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},512),[[be,h(c).length>0]]),f(Te,null,{default:y(()=>[f(De,{class:"tw-text-base"},{actions:y(()=>[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-chevron-down")]),_:1})]),default:y(()=>[N(" Attributes ")]),_:1}),f(Ae,{class:"tw-pb-2"},{default:y(()=>[f(Jt,{density:"compact",class:"tw-py-0"},{default:y(()=>[f(ft,{class:"tw-py-0"},{default:y(()=>[f(zo,{modelValue:h(n).muted,"onUpdate:modelValue":[X[0]||(X[0]=R=>h(n).muted=R),h(a)],label:"Mute email notifications",class:"tw-ml-2"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f(Qe,{modelValue:h(n).organizationId,"onUpdate:modelValue":[X[1]||(X[1]=R=>h(n).organizationId=R),X[3]||(X[3]=R=>h(rt)("organizationId",R))],options:h(p),"onUpdate:options":X[2]||(X[2]=R=>Ct(p)?p.value=R:null),label:"Organization (required)","option-text":"name","option-value":"id",class:"tw-z-30 tw-text-base"},null,8,["modelValue","options"])])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f($i,{modelValue:h(n).creator,"onUpdate:modelValue":[X[4]||(X[4]=R=>h(n).creator=R),h(a)],label:"Contact","search-label":"Search and add users",options:h(m),"option-text":"name","option-value":"uid","return-object":"","hide-details":"",class:"pt-2","action-text":"To add a new user, type an email address and hit enter.",onSearchAction:h(v)},null,8,["modelValue","options","onUpdate:modelValue","onSearchAction"])])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f($i,{modelValue:h(n).assignee,"onUpdate:modelValue":[X[5]||(X[5]=R=>h(n).assignee=R),h(a)],label:"Assignee",options:h(_),"option-text":"name","option-value":"id","return-object":"","hide-details":"",class:"tw-z-30"},null,8,["modelValue","options","onUpdate:modelValue"])])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f(Qe,{modelValue:h(n).status,"onUpdate:modelValue":[X[6]||(X[6]=R=>h(n).status=R),X[7]||(X[7]=R=>h(rt)("status",R))],label:"Status",options:h(x),"option-text":"name","option-value":"id",class:"tw-z-30"},null,8,["modelValue","options"])])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f(Qe,{modelValue:h(n).priority,"onUpdate:modelValue":[X[8]||(X[8]=R=>h(n).priority=R),X[9]||(X[9]=R=>h(rt)("priority",R))],label:"Priority",options:h(C),"option-text":"name","option-value":"id",class:"tw-z-30"},null,8,["modelValue","options"])])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f(kt,{"model-value":h(q)(h(n).dueAt),label:"Due Date","prepend-inner-icon":"mdi-calendar",readonly:"",clearable:"","hide-details":"",class:"tw-z-30",onClick:X[10]||(X[10]=R=>A.value=!0),"onClick:clear":h(T)},null,8,["model-value","onClick:clear"]),Ft(f(ni,{modelValue:h($),"onUpdate:modelValue":[X[11]||(X[11]=R=>Ct($)?$.value=R:null),h(k)],width:"100%"},null,8,["modelValue","onUpdate:modelValue"]),[[be,h(A)]])])]),_:1}),f(ft,{class:"tw-py-0"},{default:y(()=>[g("div",null,[f(Qe,{modelValue:h(n).ticketCategoryId,"onUpdate:modelValue":[X[12]||(X[12]=R=>h(n).ticketCategoryId=R),X[13]||(X[13]=R=>h(rt)("ticketCategoryId",R))],label:"Category",options:h(P),"option-text":"name","option-value":"id",class:"tw-z-30"},null,8,["modelValue","options"])])]),_:1}),!h(u)&&h(b).length>0?(w(),M(ft,{key:0,class:"custom-attrs-toggle tw-py-0",onClick:X[14]||(X[14]=R=>u.value=!0)},{default:y(()=>[cw]),_:1})):(w(),D("div",dw,[(w(!0),D(ht,null,vt(h(b),R=>(w(),M(ft,{key:R.id},{default:y(()=>[R.type==="list"?(w(),D("div",uw,[f(Qe,{modelValue:R.value,"onUpdate:modelValue":nt=>R.value=nt,label:R.name,options:R.options,class:"tw-z-30",onChange:h(a)},null,8,["modelValue","onUpdate:modelValue","label","options","onChange"])])):R.type==="text_area"?(w(),D("div",hw,[f(oe,{modelValue:R.value,"onUpdate:modelValue":nt=>R.value=nt,label:R.name,"hide-details":"",class:"tw-z-30",onBlur:nt=>h(ct)(R)},null,8,["modelValue","onUpdate:modelValue","label","onBlur"])])):R.type==="phone"?(w(),D("div",fw,[f(kt,{modelValue:R.value,"onUpdate:modelValue":nt=>R.value=nt,type:"phone",label:R.name,"error-messages":h(E)(R),class:"tw-z-30",onBlur:nt=>h(ct)(R)},null,8,["modelValue","onUpdate:modelValue","label","error-messages","onBlur"])])):R.type==="number"?(w(),D("div",pw,[f(kt,{modelValue:R.value,"onUpdate:modelValue":nt=>R.value=nt,type:"number",label:R.name,"hide-details":"",class:"tw-z-30",onBlur:nt=>h(ct)(R)},null,8,["modelValue","onUpdate:modelValue","label","onBlur"])])):R.type==="text_field"?(w(),D("div",mw,[f(kt,{modelValue:R.value,"onUpdate:modelValue":nt=>R.value=nt,label:R.name,"hide-details":"",class:"tw-z-30",onBlur:nt=>h(ct)(R)},null,8,["modelValue","onUpdate:modelValue","label","onBlur"])])):R.type==="date"?(w(),D("div",gw,[f(kt,{"model-value":h(q)(R.value),label:R.name,"prepend-inner-icon":"mdi-calendar",readonly:"",clearable:"","hide-details":"",class:"tw-z-30",onClick:nt=>h(o)[R.id]=!0,"onClick:clear":nt=>h(it)(R)},null,8,["model-value","label","onClick","onClick:clear"]),Ft(f(ni,{modelValue:h(W)[R.id],"onUpdate:modelValue":[nt=>h(W)[R.id]=nt,nt=>h(wt)(R,nt)],width:"100%"},null,8,["modelValue","onUpdate:modelValue"]),[[be,h(o)[R.id]]])])):F("",!0)]),_:2},1024))),128))])),h(u)&&h(b).length>0?(w(),M(ft,{key:2,class:"custom-attrs-toggle",onClick:X[15]||(X[15]=R=>u.value=!1)},{default:y(()=>[ww]),_:1})):F("",!0)]),_:1})]),_:1})]),_:1}),f(Te,{class:"chd-expansion-panel"},{default:y(()=>[f(De,{class:"tw-text-sm"},{actions:y(()=>[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-chevron-down")]),_:1})]),default:y(()=>[N(" Tasks "),g("span",vw,L(h(z)),1)]),_:1}),f(Ae,{class:"tw-px-4 tw-pb-2"},{default:y(()=>[Pt.value?(w(),M(ac,{key:0,"ticket-id":h(n).id},null,8,["ticket-id"])):F("",!0)]),_:1})]),_:1}),f(Te,{class:"chd-expansion-panel"},{default:y(()=>[f(De,{class:"tw-justify-between"},{actions:y(()=>[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-chevron-down")]),_:1})]),default:y(()=>[N(" Time spent "),g("span",bw,L(h(n).timeSpentLabel),1)]),_:1}),f(Ae,{class:"tw-px-4 tw-pb-4 tw-pt-2"},{default:y(()=>[f(fl,{class:"time-tracking",divided:""},{default:y(()=>[(w(!0),D(ht,null,vt(h(j),R=>(w(),M(pt,{key:R,variant:"outlined","selected-class":"custom-active",disabled:!!h(V),class:mt(`${h(V)&&h(V)!=="btn"+R?"tw-opacity-60":"highlight"}`),onClick:Lt(nt=>h(H)(R),["stop"])},{default:y(()=>[h(V)===`btn${R}`?(w(),M(Be,{key:0,size:18,width:2,class:mt(`${h(O)(R).length===4?"tw-mx-3":"tw-mx-1"}`),indeterminate:""},null,8,["class"])):(w(),D("span",yw,L(h(O)(R)),1))]),_:2},1032,["disabled","class","onClick"]))),128)),f(pt,{class:mt(`${h(V)?"tw-opacity-60":"highlight"}`),disabled:!!h(V),variant:"outlined","selected-class":"custom-active",onClick:X[16]||(X[16]=R=>l.value=!0)},{default:y(()=>[N("Custom")]),_:1},8,["class","disabled"])]),_:1})]),_:1})]),_:1}),f(Te,null,{default:y(()=>[f(De,{class:"tw-text-base"},{actions:y(()=>[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-chevron-down")]),_:1})]),default:y(()=>[N(" CC'ed users ")]),_:1}),f(Ae,{class:"tw-px-4 tw-py-2"},{default:y(()=>[f($i,{modelValue:h(U),"onUpdate:modelValue":X[17]||(X[17]=R=>Ct(U)?U.value=R:null),label:"Add user","search-label":"Search and add users",options:h(m),"option-text":"name","option-value":"uid","hide-details":"",class:"tw-z-30","single-select":!1,"action-text":"To add a new user, type an email address and hit enter.",onSearchAction:h(v)},null,8,["modelValue","options","onSearchAction"]),f(Jt,{class:"cc-users-list"},{default:y(()=>[(w(!0),D(ht,null,vt(h(U),(R,nt)=>(w(),M(ft,{key:R.uid,class:"tw-p-0"},{prepend:y(()=>[f(ri,{size:24,class:"tw-mr-2",user:R},null,8,["user"])]),default:y(()=>[g("span",_w,L(R.name),1)]),append:y(()=>[f(pt,{icon:"",size:"x-small",onClick:Kt=>h(J)(nt)},{default:y(()=>[f(bt,{class:"tw-text-lg"},{default:y(()=>[N("mdi-close")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),_:1},8,["modelValue","width"])):F("",!0)]))}};const Tw=s=>(Pe("data-v-87ae66ce"),s=s(),Ie(),s),Dw={key:0,class:"tw-h-full tw-w-full"},Aw={class:"tw-relative tw-flex tw-h-full tw-w-full tw-flex-col tw-justify-between"},$w={class:"tw-flex tw-h-full tw-flex-col tw-overflow-auto"},Mw={class:"container-bg tw-z-10 tw-w-full tw-py-3"},Pw={class:"tw-flex tw-flex-row tw-items-center tw-justify-between tw-gap-4 tw-px-3"},Iw={class:"container-bg tw-w-full tw-pt-3"},Vw={class:"tw-flex tw-flex-row tw-items-center tw-justify-between"},Lw={class:"tw-flex tw-items-center"},Ew={class:"tw-flex tw-items-center tw-justify-between"},Rw=Tw(()=>g("span",{class:"tw-text-xs"}," Close on send ",-1)),zw={key:2,class:"tw-mt-16 tw-w-full tw-px-2.5 tw-py-4 tw-text-center"},Ow={class:"tw-text-xl tw-font-medium"},Fw={class:"tw-text-xl tw-font-medium"},Bw={class:"tw-mt-2.5"},Uw={__name:"MobileTicketHistory",setup(s){const t=I(null),e=I(null),{submitComment:i,commentErrors:n,commentValidation:o,commentPlaceholder:a,commentBackgroundColor:r,comment:l,isPublic:c,attachments:d,uploadAttachment:u,removeAttachment:p,onAddCannedResponseToComment:m,isNewComment:b,isSubmittingComment:v,uploadingAttachment:_}=mc(t,e),{isCurrentTicketFullyLoaded:x,ticketFailureLineOne:C,ticketFailureLineTwo:T,isUpdating:$,updateTicketHistory:k,activeAlerts:A,isShowingDescriptionQuickScroll:P,ticketActivityEntries:z,isShowingLatestActivityQuickScroll:j,loadTicketData:V,isComment:O,ticketHistoryElem:B,scrollBottom:U,scrollToTop:H,onShowDeleteTicketCommentDialog:J,onShowDeleteTicketCommentAttachmentDialog:K,currentTicket:G,setIsShowingSummaryAndDescriptionDialog:ot,isShowingDeleteCommentDialog:et,softDeleteTicketCommentAction:ct,isShowingDeleteTicketCommentAttachmentDialog:it,deleteTicketCommentAttachmentAction:W,updateDocumentTitle:wt,currentTicketView:at}=ci(),{isMobile:rt}=vl(),E=me(),q=ye(),Z=I(null),Pt=I(1),Gt=I(!1),te=S(()=>c.value?"Public":"Internal"),le=S(()=>c.value?"Internal note":"Public response");lt(rt,jt=>{jt||E.push({name:"Tickets",params:E.currentRoute.value.params,query:E.currentRoute.value.query})}),re(()=>{const jt=document.querySelector("#footer-leaderboard-ad");jt&&(jt.style.display="none"),V()});const Q=async()=>{const jt=Gt.value?"closed":null;i(jt),R()},X=()=>{Pt.value=3,U()},R=()=>{Pt.value=1},nt=()=>{Z.value.showAttributesMenu()},Kt=()=>{const{params:jt,query:Tt}=q,{ticket_number:Mt,from_page_number:Wt,...ue}=Tt;E.replace({name:"Tickets",params:{page:Tt.from_page_number||1,view:jt.view||at.value.name_path},query:ue}),wt()};return(jt,Tt)=>h(G)?(w(),D("div",Dw,[f(Sw,{ref_key:"mobileTicketAttributes",ref:Z,ticket:h(G),onUpdateTicketHistory:h(k),onLoadTicketData:h(V)},null,8,["ticket","onUpdateTicketHistory","onLoadTicketData"]),f(cc,{ticket:h(G),"is-updating":h($),onUpdateTicketHistory:h(k)},null,8,["ticket","is-updating","onUpdateTicketHistory"]),f(Ue,{"is-showing-dialog":h(et),"onUpdate:isShowingDialog":Tt[0]||(Tt[0]=Mt=>Ct(et)?et.value=Mt:null),title:"Delete comment forever?","confirm-text":"Delete",onDialogAction:h(ct)},{default:y(()=>[N(" Are you sure you want to delete this comment and all included attachments? This cannot be undone. ")]),_:1},8,["is-showing-dialog","onDialogAction"]),f(Ue,{"is-showing-dialog":h(it),"onUpdate:isShowingDialog":Tt[1]||(Tt[1]=Mt=>Ct(it)?it.value=Mt:null),title:"Delete attachments?","confirm-text":"Edit and delete",onDialogAction:h(W)},{default:y(()=>[N(" Are you sure you want to delete comment attachments as part of this edit? This cannot be undone. ")]),_:1},8,["is-showing-dialog","onDialogAction"]),g("div",Aw,[g("div",$w,[g("div",Mw,[g("div",Pw,[f(pt,{icon:"mdi-arrow-left",onClick:Kt}),g("div",{class:"tw-grow tw-truncate tw-text-lg",onClick:Tt[2]||(Tt[2]=Mt=>h(ot)(!0))},L(`#${h(G).id} ${h(G).summary}`),1),f(pt,{icon:"mdi-information-outline",onClick:nt})]),h(A).length>0?(w(),M(kl,{key:0,type:"warning",message:`${h(A)[0].message}.`,"link-message":`${h(A).length>1?`${h(A).length-1} more alerts.`:""}`,dismissible:!0,class:"tw-mb-0",onLinkClicked:nt},null,8,["message","link-message"])):F("",!0),f($n,{class:mt(["top-scroll-button",{"tw-hidden":!h(P)}]),"is-up":!0,onScroll:Tt[3]||(Tt[3]=Mt=>h(H)())},null,8,["class"])]),g("div",{ref_key:"ticketHistoryElem",ref:B,class:"tw-w-full tw-overflow-y-auto tw-px-3"},[g("div",{class:"tw-cursor-pointer",onClick:Tt[4]||(Tt[4]=Mt=>jt.isShowingDialog=!0)},[f(Dn,{entry:h(G)},null,8,["entry"])]),(w(!0),D(ht,null,vt(h(z),(Mt,Wt)=>(w(),D("div",{key:`${Wt}-${Mt.id}-${Mt.activityType}`},[h(O)(Mt)?(w(),M(Dn,{key:0,entry:Mt,onShowTicketCommentDeleteModal:h(J),onShowTicketCommentAttachmentDeleteModal:h(K),"onUpdate:entryBody":ue=>Mt.body=ue,"onUpdate:entryPreviousBody":ue=>Mt.previousBody=ue,"onUpdate:entryFiles":ue=>Mt.files=ue},null,8,["entry","onShowTicketCommentDeleteModal","onShowTicketCommentAttachmentDeleteModal","onUpdate:entryBody","onUpdate:entryPreviousBody","onUpdate:entryFiles"])):(w(),M(dc,{key:1,entry:Mt,prev:h(z)[Wt-1],next:h(z)[Wt+1]},null,8,["entry","prev","next"]))]))),128))],512)]),g("div",Iw,[f($n,{class:mt(["bottom-scroll-button",{"tw-hidden":!h(j)}]),"is-up":!1,onScroll:Tt[5]||(Tt[5]=Mt=>h(U)())},null,8,["class"]),f(Gi,{"pending-attachments":h(d),class:"tw-px-3",onAttachmentRemoved:h(p)},null,8,["pending-attachments","onAttachmentRemoved"])]),f(jn,{ref_key:"form",ref:t,class:"tw-flex tw-flex-col tw-items-stretch tw-px-3",onClick:Tt[10]||(Tt[10]=Lt(()=>{},["stop"])),onSubmit:Tt[11]||(Tt[11]=Lt(()=>{},["prevent"]))},{default:y(()=>[f(oe,{id:"commentTextarea",ref_key:"commentTextarea",ref:e,modelValue:h(l),"onUpdate:modelValue":Tt[6]||(Tt[6]=Mt=>Ct(l)?l.value=Mt:null),"error-messages":h(n),placeholder:h(a),"bg-color":h(r),"no-resize":"",rows:Pt.value,onFocus:X,onBlur:Tt[7]||(Tt[7]=Mt=>Pt.value=1),onKeydown:h(o)},null,8,["modelValue","error-messages","placeholder","bg-color","rows","onKeydown"]),g("div",Vw,[g("div",Lw,[f(ws,{attach:"",location:"top right"},{activator:y(({props:Mt})=>[g("button",Ht({class:"tw-cursor-pointer tw-font-medium tw-text-earl-1000 focus:tw-outline-none"},Mt),[N(L(te.value)+" ",1),f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-menu-down")]),_:1})],16)]),default:y(()=>[f(Jt,{class:"tw-py-0"},{default:y(()=>[f(ft,{class:"tw-cursor-pointer tw-font-medium tw-text-earl-1000",onClick:Tt[8]||(Tt[8]=Mt=>c.value=!h(c))},{default:y(()=>[f(Re,null,{default:y(()=>[N(L(le.value),1)]),_:1})]),_:1})]),_:1})]),_:1}),g("div",Ew,[f(Oo,{onUploadAttachment:h(u)},null,8,["onUploadAttachment"]),f(pc,{onAddCannedResponseToComment:h(m)},null,8,["onAddCannedResponseToComment"])]),h(G).status!=="closed"?(w(),M(zo,{key:0,modelValue:Gt.value,"onUpdate:modelValue":Tt[9]||(Tt[9]=Mt=>Gt.value=Mt),class:"tw-py-0 tw-pl-2 tw-pr-0"},{label:y(()=>[Rw]),_:1},8,["modelValue"])):F("",!0)]),f(pt,{color:"white",class:"tw-mr-4 tw-min-w-20 tw-bg-dusk-500 tw-p-0",loading:h(v),disabled:!h(b)||h(v)||h(_),onClick:Lt(Q,["stop"])},{default:y(()=>[f(bt,{class:"tw-text-white"},{default:y(()=>[N("mdi-send")]),_:1})]),_:1},8,["loading","disabled"])])]),_:1},512)])])):h(x)?(w(),D("div",zw,[g("div",Ow,L(h(C)),1),g("div",Fw,L(h(T)),1),g("div",Bw,[f(ut,{"button-type":"primary",text:"Take me to the Tickets page",onClick:Lt(Kt,["stop"])})])])):(w(),M(de,{key:1,class:"tw-my-auto tw-h-full tw-w-full"}))}},Hw=St(Uw,[["__scopeId","data-v-87ae66ce"]]);const Nw={class:"form-container"},jw={key:0},Ww={key:1},qw={key:2},Yw={key:3},Kw={key:4},Xw={key:5},Gw={class:"tw-mt-4 tw-w-full"},Zw={class:"container-bg tw-z-10 tw-w-full tw-space-x-3 tw-border-t tw-border-earl-200 tw-p-3 tw-text-right"},Qw={__name:"MobileNewTicketForm",setup(s){const t=I([]),{removeAttachment:e,uploadingAttachment:i,uploadAttachment:n}=Xi(t),o=me(),{formatDate:a}=Ne(),r=xt(),l=S(()=>r.state.currentTicketView);re(()=>{d.value=J()});const c=()=>{l.value?o.push({name:"Tickets",params:{view:l.value.name_path}}):o.push({name:"Tickets"})},{organizationId:d,organizationIdErrors:u,currentUserAccessibleOrganizations:p,updateAttributeFromDropdown:m,creator:b,usersForCurrentOrganization:v,creatorErrors:_,summary:x,summaryErrors:C,createEndUserHandler:T,description:$,descriptionErrors:k,assignee:A,assignees:P,categoryId:z,ticketCategoriesForCurrentOrg:j,customValues:V,loading:O,submit:B,priority:U,priorities:H,getOrganizationIdFromLocalStorage:J,customAttributeErrors:K}=Jl(c,t),{offsetHeight:G}=Kn(),ot=I(null),et=I(null);return(ct,it)=>(w(),D("div",Nw,[g("div",{class:"tw-absolute tw-w-full tw-overflow-y-auto tw-px-3 tw-pb-16 tw-pt-12",style:Bn(h(G))},[f(jn,{ref_key:"form",ref:ot,class:"new-ticket","lazy-validation":""},{default:y(()=>[f(Qe,{modelValue:h(d),"onUpdate:modelValue":[it[0]||(it[0]=W=>Ct(d)?d.value=W:null),it[2]||(it[2]=W=>h(m)("organizationId",W))],options:h(p),"onUpdate:options":it[1]||(it[1]=W=>Ct(p)?p.value=W:null),label:"Organization (required)","option-text":"name","option-value":"id","error-messages":h(u),class:"pt-4 pb-2"},null,8,["modelValue","options","error-messages"]),f($i,{modelValue:h(b),"onUpdate:modelValue":it[3]||(it[3]=W=>Ct(b)?b.value=W:null),label:"Contact (required)","search-label":"Search and add users",options:h(v),"option-text":"name","option-value":"uid","error-messages":h(_),"return-object":"",class:"py-2","action-text":"To add a new user, type an email address and hit enter.",onSearchAction:h(T)},null,8,["modelValue","options","error-messages","onSearchAction"]),f(kt,{modelValue:h(x),"onUpdate:modelValue":it[4]||(it[4]=W=>Ct(x)?x.value=W:null),"error-messages":h(C),counter:255,class:"pt-2",label:"Summary (required)","persistent-counter":""},null,8,["modelValue","error-messages"]),f(oe,{modelValue:h($),"onUpdate:modelValue":it[5]||(it[5]=W=>Ct($)?$.value=W:null),"error-messages":h(k),label:"Description (required)",class:"pt-2"},null,8,["modelValue","error-messages"]),f($i,{modelValue:h(A),"onUpdate:modelValue":it[6]||(it[6]=W=>Ct(A)?A.value=W:null),label:"Assignee",options:h(P),"option-text":"name","option-value":"id","hide-details":"","select-first":!0,"return-object":!0,class:"py-2"},null,8,["modelValue","options"]),f(Qe,{modelValue:h(U),"onUpdate:modelValue":[it[7]||(it[7]=W=>Ct(U)?U.value=W:null),it[8]||(it[8]=W=>h(m)("priority",W))],label:"Priority",options:h(H),"option-text":"name","option-value":"id",class:"py-2"},null,8,["modelValue","options"]),f(Qe,{modelValue:h(z),"onUpdate:modelValue":[it[9]||(it[9]=W=>Ct(z)?z.value=W:null),it[10]||(it[10]=W=>h(m)("categoryId",W))],label:"Category",options:h(j),"option-text":"name","option-value":"id",class:"py-2"},null,8,["modelValue","options"]),f(Jt,null,{default:y(()=>[(w(!0),D(ht,null,vt(h(V),W=>(w(),M(ft,{key:W.id,class:"tw-p-0"},{default:y(()=>[W.customAttributeType==="list"?(w(),D("div",jw,[f(Qe,{modelValue:W.value,"onUpdate:modelValue":wt=>W.value=wt,label:W.name,options:W.options},null,8,["modelValue","onUpdate:modelValue","label","options"])])):W.customAttributeType==="text_area"?(w(),D("div",Ww,[f(oe,{modelValue:W.value,"onUpdate:modelValue":wt=>W.value=wt,label:W.name,"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])])):W.customAttributeType==="phone"?(w(),D("div",qw,[f(kt,{modelValue:W.value,"onUpdate:modelValue":wt=>W.value=wt,type:"phone",label:W.name,"error-messages":h(K)[W.customAttributeId]||[]},null,8,["modelValue","onUpdate:modelValue","label","error-messages"])])):W.customAttributeType==="number"?(w(),D("div",Yw,[f(kt,{modelValue:W.value,"onUpdate:modelValue":wt=>W.value=wt,type:"number",label:W.name,"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])])):W.customAttributeType==="text_field"?(w(),D("div",Kw,[f(kt,{modelValue:W.value,"onUpdate:modelValue":wt=>W.value=wt,label:W.name,"hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])])):W.customAttributeType==="date"?(w(),D("div",Xw,[f(kt,{"model-value":h(a)(W.value),label:W.name,"prepend-inner-icon":"mdi-calendar",readonly:"",clearable:"","hide-details":"",onClick:wt=>W.other.display=!0,"onClick:clear":wt=>W.value=null},null,8,["model-value","label","onClick","onClick:clear"]),Ft(f(ni,{modelValue:W.value,"onUpdate:modelValue":[wt=>W.value=wt,wt=>W.other.display=!1],"full-width":""},null,8,["modelValue","onUpdate:modelValue"]),[[be,W.other.display]])])):F("",!0)]),_:2},1024))),128))]),_:1})]),_:1},512),g("div",Gw,[Ft(g("input",{ref_key:"fileInput",ref:et,type:"file",onChange:it[11]||(it[11]=W=>h(n)(W,h(d)))},null,544),[[be,!1]]),f(ut,{icon:"mdi-paperclip",class:"tw-mb-4 tw-w-36",text:"Attach a file",onClick:it[12]||(it[12]=Lt(W=>ct.$refs.fileInput.click(),["prevent"]))}),f(Gi,{"pending-attachments":t.value,onAttachmentRemoved:h(e)},null,8,["pending-attachments","onAttachmentRemoved"])])],4),g("div",Zw,[f(ut,{text:"Cancel",onClick:it[13]||(it[13]=W=>h(o).go(-1))}),f(ut,{"button-type":"primary",text:"Create",loading:h(O),disabled:h(O)||h(i),onClick:h(B)},null,8,["loading","disabled","onClick"])])]))}};const Jw={class:"tw-w-full"},tv={class:"container-bg tw-z-10 tw-flex tw-w-full tw-flex-row tw-items-center tw-justify-between tw-p-3"},ev={class:"tw-flex tw-items-center"},sv=g("div",{class:"tw-line-clamp-2 tw-text-lg"},"Create new ticket",-1),iv={__name:"NewTicket",setup(s){const t=me(),{offsetHeight:e}=Kn(),i=()=>{t.go(-1)};return(n,o)=>(w(),D("div",Jw,[g("div",{class:"tw-relative tw-flex tw-w-full tw-flex-col tw-justify-between",style:Bn(h(e))},[g("div",tv,[g("div",ev,[g("div",{class:"tw-mr-4 tw-cursor-pointer",onClick:i},[f(bt,{color:"earl-700"},{default:y(()=>[N("mdi-arrow-left")]),_:1})]),sv])]),f(Qw)],4)]))}},nv=Object.freeze({xs:0,sm:640,md:768,lg:1024,xl:1280}),ov=[{path:"/tickets/new",component:iv,name:"NewTicket"},{path:"/tickets/:view?/:page?",component:Z0,name:"Tickets",beforeEnter:(s,t,e)=>{window.innerWidth<nv.md&&s.query.ticket_number?e({name:"MobileTicketHistory",query:s.query,params:s.params}):!s.params.page||!s.params.view||!s.query.sort?e({name:"Tickets",params:{page:s.params.page||"1",view:s.params.view||"open"},query:{sort:s.query.sort||window.localStorage.getItem("ticketsSort")||"updated_at-desc",q:s.query.q,ticket_number:s.query.ticket_number}}):e()}},{path:"/tickets/:view/details",component:Hw,name:"MobileTicketHistory"},{path:"/",alias:"/tickets",name:"Root",beforeEnter:(s,t,e)=>{e({name:"Tickets",params:{view:"open",page:1},query:{sort:s.query.sort||window.localStorage.getItem("ticketsSort")||"updated_at-desc",q:s.query.q,ticket_number:s.query.ticket_number}})}}],av={props:{ticketStats:{type:Array,required:!0}}},rv={class:"tw-flex tw-flex-wrap tw-items-center tw-gap-4 tw-border-b tw-border-earl-100 tw-p-4"},lv={class:"tw-mb-2 tw-font-bold"},cv={class:"tw-flex tw-flex-wrap tw-items-center tw-text-earl-700"},dv={class:"tw-mr-4 tw-text-3.5xl"},uv={class:"tw-flex tw-items-center"},hv={key:2,class:"tw-ml-1 tw-text-xl"};function fv(s,t,e,i,n,o){return w(),D("div",rv,[(w(!0),D(ht,null,vt(e.ticketStats,a=>(w(),D("div",{key:a.label,class:"tw-w-40 tw-rounded tw-border tw-border-earl-300 tw-bg-earl-50 tw-p-4 md:tw-w-auto md:tw-min-w-40"},[g("div",lv,L(a.label),1),g("div",cv,[g("span",dv,L(a.count),1),g("div",uv,[a.change>0?(w(),M(bt,{key:0,color:"error","aria-label":"increase"},{default:y(()=>[N("mdi-arrow-up")]),_:1})):a.change<0?(w(),M(bt,{key:1,color:"success","aria-label":"decrease"},{default:y(()=>[N("mdi-arrow-down")]),_:1})):F("",!0),a.change!==0?(w(),D("span",hv,L(a.change),1)):F("",!0)])])]))),128))])}const pv=St(av,[["render",fv]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function Qi(s){return s+.5|0}const cs=(s,t,e)=>Math.max(Math.min(s,e),t);function xi(s){return cs(Qi(s*2.55),0,255)}function fs(s){return cs(Qi(s*255),0,255)}function Ge(s){return cs(Qi(s/2.55)/100,0,1)}function Oa(s){return cs(Qi(s*100),0,100)}const ke={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_o=[..."0123456789ABCDEF"],mv=s=>_o[s&15],gv=s=>_o[(s&240)>>4]+_o[s&15],sn=s=>(s&240)>>4===(s&15),wv=s=>sn(s.r)&&sn(s.g)&&sn(s.b)&&sn(s.a);function vv(s){var t=s.length,e;return s[0]==="#"&&(t===4||t===5?e={r:255&ke[s[1]]*17,g:255&ke[s[2]]*17,b:255&ke[s[3]]*17,a:t===5?ke[s[4]]*17:255}:(t===7||t===9)&&(e={r:ke[s[1]]<<4|ke[s[2]],g:ke[s[3]]<<4|ke[s[4]],b:ke[s[5]]<<4|ke[s[6]],a:t===9?ke[s[7]]<<4|ke[s[8]]:255})),e}const bv=(s,t)=>s<255?t(s):"";function yv(s){var t=wv(s)?mv:gv;return s?"#"+t(s.r)+t(s.g)+t(s.b)+bv(s.a,t):void 0}const _v=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gc(s,t,e){const i=t*Math.min(e,1-e),n=(o,a=(o+s/30)%12)=>e-i*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function kv(s,t,e){const i=(n,o=(n+s/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function xv(s,t,e){const i=gc(s,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)i[n]*=1-t-e,i[n]+=t;return i}function Cv(s,t,e,i,n){return s===n?(t-e)/i+(t<e?6:0):t===n?(e-s)/i+2:(s-t)/i+4}function Ko(s){const e=s.r/255,i=s.g/255,n=s.b/255,o=Math.max(e,i,n),a=Math.min(e,i,n),r=(o+a)/2;let l,c,d;return o!==a&&(d=o-a,c=r>.5?d/(2-o-a):d/(o+a),l=Cv(e,i,n,d,o),l=l*60+.5),[l|0,c||0,r]}function Xo(s,t,e,i){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,e,i)).map(fs)}function Go(s,t,e){return Xo(gc,s,t,e)}function Sv(s,t,e){return Xo(xv,s,t,e)}function Tv(s,t,e){return Xo(kv,s,t,e)}function wc(s){return(s%360+360)%360}function Dv(s){const t=_v.exec(s);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?xi(+t[5]):fs(+t[5]));const n=wc(+t[2]),o=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?i=Sv(n,o,a):t[1]==="hsv"?i=Tv(n,o,a):i=Go(n,o,a),{r:i[0],g:i[1],b:i[2],a:e}}function Av(s,t){var e=Ko(s);e[0]=wc(e[0]+t),e=Go(e),s.r=e[0],s.g=e[1],s.b=e[2]}function $v(s){if(!s)return;const t=Ko(s),e=t[0],i=Oa(t[1]),n=Oa(t[2]);return s.a<255?`hsla(${e}, ${i}%, ${n}%, ${Ge(s.a)})`:`hsl(${e}, ${i}%, ${n}%)`}const Fa={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ba={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Mv(){const s={},t=Object.keys(Ba),e=Object.keys(Fa);let i,n,o,a,r;for(i=0;i<t.length;i++){for(a=r=t[i],n=0;n<e.length;n++)o=e[n],r=r.replace(o,Fa[o]);o=parseInt(Ba[a],16),s[r]=[o>>16&255,o>>8&255,o&255]}return s}let nn;function Pv(s){nn||(nn=Mv(),nn.transparent=[0,0,0,0]);const t=nn[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Iv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Vv(s){const t=Iv.exec(s);let e=255,i,n,o;if(t){if(t[7]!==i){const a=+t[7];e=t[8]?xi(a):cs(a*255,0,255)}return i=+t[1],n=+t[3],o=+t[5],i=255&(t[2]?xi(i):cs(i,0,255)),n=255&(t[4]?xi(n):cs(n,0,255)),o=255&(t[6]?xi(o):cs(o,0,255)),{r:i,g:n,b:o,a:e}}}function Lv(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Ge(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const eo=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Ys=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Ev(s,t,e){const i=Ys(Ge(s.r)),n=Ys(Ge(s.g)),o=Ys(Ge(s.b));return{r:fs(eo(i+e*(Ys(Ge(t.r))-i))),g:fs(eo(n+e*(Ys(Ge(t.g))-n))),b:fs(eo(o+e*(Ys(Ge(t.b))-o))),a:s.a+e*(t.a-s.a)}}function on(s,t,e){if(s){let i=Ko(s);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Go(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function vc(s,t){return s&&Object.assign(t||{},s)}function Ua(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=fs(s[3]))):(t=vc(s,{r:0,g:0,b:0,a:1}),t.a=fs(t.a)),t}function Rv(s){return s.charAt(0)==="r"?Vv(s):Dv(s)}class Fi{constructor(t){if(t instanceof Fi)return t;const e=typeof t;let i;e==="object"?i=Ua(t):e==="string"&&(i=vv(t)||Pv(t)||Rv(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=vc(this._rgb);return t&&(t.a=Ge(t.a)),t}set rgb(t){this._rgb=Ua(t)}rgbString(){return this._valid?Lv(this._rgb):void 0}hexString(){return this._valid?yv(this._rgb):void 0}hslString(){return this._valid?$v(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let o;const a=e===o?.5:e,r=2*a-1,l=i.a-n.a,c=((r*l===-1?r:(r+l)/(1+r*l))+1)/2;o=1-c,i.r=255&c*i.r+o*n.r+.5,i.g=255&c*i.g+o*n.g+.5,i.b=255&c*i.b+o*n.b+.5,i.a=a*i.a+(1-a)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Ev(this._rgb,t._rgb,e)),this}clone(){return new Fi(this.rgb)}alpha(t){return this._rgb.a=fs(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Qi(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return on(this._rgb,2,t),this}darken(t){return on(this._rgb,2,-t),this}saturate(t){return on(this._rgb,1,t),this}desaturate(t){return on(this._rgb,1,-t),this}rotate(t){return Av(this._rgb,t),this}}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function We(){}const zv=(()=>{let s=0;return()=>s++})();function Vt(s){return s===null||typeof s>"u"}function zt(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function At(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function Qt(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function ge(s,t){return Qt(s)?s:t}function yt(s,t){return typeof s>"u"?t:s}const Ov=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,bc=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Rt(s,t,e){if(s&&typeof s.call=="function")return s.apply(e,t)}function It(s,t,e,i){let n,o,a;if(zt(s))if(o=s.length,i)for(n=o-1;n>=0;n--)t.call(e,s[n],n);else for(n=0;n<o;n++)t.call(e,s[n],n);else if(At(s))for(a=Object.keys(s),o=a.length,n=0;n<o;n++)t.call(e,s[a[n]],a[n])}function Mn(s,t){let e,i,n,o;if(!s||!t||s.length!==t.length)return!1;for(e=0,i=s.length;e<i;++e)if(n=s[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function Pn(s){if(zt(s))return s.map(Pn);if(At(s)){const t=Object.create(null),e=Object.keys(s),i=e.length;let n=0;for(;n<i;++n)t[e[n]]=Pn(s[e[n]]);return t}return s}function yc(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Fv(s,t,e,i){if(!yc(s))return;const n=t[s],o=e[s];At(n)&&At(o)?Bi(n,o,i):t[s]=Pn(o)}function Bi(s,t,e){const i=zt(t)?t:[t],n=i.length;if(!At(s))return s;e=e||{};const o=e.merger||Fv;let a;for(let r=0;r<n;++r){if(a=i[r],!At(a))continue;const l=Object.keys(a);for(let c=0,d=l.length;c<d;++c)o(l[c],s,a,e)}return s}function Mi(s,t){return Bi(s,t,{merger:Bv})}function Bv(s,t,e){if(!yc(s))return;const i=t[s],n=e[s];At(i)&&At(n)?Mi(i,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Pn(n))}const Ha={"":s=>s,x:s=>s.x,y:s=>s.y};function Uv(s){const t=s.split("."),e=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Hv(s){const t=Uv(s);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function zs(s,t){return(Ha[t]||(Ha[t]=Hv(t)))(s)}function Zo(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Ui=s=>typeof s<"u",bs=s=>typeof s=="function",Na=(s,t)=>{if(s.size!==t.size)return!1;for(const e of s)if(!t.has(e))return!1;return!0};function Nv(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const Bt=Math.PI,Ot=2*Bt,jv=Ot+Bt,In=Number.POSITIVE_INFINITY,Wv=Bt/180,qt=Bt/2,Ss=Bt/4,ja=Bt*2/3,ds=Math.log10,Fe=Math.sign;function Pi(s,t,e){return Math.abs(s-t)<e}function Wa(s){const t=Math.round(s);s=Pi(s,t,s/1e3)?t:s;const e=Math.pow(10,Math.floor(ds(s))),i=s/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function qv(s){const t=[],e=Math.sqrt(s);let i;for(i=1;i<e;i++)s%i===0&&(t.push(i),t.push(s/i));return e===(e|0)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}function Hi(s){return!isNaN(parseFloat(s))&&isFinite(s)}function Yv(s,t){const e=Math.round(s);return e-t<=s&&e+t>=s}function _c(s,t,e){let i,n,o;for(i=0,n=s.length;i<n;i++)o=s[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ze(s){return s*(Bt/180)}function Qo(s){return s*(180/Bt)}function qa(s){if(!Qt(s))return;let t=1,e=0;for(;Math.round(s*t)/t!==s;)t*=10,e++;return e}function kc(s,t){const e=t.x-s.x,i=t.y-s.y,n=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Bt&&(o+=Ot),{angle:o,distance:n}}function ko(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Kv(s,t){return(s-t+jv)%Ot-Bt}function Se(s){return(s%Ot+Ot)%Ot}function Ni(s,t,e,i){const n=Se(s),o=Se(t),a=Se(e),r=Se(o-n),l=Se(a-n),c=Se(n-o),d=Se(n-a);return n===o||n===a||i&&o===a||r>l&&c<d}function ne(s,t,e){return Math.max(t,Math.min(e,s))}function Xv(s){return ne(s,-32768,32767)}function us(s,t,e,i=1e-6){return s>=Math.min(t,e)-i&&s<=Math.max(t,e)+i}function Jo(s,t,e){e=e||(a=>s[a]<t);let i=s.length-1,n=0,o;for(;i-n>1;)o=n+i>>1,e(o)?n=o:i=o;return{lo:n,hi:i}}const Vs=(s,t,e,i)=>Jo(s,e,i?n=>{const o=s[n][t];return o<e||o===e&&s[n+1][t]===e}:n=>s[n][t]<e),Gv=(s,t,e)=>Jo(s,e,i=>s[i][t]>=e);function Zv(s,t,e){let i=0,n=s.length;for(;i<n&&s[i]<t;)i++;for(;n>i&&s[n-1]>e;)n--;return i>0||n<s.length?s.slice(i,n):s}const xc=["push","pop","shift","splice","unshift"];function Qv(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),xc.forEach(e=>{const i="_onData"+Zo(e),n=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...o){const a=n.apply(this,o);return s._chartjs.listeners.forEach(r=>{typeof r[i]=="function"&&r[i](...o)}),a}})})}function Ya(s,t){const e=s._chartjs;if(!e)return;const i=e.listeners,n=i.indexOf(t);n!==-1&&i.splice(n,1),!(i.length>0)&&(xc.forEach(o=>{delete s[o]}),delete s._chartjs)}function Cc(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const Sc=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function Tc(s,t){let e=[],i=!1;return function(...n){e=n,i||(i=!0,Sc.call(window,()=>{i=!1,s.apply(t,e)}))}}function Jv(s,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(s,t,i)):s.apply(this,i),t}}const ta=s=>s==="start"?"left":s==="end"?"right":"center",ie=(s,t,e)=>s==="start"?t:s==="end"?e:(t+e)/2,t2=(s,t,e,i)=>s===(i?"left":"right")?e:s==="center"?(t+e)/2:t;function e2(s,t,e){const i=t.length;let n=0,o=i;if(s._sorted){const{iScale:a,_parsed:r}=s,l=a.axis,{min:c,max:d,minDefined:u,maxDefined:p}=a.getUserBounds();u&&(n=ne(Math.min(Vs(r,l,c).lo,e?i:Vs(t,l,a.getPixelForValue(c)).lo),0,i-1)),p?o=ne(Math.max(Vs(r,a.axis,d,!0).hi+1,e?0:Vs(t,l,a.getPixelForValue(d),!0).hi+1),n,i)-n:o=i-n}return{start:n,count:o}}function s2(s){const{xScale:t,yScale:e,_scaleRanges:i}=s,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return s._scaleRanges=n,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,n),o}const an=s=>s===0||s===1,Ka=(s,t,e)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*Ot/e)),Xa=(s,t,e)=>Math.pow(2,-10*s)*Math.sin((s-t)*Ot/e)+1,Ii={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*qt)+1,easeOutSine:s=>Math.sin(s*qt),easeInOutSine:s=>-.5*(Math.cos(Bt*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>an(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>an(s)?s:Ka(s,.075,.3),easeOutElastic:s=>an(s)?s:Xa(s,.075,.3),easeInOutElastic(s){return an(s)?s:s<.5?.5*Ka(s*2,.1125,.45):.5+.5*Xa(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-Ii.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Ii.easeInBounce(s*2)*.5:Ii.easeOutBounce(s*2-1)*.5+.5};function ea(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ga(s){return ea(s)?s:new Fi(s)}function so(s){return ea(s)?s:new Fi(s).saturate(.5).darken(.1).hexString()}const i2=["x","y","borderWidth","radius","tension"],n2=["color","borderColor","backgroundColor"];function o2(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:n2},numbers:{type:"number",properties:i2}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function a2(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Za=new Map;function r2(s,t){t=t||{};const e=s+JSON.stringify(t);let i=Za.get(e);return i||(i=new Intl.NumberFormat(s,t),Za.set(e,i)),i}function Xn(s,t,e){return r2(t,e).format(s)}const Dc={values(s){return zt(s)?s:""+s},numeric(s,t,e){if(s===0)return"0";const i=this.chart.options.locale;let n,o=s;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),o=l2(s,e)}const a=ds(Math.abs(o)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),Xn(s,i,l)},logarithmic(s,t,e){if(s===0)return"0";const i=e[t].significand||s/Math.pow(10,Math.floor(ds(s)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Dc.numeric.call(this,s,t,e):""}};function l2(s,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&s!==Math.floor(s)&&(e=s-Math.floor(s)),e}var Gn={formatters:Dc};function c2(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Os=Object.create(null),xo=Object.create(null);function Vi(s,t){if(!t)return s;const e=t.split(".");for(let i=0,n=e.length;i<n;++i){const o=e[i];s=s[o]||(s[o]=Object.create(null))}return s}function io(s,t,e){return typeof t=="string"?Bi(Vi(s,t),e):Bi(Vi(s,""),t)}class d2{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>so(n.backgroundColor),this.hoverBorderColor=(i,n)=>so(n.borderColor),this.hoverColor=(i,n)=>so(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return io(this,t,e)}get(t){return Vi(this,t)}describe(t,e){return io(xo,t,e)}override(t,e){return io(Os,t,e)}route(t,e,i,n){const o=Vi(this,t),a=Vi(this,i),r="_"+e;Object.defineProperties(o,{[r]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[r],c=a[n];return At(l)?Object.assign({},c,l):yt(l,c)},set(l){this[r]=l}}})}apply(t){t.forEach(e=>e(this))}}var Nt=new d2({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[o2,a2,c2]);function u2(s){return!s||Vt(s.size)||Vt(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Vn(s,t,e,i,n){let o=t[n];return o||(o=t[n]=s.measureText(n).width,e.push(n)),o>i&&(i=o),i}function h2(s,t,e,i){i=i||{};let n=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(n=i.data={},o=i.garbageCollect=[],i.font=t),s.save(),s.font=t;let a=0;const r=e.length;let l,c,d,u,p;for(l=0;l<r;l++)if(u=e[l],u!=null&&!zt(u))a=Vn(s,n,o,a,u);else if(zt(u))for(c=0,d=u.length;c<d;c++)p=u[c],p!=null&&!zt(p)&&(a=Vn(s,n,o,a,p));s.restore();const m=o.length/2;if(m>e.length){for(l=0;l<m;l++)delete n[o[l]];o.splice(0,m)}return a}function Ts(s,t,e){const i=s.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*i)/i+n}function Qa(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Co(s,t,e,i){Ac(s,t,e,i,null)}function Ac(s,t,e,i,n){let o,a,r,l,c,d,u,p;const m=t.pointStyle,b=t.rotation,v=t.radius;let _=(b||0)*Wv;if(m&&typeof m=="object"&&(o=m.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){s.save(),s.translate(e,i),s.rotate(_),s.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),s.restore();return}if(!(isNaN(v)||v<=0)){switch(s.beginPath(),m){default:n?s.ellipse(e,i,n/2,v,0,0,Ot):s.arc(e,i,v,0,Ot),s.closePath();break;case"triangle":d=n?n/2:v,s.moveTo(e+Math.sin(_)*d,i-Math.cos(_)*v),_+=ja,s.lineTo(e+Math.sin(_)*d,i-Math.cos(_)*v),_+=ja,s.lineTo(e+Math.sin(_)*d,i-Math.cos(_)*v),s.closePath();break;case"rectRounded":c=v*.516,l=v-c,a=Math.cos(_+Ss)*l,u=Math.cos(_+Ss)*(n?n/2-c:l),r=Math.sin(_+Ss)*l,p=Math.sin(_+Ss)*(n?n/2-c:l),s.arc(e-u,i-r,c,_-Bt,_-qt),s.arc(e+p,i-a,c,_-qt,_),s.arc(e+u,i+r,c,_,_+qt),s.arc(e-p,i+a,c,_+qt,_+Bt),s.closePath();break;case"rect":if(!b){l=Math.SQRT1_2*v,d=n?n/2:l,s.rect(e-d,i-l,2*d,2*l);break}_+=Ss;case"rectRot":u=Math.cos(_)*(n?n/2:v),a=Math.cos(_)*v,r=Math.sin(_)*v,p=Math.sin(_)*(n?n/2:v),s.moveTo(e-u,i-r),s.lineTo(e+p,i-a),s.lineTo(e+u,i+r),s.lineTo(e-p,i+a),s.closePath();break;case"crossRot":_+=Ss;case"cross":u=Math.cos(_)*(n?n/2:v),a=Math.cos(_)*v,r=Math.sin(_)*v,p=Math.sin(_)*(n?n/2:v),s.moveTo(e-u,i-r),s.lineTo(e+u,i+r),s.moveTo(e+p,i-a),s.lineTo(e-p,i+a);break;case"star":u=Math.cos(_)*(n?n/2:v),a=Math.cos(_)*v,r=Math.sin(_)*v,p=Math.sin(_)*(n?n/2:v),s.moveTo(e-u,i-r),s.lineTo(e+u,i+r),s.moveTo(e+p,i-a),s.lineTo(e-p,i+a),_+=Ss,u=Math.cos(_)*(n?n/2:v),a=Math.cos(_)*v,r=Math.sin(_)*v,p=Math.sin(_)*(n?n/2:v),s.moveTo(e-u,i-r),s.lineTo(e+u,i+r),s.moveTo(e+p,i-a),s.lineTo(e-p,i+a);break;case"line":a=n?n/2:Math.cos(_)*v,r=Math.sin(_)*v,s.moveTo(e-a,i-r),s.lineTo(e+a,i+r);break;case"dash":s.moveTo(e,i),s.lineTo(e+Math.cos(_)*(n?n/2:v),i+Math.sin(_)*v);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function es(s,t,e){return e=e||.5,!t||s&&s.x>t.left-e&&s.x<t.right+e&&s.y>t.top-e&&s.y<t.bottom+e}function sa(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function ia(s){s.restore()}function f2(s,t,e,i,n){if(!t)return s.lineTo(e.x,e.y);if(n==="middle"){const o=(t.x+e.x)/2;s.lineTo(o,t.y),s.lineTo(o,e.y)}else n==="after"!=!!i?s.lineTo(t.x,e.y):s.lineTo(e.x,t.y);s.lineTo(e.x,e.y)}function p2(s,t,e,i){if(!t)return s.lineTo(e.x,e.y);s.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function m2(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Vt(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function g2(s,t,e,i,n){if(n.strikethrough||n.underline){const o=s.measureText(i),a=t-o.actualBoundingBoxLeft,r=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,d=n.strikethrough?(l+c)/2:c;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(a,d),s.lineTo(r,d),s.stroke()}}function w2(s,t){const e=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=e}function Fs(s,t,e,i,n,o={}){const a=zt(t)?t:[t],r=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(s.save(),s.font=n.string,m2(s,o),l=0;l<a.length;++l)c=a[l],o.backdrop&&w2(s,o.backdrop),r&&(o.strokeColor&&(s.strokeStyle=o.strokeColor),Vt(o.strokeWidth)||(s.lineWidth=o.strokeWidth),s.strokeText(c,e,i,o.maxWidth)),s.fillText(c,e,i,o.maxWidth),g2(s,e,i,c,o),i+=Number(n.lineHeight);s.restore()}function ji(s,t){const{x:e,y:i,w:n,h:o,radius:a}=t;s.arc(e+a.topLeft,i+a.topLeft,a.topLeft,1.5*Bt,Bt,!0),s.lineTo(e,i+o-a.bottomLeft),s.arc(e+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,Bt,qt,!0),s.lineTo(e+n-a.bottomRight,i+o),s.arc(e+n-a.bottomRight,i+o-a.bottomRight,a.bottomRight,qt,0,!0),s.lineTo(e+n,i+a.topRight),s.arc(e+n-a.topRight,i+a.topRight,a.topRight,0,-qt,!0),s.lineTo(e+a.topLeft,i)}const v2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,b2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function y2(s,t){const e=(""+s).match(v2);if(!e||e[1]==="normal")return t*1.2;switch(s=+e[2],e[3]){case"px":return s;case"%":s/=100;break}return t*s}const _2=s=>+s||0;function na(s,t){const e={},i=At(t),n=i?Object.keys(t):t,o=At(s)?i?a=>yt(s[a],s[t[a]]):a=>s[a]:()=>s;for(const a of n)e[a]=_2(o(a));return e}function $c(s){return na(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Ls(s){return na(s,["topLeft","topRight","bottomLeft","bottomRight"])}function ae(s){const t=$c(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Xt(s,t){s=s||{},t=t||Nt.font;let e=yt(s.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=yt(s.style,t.style);i&&!(""+i).match(b2)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:yt(s.family,t.family),lineHeight:y2(yt(s.lineHeight,t.lineHeight),e),size:e,style:i,weight:yt(s.weight,t.weight),string:""};return n.string=u2(n),n}function rn(s,t,e,i){let n=!0,o,a,r;for(o=0,a=s.length;o<a;++o)if(r=s[o],r!==void 0&&(t!==void 0&&typeof r=="function"&&(r=r(t),n=!1),e!==void 0&&zt(r)&&(r=r[e%r.length],n=!1),r!==void 0))return i&&!n&&(i.cacheable=!1),r}function k2(s,t,e){const{min:i,max:n}=s,o=bc(t,(n-i)/2),a=(r,l)=>e&&r===0?0:r+l;return{min:a(i,-Math.abs(o)),max:a(n,o)}}function ks(s,t){return Object.assign(Object.create(s),t)}function oa(s,t=[""],e,i,n=()=>s[0]){const o=e||s;typeof i>"u"&&(i=Vc("_fallback",s));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:o,_fallback:i,_getTarget:n,override:r=>oa([r,...s],t,o,i)};return new Proxy(a,{deleteProperty(r,l){return delete r[l],delete r._keys,delete s[0][l],!0},get(r,l){return Pc(r,l,()=>M2(l,t,s,r))},getOwnPropertyDescriptor(r,l){return Reflect.getOwnPropertyDescriptor(r._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(r,l){return tr(r).includes(l)},ownKeys(r){return tr(r)},set(r,l,c){const d=r._storage||(r._storage=n());return r[l]=d[l]=c,delete r._keys,!0}})}function oi(s,t,e,i){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:e,_stack:new Set,_descriptors:Mc(s,i),setContext:o=>oi(s,o,e,i),override:o=>oi(s.override(o),t,e,i)};return new Proxy(n,{deleteProperty(o,a){return delete o[a],delete s[a],!0},get(o,a,r){return Pc(o,a,()=>C2(o,a,r))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(s,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,a)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(o,a){return Reflect.has(s,a)},ownKeys(){return Reflect.ownKeys(s)},set(o,a,r){return s[a]=r,delete o[a],!0}})}function Mc(s,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:e,indexable:i,isScriptable:bs(e)?e:()=>e,isIndexable:bs(i)?i:()=>i}}const x2=(s,t)=>s?s+Zo(t):t,aa=(s,t)=>At(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Pc(s,t,e){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const i=e();return s[t]=i,i}function C2(s,t,e){const{_proxy:i,_context:n,_subProxy:o,_descriptors:a}=s;let r=i[t];return bs(r)&&a.isScriptable(t)&&(r=S2(t,r,s,e)),zt(r)&&r.length&&(r=T2(t,r,s,a.isIndexable)),aa(t,r)&&(r=oi(r,n,o&&o[t],a)),r}function S2(s,t,e,i){const{_proxy:n,_context:o,_subProxy:a,_stack:r}=e;if(r.has(s))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+s);r.add(s);let l=t(o,a||i);return r.delete(s),aa(s,l)&&(l=ra(n._scopes,n,s,l)),l}function T2(s,t,e,i){const{_proxy:n,_context:o,_subProxy:a,_descriptors:r}=e;if(typeof o.index<"u"&&i(s))return t[o.index%t.length];if(At(t[0])){const l=t,c=n._scopes.filter(d=>d!==l);t=[];for(const d of l){const u=ra(c,n,s,d);t.push(oi(u,o,a&&a[s],r))}}return t}function Ic(s,t,e){return bs(s)?s(t,e):s}const D2=(s,t)=>s===!0?t:typeof s=="string"?zs(t,s):void 0;function A2(s,t,e,i,n){for(const o of t){const a=D2(e,o);if(a){s.add(a);const r=Ic(a._fallback,e,n);if(typeof r<"u"&&r!==e&&r!==i)return r}else if(a===!1&&typeof i<"u"&&e!==i)return null}return!1}function ra(s,t,e,i){const n=t._rootScopes,o=Ic(t._fallback,e,i),a=[...s,...n],r=new Set;r.add(i);let l=Ja(r,a,e,o||e,i);return l===null||typeof o<"u"&&o!==e&&(l=Ja(r,a,o,l,i),l===null)?!1:oa(Array.from(r),[""],n,o,()=>$2(t,e,i))}function Ja(s,t,e,i,n){for(;e;)e=A2(s,t,e,i,n);return e}function $2(s,t,e){const i=s._getTarget();t in i||(i[t]={});const n=i[t];return zt(n)&&At(e)?e:n||{}}function M2(s,t,e,i){let n;for(const o of t)if(n=Vc(x2(o,s),e),typeof n<"u")return aa(s,n)?ra(e,i,s,n):n}function Vc(s,t){for(const e of t){if(!e)continue;const i=e[s];if(typeof i<"u")return i}}function tr(s){let t=s._keys;return t||(t=s._keys=P2(s._scopes)),t}function P2(s){const t=new Set;for(const e of s)for(const i of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}const I2=Number.EPSILON||1e-14,ai=(s,t)=>t<s.length&&!s[t].skip&&s[t],Lc=s=>s==="x"?"y":"x";function V2(s,t,e,i){const n=s.skip?t:s,o=t,a=e.skip?t:e,r=ko(o,n),l=ko(a,o);let c=r/(r+l),d=l/(r+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=i*c,p=i*d;return{previous:{x:o.x-u*(a.x-n.x),y:o.y-u*(a.y-n.y)},next:{x:o.x+p*(a.x-n.x),y:o.y+p*(a.y-n.y)}}}function L2(s,t,e){const i=s.length;let n,o,a,r,l,c=ai(s,0);for(let d=0;d<i-1;++d)if(l=c,c=ai(s,d+1),!(!l||!c)){if(Pi(t[d],0,I2)){e[d]=e[d+1]=0;continue}n=e[d]/t[d],o=e[d+1]/t[d],r=Math.pow(n,2)+Math.pow(o,2),!(r<=9)&&(a=3/Math.sqrt(r),e[d]=n*a*t[d],e[d+1]=o*a*t[d])}}function E2(s,t,e="x"){const i=Lc(e),n=s.length;let o,a,r,l=ai(s,0);for(let c=0;c<n;++c){if(a=r,r=l,l=ai(s,c+1),!r)continue;const d=r[e],u=r[i];a&&(o=(d-a[e])/3,r[`cp1${e}`]=d-o,r[`cp1${i}`]=u-o*t[c]),l&&(o=(l[e]-d)/3,r[`cp2${e}`]=d+o,r[`cp2${i}`]=u+o*t[c])}}function R2(s,t="x"){const e=Lc(t),i=s.length,n=Array(i).fill(0),o=Array(i);let a,r,l,c=ai(s,0);for(a=0;a<i;++a)if(r=l,l=c,c=ai(s,a+1),!!l){if(c){const d=c[t]-l[t];n[a]=d!==0?(c[e]-l[e])/d:0}o[a]=r?c?Fe(n[a-1])!==Fe(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}L2(s,n,o),E2(s,o,t)}function ln(s,t,e){return Math.max(Math.min(s,e),t)}function z2(s,t){let e,i,n,o,a,r=es(s[0],t);for(e=0,i=s.length;e<i;++e)a=o,o=r,r=e<i-1&&es(s[e+1],t),o&&(n=s[e],a&&(n.cp1x=ln(n.cp1x,t.left,t.right),n.cp1y=ln(n.cp1y,t.top,t.bottom)),r&&(n.cp2x=ln(n.cp2x,t.left,t.right),n.cp2y=ln(n.cp2y,t.top,t.bottom)))}function O2(s,t,e,i,n){let o,a,r,l;if(t.spanGaps&&(s=s.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")R2(s,n);else{let c=i?s[s.length-1]:s[0];for(o=0,a=s.length;o<a;++o)r=s[o],l=V2(c,r,s[Math.min(o+1,a-(i?0:1))%a],t.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,c=r}t.capBezierPoints&&z2(s,e)}function la(){return typeof window<"u"&&typeof document<"u"}function ca(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Ln(s,t,e){let i;return typeof s=="string"?(i=parseInt(s,10),s.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=s,i}const Zn=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function F2(s,t){return Zn(s).getPropertyValue(t)}const B2=["top","right","bottom","left"];function Es(s,t,e){const i={};e=e?"-"+e:"";for(let n=0;n<4;n++){const o=B2[n];i[o]=parseFloat(s[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const U2=(s,t,e)=>(s>0||t>0)&&(!e||!e.shadowRoot);function H2(s,t){const e=s.touches,i=e&&e.length?e[0]:s,{offsetX:n,offsetY:o}=i;let a=!1,r,l;if(U2(n,o,s.target))r=n,l=o;else{const c=t.getBoundingClientRect();r=i.clientX-c.left,l=i.clientY-c.top,a=!0}return{x:r,y:l,box:a}}function Ms(s,t){if("native"in s)return s;const{canvas:e,currentDevicePixelRatio:i}=t,n=Zn(e),o=n.boxSizing==="border-box",a=Es(n,"padding"),r=Es(n,"border","width"),{x:l,y:c,box:d}=H2(s,e),u=a.left+(d&&r.left),p=a.top+(d&&r.top);let{width:m,height:b}=t;return o&&(m-=a.width+r.width,b-=a.height+r.height),{x:Math.round((l-u)/m*e.width/i),y:Math.round((c-p)/b*e.height/i)}}function N2(s,t,e){let i,n;if(t===void 0||e===void 0){const o=s&&ca(s);if(!o)t=s.clientWidth,e=s.clientHeight;else{const a=o.getBoundingClientRect(),r=Zn(o),l=Es(r,"border","width"),c=Es(r,"padding");t=a.width-c.width-l.width,e=a.height-c.height-l.height,i=Ln(r.maxWidth,o,"clientWidth"),n=Ln(r.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||In,maxHeight:n||In}}const cn=s=>Math.round(s*10)/10;function j2(s,t,e,i){const n=Zn(s),o=Es(n,"margin"),a=Ln(n.maxWidth,s,"clientWidth")||In,r=Ln(n.maxHeight,s,"clientHeight")||In,l=N2(s,t,e);let{width:c,height:d}=l;if(n.boxSizing==="content-box"){const p=Es(n,"border","width"),m=Es(n,"padding");c-=m.width+p.width,d-=m.height+p.height}return c=Math.max(0,c-o.width),d=Math.max(0,i?c/i:d-o.height),c=cn(Math.min(c,a,l.maxWidth)),d=cn(Math.min(d,r,l.maxHeight)),c&&!d&&(d=cn(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&d>l.height&&(d=l.height,c=cn(Math.floor(d*i))),{width:c,height:d}}function er(s,t,e){const i=t||1,n=Math.floor(s.height*i),o=Math.floor(s.width*i);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const a=s.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${s.height}px`,a.style.width=`${s.width}px`),s.currentDevicePixelRatio!==i||a.height!==n||a.width!==o?(s.currentDevicePixelRatio=i,a.height=n,a.width=o,s.ctx.setTransform(i,0,0,i,0,0),!0):!1}const W2=function(){let s=!1;try{const t={get passive(){return s=!0,!1}};la()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s}();function sr(s,t){const e=F2(s,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ps(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:s.y+e*(t.y-s.y)}}function q2(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:i==="middle"?e<.5?s.y:t.y:i==="after"?e<1?s.y:t.y:e>0?t.y:s.y}}function Y2(s,t,e,i){const n={x:s.cp2x,y:s.cp2y},o={x:t.cp1x,y:t.cp1y},a=Ps(s,n,e),r=Ps(n,o,e),l=Ps(o,t,e),c=Ps(a,r,e),d=Ps(r,l,e);return Ps(c,d,e)}const K2=function(s,t){return{x(e){return s+s+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},X2=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function ei(s,t,e){return s?K2(t,e):X2()}function Ec(s,t){let e,i;(t==="ltr"||t==="rtl")&&(e=s.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),s.prevTextDirection=i)}function Rc(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function zc(s){return s==="angle"?{between:Ni,compare:Kv,normalize:Se}:{between:us,compare:(t,e)=>t-e,normalize:t=>t}}function ir({start:s,end:t,count:e,loop:i,style:n}){return{start:s%e,end:t%e,loop:i&&(t-s+1)%e===0,style:n}}function G2(s,t,e){const{property:i,start:n,end:o}=e,{between:a,normalize:r}=zc(i),l=t.length;let{start:c,end:d,loop:u}=s,p,m;if(u){for(c+=l,d+=l,p=0,m=l;p<m&&a(r(t[c%l][i]),n,o);++p)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:u,style:s.style}}function Z2(s,t,e){if(!e)return[s];const{property:i,start:n,end:o}=e,a=t.length,{compare:r,between:l,normalize:c}=zc(i),{start:d,end:u,loop:p,style:m}=G2(s,t,e),b=[];let v=!1,_=null,x,C,T;const $=()=>l(n,T,x)&&r(n,T)!==0,k=()=>r(o,x)===0||l(o,T,x),A=()=>v||$(),P=()=>!v||k();for(let z=d,j=d;z<=u;++z)C=t[z%a],!C.skip&&(x=c(C[i]),x!==T&&(v=l(x,n,o),_===null&&A()&&(_=r(x,n)===0?z:j),_!==null&&P()&&(b.push(ir({start:_,end:z,loop:p,count:a,style:m})),_=null),j=z,T=x));return _!==null&&b.push(ir({start:_,end:u,loop:p,count:a,style:m})),b}function Q2(s,t){const e=[],i=s.segments;for(let n=0;n<i.length;n++){const o=Z2(i[n],s.points,t);o.length&&e.push(...o)}return e}function J2(s,t,e,i){let n=0,o=t-1;if(e&&!i)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,e&&(o+=n);o>n&&s[o%t].skip;)o--;return o%=t,{start:n,end:o}}function tb(s,t,e,i){const n=s.length,o=[];let a=t,r=s[t],l;for(l=t+1;l<=e;++l){const c=s[l%n];c.skip||c.stop?r.skip||(i=!1,o.push({start:t%n,end:(l-1)%n,loop:i}),t=a=c.stop?l:null):(a=l,r.skip&&(t=l)),r=c}return a!==null&&o.push({start:t%n,end:a%n,loop:i}),o}function eb(s,t){const e=s.points,i=s.options.spanGaps,n=e.length;if(!n)return[];const o=!!s._loop,{start:a,end:r}=J2(e,n,o,i);if(i===!0)return nr(s,[{start:a,end:r,loop:o}],e,t);const l=r<a?r+n:r,c=!!s._fullLoop&&a===0&&r===n-1;return nr(s,tb(e,a,l,c),e,t)}function nr(s,t,e,i){return!i||!i.setContext||!e?t:sb(s,t,e,i)}function sb(s,t,e,i){const n=s._chart.getContext(),o=or(s.options),{_datasetIndex:a,options:{spanGaps:r}}=s,l=e.length,c=[];let d=o,u=t[0].start,p=u;function m(b,v,_,x){const C=r?-1:1;if(b!==v){for(b+=l;e[b%l].skip;)b-=C;for(;e[v%l].skip;)v+=C;b%l!==v%l&&(c.push({start:b%l,end:v%l,loop:_,style:x}),d=x,u=v%l)}}for(const b of t){u=r?u:b.start;let v=e[u%l],_;for(p=u+1;p<=b.end;p++){const x=e[p%l];_=or(i.setContext(ks(n,{type:"segment",p0:v,p1:x,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:a}))),ib(_,d)&&m(u,p-1,b.loop,d),v=x,d=_}u<p-1&&m(u,p-1,b.loop,d)}return c}function or(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function ib(s,t){if(!t)return!1;const e=[],i=function(n,o){return ea(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(s,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.3
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class nb{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],a=e.duration;o.forEach(r=>r({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(i-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Sc.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let a=o.length-1,r=!1,l;for(;a>=0;--a)l=o[a],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),r=!0):(o[a]=o[o.length-1],o.pop());r&&(n.draw(),this._notify(n,i,t,"progress")),o.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ye=new nb;const ar="transparent",ob={boolean(s,t,e){return e>.5?t:s},color(s,t,e){const i=Ga(s||ar),n=i.valid&&Ga(t||ar);return n&&n.valid?n.mix(i,e).hexString():t},number(s,t,e){return s+(t-s)*e}};class ab{constructor(t,e,i,n){const o=e[i];n=rn([t.to,n,o,t.from]);const a=rn([t.from,o,n]);this._active=!0,this._fn=t.fn||ob[t.type||typeof a],this._easing=Ii[t.easing]||Ii.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,a=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=rn([t.to,e,n,t.from]),this._from=rn([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,o=this._from,a=this._loop,r=this._to;let l;if(this._active=o!==r&&(a||e<i),!this._active){this._target[n]=r,this._notify(!0);return}if(e<0){this._target[n]=o;return}l=e/i%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(o,r,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][e]()}}class Oc{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!At(t))return;const e=Object.keys(Nt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const o=t[n];if(!At(o))return;const a={};for(const r of e)a[r]=o[r];(zt(o.properties)&&o.properties||[n]).forEach(r=>{(r===n||!i.has(r))&&i.set(r,a)})})}_animateOptions(t,e){const i=e.options,n=lb(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&rb(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),r=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,e));continue}const d=e[c];let u=o[c];const p=i.get(c);if(u)if(p&&u.active()){u.update(p,d,r);continue}else u.cancel();if(!p||!p.duration){t[c]=d;continue}o[c]=u=new ab(p,t,c,d),n.push(u)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return Ye.add(this._chart,i),!0}}function rb(s,t){const e=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const o=s[i[n]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function lb(s,t){if(!t)return;let e=s.options;if(!e){s.options=t;return}return e.$shared&&(s.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function rr(s,t){const e=s&&s.options||{},i=e.reverse,n=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:n,end:i?n:o}}function cb(s,t,e){if(e===!1)return!1;const i=rr(s,e),n=rr(t,e);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function db(s){let t,e,i,n;return At(s)?(t=s.top,e=s.right,i=s.bottom,n=s.left):t=e=i=n=s,{top:t,right:e,bottom:i,left:n,disabled:s===!1}}function Fc(s,t){const e=[],i=s._getSortedDatasetMetas(t);let n,o;for(n=0,o=i.length;n<o;++n)e.push(i[n].index);return e}function lr(s,t,e,i={}){const n=s.keys,o=i.mode==="single";let a,r,l,c;if(t!==null){for(a=0,r=n.length;a<r;++a){if(l=+n[a],l===e){if(i.all)continue;break}c=s.values[l],Qt(c)&&(o||t===0||Fe(t)===Fe(c))&&(t+=c)}return t}}function ub(s,t){const{iScale:e,vScale:i}=t,n=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",a=Object.keys(s),r=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],r[l]={[n]:d,[o]:s[d]};return r}function cr(s,t){const e=s&&s.options.stacked;return e||e===void 0&&t.stack!==void 0}function hb(s,t,e){return`${s.id}.${t.id}.${e.stack||e.type}`}function fb(s){const{min:t,max:e,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function pb(s,t,e){const i=s[t]||(s[t]={});return i[e]||(i[e]={})}function dr(s,t,e,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const o=s[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function ur(s,t){const{chart:e,_cachedMeta:i}=s,n=e._stacks||(e._stacks={}),{iScale:o,vScale:a,index:r}=i,l=o.axis,c=a.axis,d=hb(o,a,i),u=t.length;let p;for(let m=0;m<u;++m){const b=t[m],{[l]:v,[c]:_}=b,x=b._stacks||(b._stacks={});p=x[c]=pb(n,d,v),p[r]=_,p._top=dr(p,a,!0,i.type),p._bottom=dr(p,a,!1,i.type);const C=p._visualValues||(p._visualValues={});C[r]=_}}function no(s,t){const e=s.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function mb(s,t){return ks(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function gb(s,t,e){return ks(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function wi(s,t){const e=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){t=t||s._parsed;for(const n of t){const o=n._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const oo=s=>s==="reset"||s==="none",hr=(s,t)=>t?s:Object.assign({},s),wb=(s,t,e)=>s&&!t.hidden&&t._stacked&&{keys:Fc(e,!0),values:null};class Rs{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=cr(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&wi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),n=(u,p,m,b)=>u==="x"?p:u==="r"?b:m,o=e.xAxisID=yt(i.xAxisID,no(t,"x")),a=e.yAxisID=yt(i.yAxisID,no(t,"y")),r=e.rAxisID=yt(i.rAxisID,no(t,"r")),l=e.indexAxis,c=e.iAxisID=n(l,o,a,r),d=e.vAxisID=n(l,a,o,r);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ya(this._data,this),t._stacked&&wi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(At(e)){const n=this._cachedMeta;this._data=ub(e,n)}else if(i!==e){if(i){Ya(i,this);const n=this._cachedMeta;wi(n),n._parsed=[]}e&&Object.isExtensible(e)&&Qv(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=cr(e.vScale,e),e.stack!==i.stack&&(n=!0,wi(e),e.stack=i.stack),this._resyncElements(t),(n||o!==e._stacked)&&ur(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:n}=this,{iScale:o,_stacked:a}=i,r=o.axis;let l=t===0&&e===n.length?!0:i._sorted,c=t>0&&i._parsed[t-1],d,u,p;if(this._parsing===!1)i._parsed=n,i._sorted=!0,p=n;else{zt(n[t])?p=this.parseArrayData(i,n,t,e):At(n[t])?p=this.parseObjectData(i,n,t,e):p=this.parsePrimitiveData(i,n,t,e);const m=()=>u[r]===null||c&&u[r]<c[r];for(d=0;d<e;++d)i._parsed[d+t]=u=p[d],l&&(m()&&(l=!1),c=u);i._sorted=l}a&&ur(this,p)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:a}=t,r=o.axis,l=a.axis,c=o.getLabels(),d=o===a,u=new Array(n);let p,m,b;for(p=0,m=n;p<m;++p)b=p+i,u[p]={[r]:d||o.parse(c[b],b),[l]:a.parse(e[b],b)};return u}parseArrayData(t,e,i,n){const{xScale:o,yScale:a}=t,r=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)d=l+i,u=e[d],r[l]={x:o.parse(u[0],d),y:a.parse(u[1],d)};return r}parseObjectData(t,e,i,n){const{xScale:o,yScale:a}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let d,u,p,m;for(d=0,u=n;d<u;++d)p=d+i,m=e[p],c[d]={x:o.parse(zs(m,r),p),y:a.parse(zs(m,l),p)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,a=e[t.axis],r={keys:Fc(n,!0),values:e._stacks[t.axis]._visualValues};return lr(r,a,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let a=o===null?NaN:o;const r=n&&i._stacks[e.axis];n&&r&&(n.values=r,a=lr(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const i=this._cachedMeta,n=i._parsed,o=i._sorted&&t===i.iScale,a=n.length,r=this._getOtherScale(t),l=wb(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:u}=fb(r);let p,m;function b(){m=n[p];const v=m[r.axis];return!Qt(m[t.axis])||d>v||u<v}for(p=0;p<a&&!(!b()&&(this.updateRangeFromParsed(c,t,m,l),o));++p);if(o){for(p=a-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(c,t,m,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,a;for(n=0,o=e.length;n<o;++n)a=e[n][t.axis],Qt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=db(yt(this.options.clip,cb(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,n=i.data||[],o=e.chartArea,a=[],r=this._drawStart||0,l=this._drawCount||n.length-r,c=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(t,o,r,l),d=r;d<r+l;++d){const u=n[d];u.hidden||(u.active&&c?a.push(u):u.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=gb(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=mb(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n=e==="active",o=this._cachedDataOpts,a=t+"-"+e,r=o[a],l=this.enableOptionSharing&&Ui(i);if(r)return hr(r,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,t),u=n?[`${t}Hover`,"hover",t,""]:[t,""],p=c.getOptionScopes(this.getDataset(),d),m=Object.keys(Nt.elements[t]),b=()=>this.getContext(i,n,e),v=c.resolveNamedOptions(p,m,b,u);return v.$shared&&(v.$shared=l,o[a]=Object.freeze(hr(v,l))),v}_resolveAnimations(t,e,i){const n=this.chart,o=this._cachedDataOpts,a=`animation-${e}`,r=o[a];if(r)return r;let l;if(n.options.animation!==!1){const d=this.chart.config,u=d.datasetAnimationScopeKeys(this._type,e),p=d.getOptionScopes(this.getDataset(),u);l=d.createResolver(p,this.getContext(t,i,e))}const c=new Oc(n,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||oo(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:a}}updateElement(t,e,i,n){oo(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!oo(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[r,l,c]of this._syncList)this[r](l,c);this._syncList=[];const n=i.length,o=e.length,a=Math.min(o,n);a&&this.parse(0,a),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,i=!0){const n=this._cachedMeta,o=n.data,a=t+e;let r;const l=c=>{for(c.length+=e,r=c.length-1;r>=a;r--)c[r]=c[r-e]};for(l(o),r=t;r<a;++r)o[r]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&wi(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}tt(Rs,"defaults",{}),tt(Rs,"datasetElementType",null),tt(Rs,"dataElementType",null);function vb(s,t){if(!s._cache.$bar){const e=s.getMatchingVisibleMetas(t);let i=[];for(let n=0,o=e.length;n<o;n++)i=i.concat(e[n].controller.getAllParsedValues(s));s._cache.$bar=Cc(i.sort((n,o)=>n-o))}return s._cache.$bar}function bb(s){const t=s.iScale,e=vb(t,s.type);let i=t._length,n,o,a,r;const l=()=>{a===32767||a===-32768||(Ui(r)&&(i=Math.min(i,Math.abs(a-r)||i)),r=a)};for(n=0,o=e.length;n<o;++n)a=t.getPixelForValue(e[n]),l();for(r=void 0,n=0,o=t.ticks.length;n<o;++n)a=t.getPixelForTick(n),l();return i}function yb(s,t,e,i){const n=e.barThickness;let o,a;return Vt(n)?(o=t.min*e.categoryPercentage,a=e.barPercentage):(o=n*i,a=1),{chunk:o/i,ratio:a,start:t.pixels[s]-o/2}}function _b(s,t,e,i){const n=t.pixels,o=n[s];let a=s>0?n[s-1]:null,r=s<n.length-1?n[s+1]:null;const l=e.categoryPercentage;a===null&&(a=o-(r===null?t.end-t.start:r-o)),r===null&&(r=o+o-a);const c=o-(o-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/i,ratio:e.barPercentage,start:c}}function kb(s,t,e,i){const n=e.parse(s[0],i),o=e.parse(s[1],i),a=Math.min(n,o),r=Math.max(n,o);let l=a,c=r;Math.abs(a)>Math.abs(r)&&(l=r,c=a),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:o,min:a,max:r}}function Bc(s,t,e,i){return zt(s)?kb(s,t,e,i):t[e.axis]=e.parse(s,i),t}function fr(s,t,e,i){const n=s.iScale,o=s.vScale,a=n.getLabels(),r=n===o,l=[];let c,d,u,p;for(c=e,d=e+i;c<d;++c)p=t[c],u={},u[n.axis]=r||n.parse(a[c],c),l.push(Bc(p,u,o,c));return l}function ao(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function xb(s,t,e){return s!==0?Fe(s):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Cb(s){let t,e,i,n,o;return s.horizontal?(t=s.base>s.x,e="left",i="right"):(t=s.base<s.y,e="bottom",i="top"),t?(n="end",o="start"):(n="start",o="end"),{start:e,end:i,reverse:t,top:n,bottom:o}}function Sb(s,t,e,i){let n=t.borderSkipped;const o={};if(!n){s.borderSkipped=o;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:r,reverse:l,top:c,bottom:d}=Cb(s);n==="middle"&&e&&(s.enableBorderRadius=!0,(e._top||0)===i?n=c:(e._bottom||0)===i?n=d:(o[pr(d,a,r,l)]=!0,n=c)),o[pr(n,a,r,l)]=!0,s.borderSkipped=o}function pr(s,t,e,i){return i?(s=Tb(s,t,e),s=mr(s,e,t)):s=mr(s,t,e),s}function Tb(s,t,e){return s===t?e:s===e?t:s}function mr(s,t,e){return s==="start"?t:s==="end"?e:s}function Db(s,{inflateAmount:t},e){s.inflateAmount=t==="auto"?e===1?.33:0:t}class yn extends Rs{parsePrimitiveData(t,e,i,n){return fr(t,e,i,n)}parseArrayData(t,e,i,n){return fr(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:o,vScale:a}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?r:l,d=a.axis==="x"?r:l,u=[];let p,m,b,v;for(p=i,m=i+n;p<m;++p)v=e[p],b={},b[o.axis]=o.parse(zs(v,c),p),u.push(Bc(zs(v,d),b,a,p));return u}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,o=this.getParsed(t),a=o._custom,r=ao(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const o=n==="reset",{index:a,_cachedMeta:{vScale:r}}=this,l=r.getBasePixel(),c=r.isHorizontal(),d=this._getRuler(),{sharedOptions:u,includeOptions:p}=this._getSharedOptions(e,n);for(let m=e;m<e+i;m++){const b=this.getParsed(m),v=o||Vt(b[r.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),_=this._calculateBarIndexPixels(m,d),x=(b._stacks||{})[r.axis],C={horizontal:c,base:v.base,enableBorderRadius:!x||ao(b._custom)||a===x._top||a===x._bottom,x:c?v.head:_.center,y:c?_.center:v.head,height:c?_.size:Math.abs(v.size),width:c?Math.abs(v.size):_.size};p&&(C.options=u||this.resolveDataElementOptions(m,t[m].active?"active":n));const T=C.options||t[m].options;Sb(C,T,x,a),Db(C,T,d.ratio),this.updateElement(t[m],m,C,n)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,a=[],r=l=>{const c=l.controller.getParsed(e),d=c&&c[l.vScale.axis];if(Vt(d)||isNaN(d))return!0};for(const l of n)if(!(e!==void 0&&r(l))&&((o===!1||a.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&a.push(l.stack),l.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),o=e!==void 0?n.indexOf(e):-1;return o===-1?n.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,n=[];let o,a;for(o=0,a=e.data.length;o<a;++o)n.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const r=t.barThickness;return{min:r||bb(e),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:n},options:{base:o,minBarLength:a}}=this,r=o||0,l=this.getParsed(t),c=l._custom,d=ao(c);let u=l[e.axis],p=0,m=i?this.applyStack(e,l,i):u,b,v;m!==u&&(p=m-u,m=u),d&&(u=c.barStart,m=c.barEnd-c.barStart,u!==0&&Fe(u)!==Fe(c.barEnd)&&(p=0),p+=u);const _=!Vt(o)&&!d?o:p;let x=e.getPixelForValue(_);if(this.chart.getDataVisibility(t)?b=e.getPixelForValue(p+m):b=x,v=b-x,Math.abs(v)<a){v=xb(v,e,r)*a,u===r&&(x-=v/2);const C=e.getPixelForDecimal(0),T=e.getPixelForDecimal(1),$=Math.min(C,T),k=Math.max(C,T);x=Math.max(Math.min(x,k),$),b=x+v,i&&!d&&(l._stacks[e.axis]._visualValues[n]=e.getValueForPixel(b)-e.getValueForPixel(x))}if(x===e.getPixelForValue(r)){const C=Fe(v)*e.getLineWidthForValue(r)/2;x+=C,v-=C}return{size:v,base:x,head:b,center:b+v/2}}_calculateBarIndexPixels(t,e){const i=e.scale,n=this.options,o=n.skipNull,a=yt(n.maxBarThickness,1/0);let r,l;if(e.grouped){const c=o?this._getStackCount(t):e.stackCount,d=n.barThickness==="flex"?_b(t,e,n,c):yb(t,e,n,c),u=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);r=d.start+d.chunk*u+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else r=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,e.min*e.ratio);return{base:r-l/2,head:r+l/2,center:r,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,n=i.length;let o=0;for(;o<n;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}tt(yn,"id","bar"),tt(yn,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),tt(yn,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Ab(s,t,e){let i=1,n=1,o=0,a=0;if(t<Ot){const r=s,l=r+t,c=Math.cos(r),d=Math.sin(r),u=Math.cos(l),p=Math.sin(l),m=(T,$,k)=>Ni(T,r,l,!0)?1:Math.max($,$*e,k,k*e),b=(T,$,k)=>Ni(T,r,l,!0)?-1:Math.min($,$*e,k,k*e),v=m(0,c,u),_=m(qt,d,p),x=b(Bt,c,u),C=b(Bt+qt,d,p);i=(v-x)/2,n=(_-C)/2,o=-(v+x)/2,a=-(_+C)/2}return{ratioX:i,ratioY:n,offsetX:o,offsetY:a}}class Ci extends Rs{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let o=l=>+i[l];if(At(i[t])){const{key:l="value"}=this._parsing;o=c=>+zs(i[c],l)}let a,r;for(a=t,r=t+e;a<r;++a)n._parsed[a]=o(a)}}_getRotation(){return ze(this.options.rotation-90)}_getCircumference(){return ze(this.options.circumference)}_getRotationExtents(){let t=Ot,e=-Ot;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,o=n._getRotation(),a=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,n=this._cachedMeta,o=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(Ov(this.options.cutout,r),1),c=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:b,offsetY:v}=Ab(u,d,l),_=(i.width-a)/p,x=(i.height-a)/m,C=Math.max(Math.min(_,x)/2,0),T=bc(this.options.radius,C),$=Math.max(T*l,0),k=(T-$)/this._getVisibleDatasetWeightTotal();this.offsetX=b*T,this.offsetY=v*T,n.total=this.calculateTotal(),this.outerRadius=T-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/Ot)}updateElements(t,e,i,n){const o=n==="reset",a=this.chart,r=a.chartArea,c=a.options.animation,d=(r.left+r.right)/2,u=(r.top+r.bottom)/2,p=o&&c.animateScale,m=p?0:this.innerRadius,b=p?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(e,n);let x=this._getRotation(),C;for(C=0;C<e;++C)x+=this._circumference(C,o);for(C=e;C<e+i;++C){const T=this._circumference(C,o),$=t[C],k={x:d+this.offsetX,y:u+this.offsetY,startAngle:x,endAngle:x+T,circumference:T,outerRadius:b,innerRadius:m};_&&(k.options=v||this.resolveDataElementOptions(C,$.active?"active":n)),x+=T,this.updateElement($,C,k,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,n;for(n=0;n<e.length;n++){const o=t._parsed[n];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!e[n].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Ot*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=Xn(e._parsed[t],i.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let n,o,a,r,l;if(!t){for(n=0,o=i.data.datasets.length;n<o;++n)if(i.isDatasetVisible(n)){a=i.getDatasetMeta(n),t=a.data,r=a.controller;break}}if(!t)return 0;for(n=0,o=t.length;n<o;++n)l=r.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(yt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}tt(Ci,"id","doughnut"),tt(Ci,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),tt(Ci,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),tt(Ci,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:n}}=t.legend.options;return e.labels.map((o,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class _n extends Rs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:n=[],_dataset:o}=e,a=this.chart._animationsDisabled;let{start:r,count:l}=e2(e,n,a);this._drawStart=r,this._drawCount=l,s2(e)&&(r=0,l=n.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:c},t),this.updateElements(n,r,l,t)}updateElements(t,e,i,n){const o=n==="reset",{iScale:a,vScale:r,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:u}=this._getSharedOptions(e,n),p=a.axis,m=r.axis,{spanGaps:b,segment:v}=this.options,_=Hi(b)?b:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||n==="none",C=e+i,T=t.length;let $=e>0&&this.getParsed(e-1);for(let k=0;k<T;++k){const A=t[k],P=x?A:{};if(k<e||k>=C){P.skip=!0;continue}const z=this.getParsed(k),j=Vt(z[m]),V=P[p]=a.getPixelForValue(z[p],k),O=P[m]=o||j?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,z,l):z[m],k);P.skip=isNaN(V)||isNaN(O)||j,P.stop=k>0&&Math.abs(z[p]-$[p])>_,v&&(P.parsed=z,P.raw=c.data[k]),u&&(P.options=d||this.resolveDataElementOptions(k,A.active?"active":n)),x||this.updateElement(A,k,P,n),$=z}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return i;const o=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}tt(_n,"id","line"),tt(_n,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),tt(_n,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ds(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class da{constructor(t){tt(this,"options");this.options=t||{}}static override(t){Object.assign(da.prototype,t)}init(){}formats(){return Ds()}parse(){return Ds()}format(){return Ds()}add(){return Ds()}diff(){return Ds()}startOf(){return Ds()}endOf(){return Ds()}}var $b={_date:da};function Mb(s,t,e,i){const{controller:n,data:o,_sorted:a}=s,r=n._cachedMeta.iScale;if(r&&t===r.axis&&t!=="r"&&a&&o.length){const l=r._reversePixels?Gv:Vs;if(i){if(n._sharedOptions){const c=o[0],d=typeof c.getRange=="function"&&c.getRange(t);if(d){const u=l(o,t,e-d),p=l(o,t,e+d);return{lo:u.lo,hi:p.hi}}}}else return l(o,t,e)}return{lo:0,hi:o.length-1}}function Ji(s,t,e,i,n){const o=s.getSortedVisibleDatasetMetas(),a=e[t];for(let r=0,l=o.length;r<l;++r){const{index:c,data:d}=o[r],{lo:u,hi:p}=Mb(o[r],t,a,n);for(let m=u;m<=p;++m){const b=d[m];b.skip||i(b,c,m)}}}function Pb(s){const t=s.indexOf("x")!==-1,e=s.indexOf("y")!==-1;return function(i,n){const o=t?Math.abs(i.x-n.x):0,a=e?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function ro(s,t,e,i,n){const o=[];return!n&&!s.isPointInArea(t)||Ji(s,e,t,function(r,l,c){!n&&!es(r,s.chartArea,0)||r.inRange(t.x,t.y,i)&&o.push({element:r,datasetIndex:l,index:c})},!0),o}function Ib(s,t,e,i){let n=[];function o(a,r,l){const{startAngle:c,endAngle:d}=a.getProps(["startAngle","endAngle"],i),{angle:u}=kc(a,{x:t.x,y:t.y});Ni(u,c,d)&&n.push({element:a,datasetIndex:r,index:l})}return Ji(s,e,t,o),n}function Vb(s,t,e,i,n,o){let a=[];const r=Pb(e);let l=Number.POSITIVE_INFINITY;function c(d,u,p){const m=d.inRange(t.x,t.y,n);if(i&&!m)return;const b=d.getCenterPoint(n);if(!(!!o||s.isPointInArea(b))&&!m)return;const _=r(t,b);_<l?(a=[{element:d,datasetIndex:u,index:p}],l=_):_===l&&a.push({element:d,datasetIndex:u,index:p})}return Ji(s,e,t,c),a}function lo(s,t,e,i,n,o){return!o&&!s.isPointInArea(t)?[]:e==="r"&&!i?Ib(s,t,e,n):Vb(s,t,e,i,n,o)}function gr(s,t,e,i,n){const o=[],a=e==="x"?"inXRange":"inYRange";let r=!1;return Ji(s,e,t,(l,c,d)=>{l[a](t[e],n)&&(o.push({element:l,datasetIndex:c,index:d}),r=r||l.inRange(t.x,t.y,n))}),i&&!r?[]:o}var Lb={evaluateInteractionItems:Ji,modes:{index(s,t,e,i){const n=Ms(t,s),o=e.axis||"x",a=e.includeInvisible||!1,r=e.intersect?ro(s,n,o,i,a):lo(s,n,o,!1,i,a),l=[];return r.length?(s.getSortedVisibleDatasetMetas().forEach(c=>{const d=r[0].index,u=c.data[d];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:d})}),l):[]},dataset(s,t,e,i){const n=Ms(t,s),o=e.axis||"xy",a=e.includeInvisible||!1;let r=e.intersect?ro(s,n,o,i,a):lo(s,n,o,!1,i,a);if(r.length>0){const l=r[0].datasetIndex,c=s.getDatasetMeta(l).data;r=[];for(let d=0;d<c.length;++d)r.push({element:c[d],datasetIndex:l,index:d})}return r},point(s,t,e,i){const n=Ms(t,s),o=e.axis||"xy",a=e.includeInvisible||!1;return ro(s,n,o,i,a)},nearest(s,t,e,i){const n=Ms(t,s),o=e.axis||"xy",a=e.includeInvisible||!1;return lo(s,n,o,e.intersect,i,a)},x(s,t,e,i){const n=Ms(t,s);return gr(s,n,"x",e.intersect,i)},y(s,t,e,i){const n=Ms(t,s);return gr(s,n,"y",e.intersect,i)}}};const Uc=["left","top","right","bottom"];function vi(s,t){return s.filter(e=>e.pos===t)}function wr(s,t){return s.filter(e=>Uc.indexOf(e.pos)===-1&&e.box.axis===t)}function bi(s,t){return s.sort((e,i)=>{const n=t?i:e,o=t?e:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function Eb(s){const t=[];let e,i,n,o,a,r;for(e=0,i=(s||[]).length;e<i;++e)n=s[e],{position:o,options:{stack:a,stackWeight:r=1}}=n,t.push({index:e,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&o+a,stackWeight:r});return t}function Rb(s){const t={};for(const e of s){const{stack:i,pos:n,stackWeight:o}=e;if(!i||!Uc.includes(n))continue;const a=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return t}function zb(s,t){const e=Rb(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let o,a,r;for(o=0,a=s.length;o<a;++o){r=s[o];const{fullSize:l}=r.box,c=e[r.stack],d=c&&r.stackWeight/c.weight;r.horizontal?(r.width=d?d*i:l&&t.availableWidth,r.height=n):(r.width=i,r.height=d?d*n:l&&t.availableHeight)}return e}function Ob(s){const t=Eb(s),e=bi(t.filter(c=>c.box.fullSize),!0),i=bi(vi(t,"left"),!0),n=bi(vi(t,"right")),o=bi(vi(t,"top"),!0),a=bi(vi(t,"bottom")),r=wr(t,"x"),l=wr(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:n.concat(l).concat(a).concat(r),chartArea:vi(t,"chartArea"),vertical:i.concat(n).concat(l),horizontal:o.concat(a).concat(r)}}function vr(s,t,e,i){return Math.max(s[e],t[e])+Math.max(s[i],t[i])}function Hc(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function Fb(s,t,e,i){const{pos:n,box:o}=e,a=s.maxPadding;if(!At(n)){e.size&&(s[n]-=e.size);const u=i[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?o.height:o.width),e.size=u.size/u.count,s[n]+=e.size}o.getPadding&&Hc(a,o.getPadding());const r=Math.max(0,t.outerWidth-vr(a,s,"left","right")),l=Math.max(0,t.outerHeight-vr(a,s,"top","bottom")),c=r!==s.w,d=l!==s.h;return s.w=r,s.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function Bb(s){const t=s.maxPadding;function e(i){const n=Math.max(t[i]-s[i],0);return s[i]+=n,n}s.y+=e("top"),s.x+=e("left"),e("right"),e("bottom")}function Ub(s,t){const e=t.maxPadding;function i(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{o[a]=Math.max(t[a],e[a])}),o}return i(s?["left","right"]:["top","bottom"])}function Si(s,t,e,i){const n=[];let o,a,r,l,c,d;for(o=0,a=s.length,c=0;o<a;++o){r=s[o],l=r.box,l.update(r.width||t.w,r.height||t.h,Ub(r.horizontal,t));const{same:u,other:p}=Fb(t,e,r,i);c|=u&&n.length,d=d||p,l.fullSize||n.push(r)}return c&&Si(n,t,e,i)||d}function dn(s,t,e,i,n){s.top=e,s.left=t,s.right=t+i,s.bottom=e+n,s.width=i,s.height=n}function br(s,t,e,i){const n=e.padding;let{x:o,y:a}=t;for(const r of s){const l=r.box,c=i[r.stack]||{count:1,placed:0,weight:1},d=r.stackWeight/c.weight||1;if(r.horizontal){const u=t.w*d,p=c.size||l.height;Ui(c.start)&&(a=c.start),l.fullSize?dn(l,n.left,a,e.outerWidth-n.right-n.left,p):dn(l,t.left+c.placed,a,u,p),c.start=a,c.placed+=u,a=l.bottom}else{const u=t.h*d,p=c.size||l.width;Ui(c.start)&&(o=c.start),l.fullSize?dn(l,o,n.top,p,e.outerHeight-n.bottom-n.top):dn(l,o,t.top+c.placed,p,u),c.start=o,c.placed+=u,o=l.right}}t.x=o,t.y=a}var Ce={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},s.boxes.push(t)},removeBox(s,t){const e=s.boxes?s.boxes.indexOf(t):-1;e!==-1&&s.boxes.splice(e,1)},configure(s,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(s,t,e,i){if(!s)return;const n=ae(s.options.layout.padding),o=Math.max(t-n.width,0),a=Math.max(e-n.height,0),r=Ob(s.boxes),l=r.vertical,c=r.horizontal;It(s.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const d=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/d,hBoxMaxHeight:a/2}),p=Object.assign({},n);Hc(p,ae(i));const m=Object.assign({maxPadding:p,w:o,h:a,x:n.left,y:n.top},n),b=zb(l.concat(c),u);Si(r.fullSize,m,u,b),Si(l,m,u,b),Si(c,m,u,b)&&Si(l,m,u,b),Bb(m),br(r.leftAndTop,m,u,b),m.x+=m.w,m.y+=m.h,br(r.rightAndBottom,m,u,b),s.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},It(r.chartArea,v=>{const _=v.box;Object.assign(_,s.chartArea),_.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Nc{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class Hb extends Nc{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const kn="$chartjs",Nb={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yr=s=>s===null||s==="";function jb(s,t){const e=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[kn]={initial:{height:i,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",yr(n)){const o=sr(s,"width");o!==void 0&&(s.width=o)}if(yr(i))if(s.style.height==="")s.height=s.width/(t||2);else{const o=sr(s,"height");o!==void 0&&(s.height=o)}return s}const jc=W2?{passive:!0}:!1;function Wb(s,t,e){s&&s.addEventListener(t,e,jc)}function qb(s,t,e){s&&s.canvas&&s.canvas.removeEventListener(t,e,jc)}function Yb(s,t){const e=Nb[s.type]||s.type,{x:i,y:n}=Ms(s,t);return{type:e,chart:t,native:s,x:i!==void 0?i:null,y:n!==void 0?n:null}}function En(s,t){for(const e of s)if(e===t||e.contains(t))return!0}function Kb(s,t,e){const i=s.canvas,n=new MutationObserver(o=>{let a=!1;for(const r of o)a=a||En(r.addedNodes,i),a=a&&!En(r.removedNodes,i);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function Xb(s,t,e){const i=s.canvas,n=new MutationObserver(o=>{let a=!1;for(const r of o)a=a||En(r.removedNodes,i),a=a&&!En(r.addedNodes,i);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Wi=new Map;let _r=0;function Wc(){const s=window.devicePixelRatio;s!==_r&&(_r=s,Wi.forEach((t,e)=>{e.currentDevicePixelRatio!==s&&t()}))}function Gb(s,t){Wi.size||window.addEventListener("resize",Wc),Wi.set(s,t)}function Zb(s){Wi.delete(s),Wi.size||window.removeEventListener("resize",Wc)}function Qb(s,t,e){const i=s.canvas,n=i&&ca(i);if(!n)return;const o=Tc((r,l)=>{const c=n.clientWidth;e(r,l),c<n.clientWidth&&e()},window),a=new ResizeObserver(r=>{const l=r[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return a.observe(n),Gb(s,o),a}function co(s,t,e){e&&e.disconnect(),t==="resize"&&Zb(s)}function Jb(s,t,e){const i=s.canvas,n=Tc(o=>{s.ctx!==null&&e(Yb(o,s))},s);return Wb(i,t,n),n}class ty extends Nc{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(jb(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[kn])return!1;const i=e[kn].initial;["height","width"].forEach(o=>{const a=i[o];Vt(a)?e.removeAttribute(o):e.setAttribute(o,a)});const n=i.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[kn],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),a={attach:Kb,detach:Xb,resize:Qb}[e]||Jb;n[e]=a(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:co,detach:co,resize:co}[e]||qb)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return j2(t,e,i,n)}isAttached(t){const e=t&&ca(t);return!!(e&&e.isConnected)}}function ey(s){return!la()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Hb:ty}class Me{constructor(){tt(this,"x");tt(this,"y");tt(this,"active",!1);tt(this,"options");tt(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Hi(this.x)&&Hi(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach(o=>{n[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),n}}tt(Me,"defaults",{}),tt(Me,"defaultRoutes");function sy(s,t){const e=s.options.ticks,i=iy(s),n=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?oy(t):[],a=o.length,r=o[0],l=o[a-1],c=[];if(a>n)return ay(t,c,o,a/n),c;const d=ny(o,t,n);if(a>0){let u,p;const m=a>1?Math.round((l-r)/(a-1)):null;for(un(t,c,d,Vt(m)?0:r-m,r),u=0,p=a-1;u<p;u++)un(t,c,d,o[u],o[u+1]);return un(t,c,d,l,Vt(m)?t.length:l+m),c}return un(t,c,d),c}function iy(s){const t=s.options.offset,e=s._tickSize(),i=s._length/e+(t?0:1),n=s._maxLength/e;return Math.floor(Math.min(i,n))}function ny(s,t,e){const i=ry(s),n=t.length/e;if(!i)return Math.max(n,1);const o=qv(i);for(let a=0,r=o.length-1;a<r;a++){const l=o[a];if(l>n)return l}return Math.max(n,1)}function oy(s){const t=[];let e,i;for(e=0,i=s.length;e<i;e++)s[e].major&&t.push(e);return t}function ay(s,t,e,i){let n=0,o=e[0],a;for(i=Math.ceil(i),a=0;a<s.length;a++)a===o&&(t.push(s[a]),n++,o=e[n*i])}function un(s,t,e,i,n){const o=yt(i,0),a=Math.min(yt(n,s.length),s.length);let r=0,l,c,d;for(e=Math.ceil(e),n&&(l=n-i,e=l/Math.floor(l/e)),d=o;d<0;)r++,d=Math.round(o+r*e);for(c=Math.max(o,0);c<a;c++)c===d&&(t.push(s[c]),r++,d=Math.round(o+r*e))}function ry(s){const t=s.length;let e,i;if(t<2)return!1;for(i=s[0],e=1;e<t;++e)if(s[e]-s[e-1]!==i)return!1;return i}const ly=s=>s==="left"?"right":s==="right"?"left":s,kr=(s,t,e)=>t==="top"||t==="left"?s[t]+e:s[t]-e,xr=(s,t)=>Math.min(t||s,s);function Cr(s,t){const e=[],i=s.length/t,n=s.length;let o=0;for(;o<n;o+=i)e.push(s[Math.floor(o)]);return e}function cy(s,t,e){const i=s.ticks.length,n=Math.min(t,i-1),o=s._startPixel,a=s._endPixel,r=1e-6;let l=s.getPixelForTick(n),c;if(!(e&&(i===1?c=Math.max(l-o,a-l):t===0?c=(s.getPixelForTick(1)-l)/2:c=(l-s.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<o-r||l>a+r)))return l}function dy(s,t){It(s,e=>{const i=e.gc,n=i.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[i[o]];i.splice(0,n)}})}function yi(s){return s.drawTicks?s.tickLength:0}function Sr(s,t){if(!s.display)return 0;const e=Xt(s.font,t),i=ae(s.padding);return(zt(s.text)?s.text.length:1)*e.lineHeight+i.height}function uy(s,t){return ks(s,{scale:t,type:"scale"})}function hy(s,t,e){return ks(s,{tick:e,index:t,type:"tick"})}function fy(s,t,e){let i=ta(s);return(e&&t!=="right"||!e&&t==="right")&&(i=ly(i)),i}function py(s,t,e,i){const{top:n,left:o,bottom:a,right:r,chart:l}=s,{chartArea:c,scales:d}=l;let u=0,p,m,b;const v=a-n,_=r-o;if(s.isHorizontal()){if(m=ie(i,o,r),At(e)){const x=Object.keys(e)[0],C=e[x];b=d[x].getPixelForValue(C)+v-t}else e==="center"?b=(c.bottom+c.top)/2+v-t:b=kr(s,e,t);p=r-o}else{if(At(e)){const x=Object.keys(e)[0],C=e[x];m=d[x].getPixelForValue(C)-_+t}else e==="center"?m=(c.left+c.right)/2-_+t:m=kr(s,e,t);b=ie(i,a,n),u=e==="left"?-qt:qt}return{titleX:m,titleY:b,maxWidth:p,rotation:u}}class Ws extends Me{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=ge(t,Number.POSITIVE_INFINITY),e=ge(e,Number.NEGATIVE_INFINITY),i=ge(i,Number.POSITIVE_INFINITY),n=ge(n,Number.NEGATIVE_INFINITY),{min:ge(t,i),max:ge(e,n),minDefined:Qt(t),maxDefined:Qt(e)}}getMinMax(t){let{min:e,max:i,minDefined:n,maxDefined:o}=this.getUserBounds(),a;if(n&&o)return{min:e,max:i};const r=this.getMatchingVisibleMetas();for(let l=0,c=r.length;l<c;++l)a=r[l].controller.getMinMax(this,t),n||(e=Math.min(e,a.min)),o||(i=Math.max(i,a.max));return e=o&&e>i?i:e,i=n&&e>i?e:i,{min:ge(e,ge(i,e)),max:ge(i,ge(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Rt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:o,ticks:a}=this.options,r=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=k2(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=r<this.ticks.length;this._convertTicksToLabels(l?Cr(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=sy(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Rt(this.options.afterUpdate,[this])}beforeSetDimensions(){Rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Rt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Rt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,o;for(i=0,n=t.length;i<n;i++)o=t[i],o.label=Rt(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){Rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=xr(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation;let a=n,r,l,c;if(!this._isVisible()||!e.display||n>=o||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const d=this._getLabelSizes(),u=d.widest.width,p=d.highest.height,m=ne(this.chart.width-u,0,this.maxWidth);r=t.offset?this.maxWidth/i:m/(i-1),u+6>r&&(r=m/(i-(t.offset?.5:1)),l=this.maxHeight-yi(t.grid)-e.padding-Sr(t.title,this.chart.options.font),c=Math.sqrt(u*u+p*p),a=Qo(Math.min(Math.asin(ne((d.highest.height+6)/r,-1,1)),Math.asin(ne(l/c,-1,1))-Math.asin(ne(p/c,-1,1)))),a=Math.max(n,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){Rt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Rt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:o}}=this,a=this._isVisible(),r=this.isHorizontal();if(a){const l=Sr(n,e.options.font);if(r?(t.width=this.maxWidth,t.height=yi(o)+l):(t.height=this.maxHeight,t.width=yi(o)+l),i.display&&this.ticks.length){const{first:c,last:d,widest:u,highest:p}=this._getLabelSizes(),m=i.padding*2,b=ze(this.labelRotation),v=Math.cos(b),_=Math.sin(b);if(r){const x=i.mirror?0:_*u.width+v*p.height;t.height=Math.min(this.maxHeight,t.height+x+m)}else{const x=i.mirror?0:v*u.width+_*p.height;t.width=Math.min(this.maxWidth,t.width+x+m)}this._calculatePadding(c,d,_,v)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:o,padding:a},position:r}=this.options,l=this.labelRotation!==0,c=r!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=n*t.width,m=i*e.height):(p=i*t.height,m=n*e.width):o==="start"?m=e.width:o==="end"?p=t.width:o!=="inner"&&(p=t.width/2,m=e.width/2),this.paddingLeft=Math.max((p-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-u+a)*this.width/(this.width-u),0)}else{let d=e.height/2,u=t.height/2;o==="start"?(d=0,u=t.height):o==="end"&&(d=e.height,u=0),this.paddingTop=d+a,this.paddingBottom=u+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Rt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Vt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Cr(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:n,_longestTextCache:o}=this,a=[],r=[],l=Math.floor(e/xr(e,i));let c=0,d=0,u,p,m,b,v,_,x,C,T,$,k;for(u=0;u<e;u+=l){if(b=t[u].label,v=this._resolveTickFontOptions(u),n.font=_=v.string,x=o[_]=o[_]||{data:{},gc:[]},C=v.lineHeight,T=$=0,!Vt(b)&&!zt(b))T=Vn(n,x.data,x.gc,T,b),$=C;else if(zt(b))for(p=0,m=b.length;p<m;++p)k=b[p],!Vt(k)&&!zt(k)&&(T=Vn(n,x.data,x.gc,T,k),$+=C);a.push(T),r.push($),c=Math.max(T,c),d=Math.max($,d)}dy(o,e);const A=a.indexOf(c),P=r.indexOf(d),z=j=>({width:a[j]||0,height:r[j]||0});return{first:z(0),last:z(e-1),widest:z(A),highest:z(P),widths:a,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Xv(this._alignToPixels?Ts(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=hy(this.getContext(),t,i))}return this.$context||(this.$context=uy(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ze(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),a=t.autoSkipPadding||0,r=o?o.widest.width+a:0,l=o?o.highest.height+a:0;return this.isHorizontal()?l*i>r*n?r/i:l/n:l*n<r*i?l/i:r/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:o,position:a,border:r}=n,l=o.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),p=yi(o),m=[],b=r.setContext(this.getContext()),v=b.display?b.width:0,_=v/2,x=function(K){return Ts(i,K,v)};let C,T,$,k,A,P,z,j,V,O,B,U;if(a==="top")C=x(this.bottom),P=this.bottom-p,j=C-_,O=x(t.top)+_,U=t.bottom;else if(a==="bottom")C=x(this.top),O=t.top,U=x(t.bottom)-_,P=C+_,j=this.top+p;else if(a==="left")C=x(this.right),A=this.right-p,z=C-_,V=x(t.left)+_,B=t.right;else if(a==="right")C=x(this.left),V=t.left,B=x(t.right)-_,A=C+_,z=this.left+p;else if(e==="x"){if(a==="center")C=x((t.top+t.bottom)/2+.5);else if(At(a)){const K=Object.keys(a)[0],G=a[K];C=x(this.chart.scales[K].getPixelForValue(G))}O=t.top,U=t.bottom,P=C+_,j=P+p}else if(e==="y"){if(a==="center")C=x((t.left+t.right)/2);else if(At(a)){const K=Object.keys(a)[0],G=a[K];C=x(this.chart.scales[K].getPixelForValue(G))}A=C-_,z=A-p,V=t.left,B=t.right}const H=yt(n.ticks.maxTicksLimit,u),J=Math.max(1,Math.ceil(u/H));for(T=0;T<u;T+=J){const K=this.getContext(T),G=o.setContext(K),ot=r.setContext(K),et=G.lineWidth,ct=G.color,it=ot.dash||[],W=ot.dashOffset,wt=G.tickWidth,at=G.tickColor,rt=G.tickBorderDash||[],E=G.tickBorderDashOffset;$=cy(this,T,l),$!==void 0&&(k=Ts(i,$,et),c?A=z=V=B=k:P=j=O=U=k,m.push({tx1:A,ty1:P,tx2:z,ty2:j,x1:V,y1:O,x2:B,y2:U,width:et,color:ct,borderDash:it,borderDashOffset:W,tickWidth:wt,tickColor:at,tickBorderDash:rt,tickBorderDashOffset:E}))}return this._ticksLength=u,this._borderValue=C,m}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:o}=i,a=this.isHorizontal(),r=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=o,p=yi(i.grid),m=p+d,b=u?-d:m,v=-ze(this.labelRotation),_=[];let x,C,T,$,k,A,P,z,j,V,O,B,U="middle";if(n==="top")A=this.bottom-b,P=this._getXAxisLabelAlignment();else if(n==="bottom")A=this.top+b,P=this._getXAxisLabelAlignment();else if(n==="left"){const J=this._getYAxisLabelAlignment(p);P=J.textAlign,k=J.x}else if(n==="right"){const J=this._getYAxisLabelAlignment(p);P=J.textAlign,k=J.x}else if(e==="x"){if(n==="center")A=(t.top+t.bottom)/2+m;else if(At(n)){const J=Object.keys(n)[0],K=n[J];A=this.chart.scales[J].getPixelForValue(K)+m}P=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")k=(t.left+t.right)/2-m;else if(At(n)){const J=Object.keys(n)[0],K=n[J];k=this.chart.scales[J].getPixelForValue(K)}P=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));const H=this._getLabelSizes();for(x=0,C=r.length;x<C;++x){T=r[x],$=T.label;const J=o.setContext(this.getContext(x));z=this.getPixelForTick(x)+o.labelOffset,j=this._resolveTickFontOptions(x),V=j.lineHeight,O=zt($)?$.length:1;const K=O/2,G=J.color,ot=J.textStrokeColor,et=J.textStrokeWidth;let ct=P;a?(k=z,P==="inner"&&(x===C-1?ct=this.options.reverse?"left":"right":x===0?ct=this.options.reverse?"right":"left":ct="center"),n==="top"?c==="near"||v!==0?B=-O*V+V/2:c==="center"?B=-H.highest.height/2-K*V+V:B=-H.highest.height+V/2:c==="near"||v!==0?B=V/2:c==="center"?B=H.highest.height/2-K*V:B=H.highest.height-O*V,u&&(B*=-1),v!==0&&!J.showLabelBackdrop&&(k+=V/2*Math.sin(v))):(A=z,B=(1-O)*V/2);let it;if(J.showLabelBackdrop){const W=ae(J.backdropPadding),wt=H.heights[x],at=H.widths[x];let rt=B-W.top,E=0-W.left;switch(U){case"middle":rt-=wt/2;break;case"bottom":rt-=wt;break}switch(P){case"center":E-=at/2;break;case"right":E-=at;break;case"inner":x===C-1?E-=at:x>0&&(E-=at/2);break}it={left:E,top:rt,width:at+W.width,height:wt+W.height,color:J.backdropColor}}_.push({label:$,font:j,textOffset:B,options:{rotation:v,color:G,strokeColor:ot,strokeWidth:et,textAlign:ct,textBaseline:U,translation:[k,A],backdrop:it}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ze(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,a=this._getLabelSizes(),r=t+o,l=a.widest.width;let c,d;return e==="left"?n?(d=this.right+o,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-r,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?n?(d=this.left+o,i==="near"?c="right":i==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+r,i==="near"?c="left":i==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(o=>o.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,a;const r=(l,c,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(o=0,a=n.length;o<a;++o){const l=n[o];e.drawOnChartArea&&r({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&r({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),a=i.display?o.width:0;if(!a)return;const r=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,u,p;this.isHorizontal()?(c=Ts(t,this.left,a)-a/2,d=Ts(t,this.right,r)+r/2,u=p=l):(u=Ts(t,this.top,a)-a/2,p=Ts(t,this.bottom,r)+r/2,c=d=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,u),e.lineTo(d,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&sa(i,n);const o=this.getLabelItems(t);for(const a of o){const r=a.options,l=a.font,c=a.label,d=a.textOffset;Fs(i,c,0,d,l,r)}n&&ia(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const o=Xt(i.font),a=ae(i.padding),r=i.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||At(e)?(l+=a.bottom,zt(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=a.top;const{titleX:c,titleY:d,maxWidth:u,rotation:p}=py(this,l,e,r);Fs(t,i.text,0,0,o,{color:i.color,maxWidth:u,rotation:p,textAlign:fy(r,e,n),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=yt(t.grid&&t.grid.z,-1),n=yt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ws.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,a;for(o=0,a=e.length;o<a;++o){const r=e[o];r[i]===this.id&&(!t||r.type===t)&&n.push(r)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Xt(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class hn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;wy(e)&&(i=this.register(e));const n=this.items,o=t.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,my(t,a,i),this.override&&Nt.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in Nt[n]&&(delete Nt[n][i],this.override&&delete Os[i])}}function my(s,t,e){const i=Bi(Object.create(null),[e?Nt.get(e):{},Nt.get(t),s.defaults]);Nt.set(t,i),s.defaultRoutes&&gy(t,s.defaultRoutes),s.descriptors&&Nt.describe(t,s.descriptors)}function gy(s,t){Object.keys(t).forEach(e=>{const i=e.split("."),n=i.pop(),o=[s].concat(i).join("."),a=t[e].split("."),r=a.pop(),l=a.join(".");Nt.route(o,n,l,r)})}function wy(s){return"id"in s&&"defaults"in s}class vy{constructor(){this.controllers=new hn(Rs,"datasets",!0),this.elements=new hn(Me,"elements"),this.plugins=new hn(Object,"plugins"),this.scales=new hn(Ws,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(n=>{const o=i||this._getRegistryForType(n);i||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):It(n,a=>{const r=i||this._getRegistryForType(a);this._exec(t,r,a)})})}_exec(t,e,i){const n=Zo(t);Rt(i["before"+n],[],i),e[t](i),Rt(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var Ee=new vy;class by{constructor(){this._init=[]}notify(t,e,i,n){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=n?this._descriptors(t).filter(n):this._descriptors(t),a=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),a}_notify(t,e,i,n){n=n||{};for(const o of t){const a=o.plugin,r=a[i],l=[e,n,o.options];if(Rt(r,l,a)===!1&&n.cancelable)return!1}return!0}invalidate(){Vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=yt(i.options&&i.options.plugins,{}),o=yy(i);return n===!1&&!e?[]:ky(t,o,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(o,a)=>o.filter(r=>!a.some(l=>r.plugin.id===l.plugin.id));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function yy(s){const t={},e=[],i=Object.keys(Ee.plugins.items);for(let o=0;o<i.length;o++)e.push(Ee.getPlugin(i[o]));const n=s.plugins||[];for(let o=0;o<n.length;o++){const a=n[o];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function _y(s,t){return!t&&s===!1?null:s===!0?{}:s}function ky(s,{plugins:t,localIds:e},i,n){const o=[],a=s.getContext();for(const r of t){const l=r.id,c=_y(i[l],n);c!==null&&o.push({plugin:r,options:xy(s.config,{plugin:r,local:e[l]},c,a)})}return o}function xy(s,{plugin:t,local:e},i,n){const o=s.pluginScopeKeys(t),a=s.getOptionScopes(i,o);return e&&t.defaults&&a.push(t.defaults),s.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function So(s,t){const e=Nt.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Cy(s,t){let e=s;return s==="_index_"?e=t:s==="_value_"&&(e=t==="x"?"y":"x"),e}function Sy(s,t){return s===t?"_index_":"_value_"}function Tr(s){if(s==="x"||s==="y"||s==="r")return s}function Ty(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function To(s,...t){if(Tr(s))return s;for(const e of t){const i=e.axis||Ty(e.position)||s.length>1&&Tr(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Dr(s,t,e){if(e[t+"AxisID"]===s)return{axis:t}}function Dy(s,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(e.length)return Dr(s,"x",e[0])||Dr(s,"y",e[0])}return{}}function Ay(s,t){const e=Os[s.type]||{scales:{}},i=t.scales||{},n=So(s.type,t),o=Object.create(null);return Object.keys(i).forEach(a=>{const r=i[a];if(!At(r))return console.error(`Invalid scale configuration for scale: ${a}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=To(a,r,Dy(a,s),Nt.scales[r.type]),c=Sy(l,n),d=e.scales||{};o[a]=Mi(Object.create(null),[{axis:l},r,d[l],d[c]])}),s.data.datasets.forEach(a=>{const r=a.type||s.type,l=a.indexAxis||So(r,t),d=(Os[r]||{}).scales||{};Object.keys(d).forEach(u=>{const p=Cy(u,l),m=a[p+"AxisID"]||p;o[m]=o[m]||Object.create(null),Mi(o[m],[{axis:p},i[m],d[u]])})}),Object.keys(o).forEach(a=>{const r=o[a];Mi(r,[Nt.scales[r.type],Nt.scale])}),o}function qc(s){const t=s.options||(s.options={});t.plugins=yt(t.plugins,{}),t.scales=Ay(s,t)}function Yc(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function $y(s){return s=s||{},s.data=Yc(s.data),qc(s),s}const Ar=new Map,Kc=new Set;function fn(s,t){let e=Ar.get(s);return e||(e=t(),Ar.set(s,e),Kc.add(e)),e}const _i=(s,t,e)=>{const i=zs(t,e);i!==void 0&&s.add(i)};class My{constructor(t){this._config=$y(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Yc(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qc(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return fn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return fn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return fn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return fn(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return(!n||e)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,a=this._cachedScopes(t,i),r=a.get(e);if(r)return r;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(u=>_i(l,t,u))),d.forEach(u=>_i(l,n,u)),d.forEach(u=>_i(l,Os[o]||{},u)),d.forEach(u=>_i(l,Nt,u)),d.forEach(u=>_i(l,xo,u))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Kc.has(e)&&a.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Os[e]||{},Nt.datasets[e]||{},{type:e},Nt,xo]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:a,subPrefixes:r}=$r(this._resolverCache,t,n);let l=a;if(Iy(a,e)){o.$shared=!1,i=bs(i)?i():i;const c=this.createResolver(t,i,r);l=oi(a,i,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,i=[""],n){const{resolver:o}=$r(this._resolverCache,t,i);return At(e)?oi(o,e,void 0,n):o}}function $r(s,t,e){let i=s.get(t);i||(i=new Map,s.set(t,i));const n=e.join();let o=i.get(n);return o||(o={resolver:oa(t,e),subPrefixes:e.filter(r=>!r.toLowerCase().includes("hover"))},i.set(n,o)),o}const Py=s=>At(s)&&Object.getOwnPropertyNames(s).some(t=>bs(s[t]));function Iy(s,t){const{isScriptable:e,isIndexable:i}=Mc(s);for(const n of t){const o=e(n),a=i(n),r=(a||o)&&s[n];if(o&&(bs(r)||Py(r))||a&&zt(r))return!0}return!1}var Vy="4.4.3";const Ly=["top","bottom","left","right","chartArea"];function Mr(s,t){return s==="top"||s==="bottom"||Ly.indexOf(s)===-1&&t==="x"}function Pr(s,t){return function(e,i){return e[s]===i[s]?e[t]-i[t]:e[s]-i[s]}}function Ir(s){const t=s.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Rt(e&&e.onComplete,[s],t)}function Ey(s){const t=s.chart,e=t.options.animation;Rt(e&&e.onProgress,[s],t)}function Xc(s){return la()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const xn={},Vr=s=>{const t=Xc(s);return Object.values(xn).filter(e=>e.canvas===t).pop()};function Ry(s,t,e){const i=Object.keys(s);for(const n of i){const o=+n;if(o>=t){const a=s[n];delete s[n],(e>0||o>t)&&(s[o+e]=a)}}}function zy(s,t,e,i){return!e||s.type==="mouseout"?null:i?t:s}function pn(s,t,e){return s.options.clip?s[e]:t[e]}function Oy(s,t){const{xScale:e,yScale:i}=s;return e&&i?{left:pn(e,t,"left"),right:pn(e,t,"right"),top:pn(i,t,"top"),bottom:pn(i,t,"bottom")}:t}var rs;let di=(rs=class{static register(...t){Ee.add(...t),Lr()}static unregister(...t){Ee.remove(...t),Lr()}constructor(t,e){const i=this.config=new My(e),n=Xc(t),o=Vr(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||ey(n)),this.platform.updateConfig(i);const r=this.platform.acquireContext(n,a.aspectRatio),l=r&&r.canvas,c=l&&l.height,d=l&&l.width;if(this.id=zv(),this.ctx=r,this.canvas=l,this.width=d,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new by,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jv(u=>this.update(u),a.resizeDelay||0),this._dataChanges=[],xn[this.id]=this,!r||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ye.listen(this,"complete",Ir),Ye.listen(this,"progress",Ey),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return Vt(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ee}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():er(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qa(this.canvas,this.ctx),this}stop(){return Ye.stop(this),this}resize(t,e){Ye.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,n=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,t,e,o),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,er(this,r,!0)&&(this.notifyPlugins("resize",{size:a}),Rt(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};It(e,(i,n)=>{i.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,n=Object.keys(i).reduce((a,r)=>(a[r]=!1,a),{});let o=[];e&&(o=o.concat(Object.keys(e).map(a=>{const r=e[a],l=To(a,r),c=l==="r",d=l==="x";return{options:r,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),It(o,a=>{const r=a.options,l=r.id,c=To(l,r),d=yt(r.type,a.dtype);(r.position===void 0||Mr(r.position,c)!==Mr(a.dposition))&&(r.position=a.dposition),n[l]=!0;let u=null;if(l in i&&i[l].type===d)u=i[l];else{const p=Ee.getScale(d);u=new p({id:l,type:d,ctx:this.ctx,chart:this}),i[u.id]=u}u.init(r,t)}),It(n,(a,r)=>{a||delete i[r]}),It(i,a=>{Ce.configure(this,a,a.options),Ce.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((n,o)=>n.index-o.index),i>e){for(let n=e;n<i;++n)this._destroyDatasetMeta(n);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Pr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,n)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=e.length;i<n;i++){const o=e[i];let a=this.getDatasetMeta(i);const r=o.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=r,a.indexAxis=o.indexAxis||So(r,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{const l=Ee.getController(r),{datasetElementType:c,dataElementType:d}=Nt.datasets[r];Object.assign(l,{dataElementType:Ee.getElement(d),datasetElementType:c&&Ee.getElement(c)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){It(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:u}=this.getDatasetMeta(c),p=!n&&o.indexOf(u)===-1;u.buildOrUpdateElements(p),a=Math.max(+u.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),n||It(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Pr("z","_idx"));const{_active:r,_lastEvent:l}=this;l?this._eventHandler(l,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){It(this.scales,t=>{Ce.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Na(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:o}of e){const a=i==="_removeElements"?-o:o;Ry(t,n,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,r)=>r+","+a.splice(1).join(","))),n=i(0);for(let o=1;o<e;o++)if(!Na(n,i(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ce.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],It(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,bs(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),n={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ye.has(this)?this.attached&&!Ye.running(this)&&Ye.start(this):(this.draw(),Ir({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resize(i,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const a=e[n];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,n=!i.disabled,o=Oy(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&sa(e,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),n&&ia(e),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return es(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,n){const o=Lb.modes[e];return typeof o=="function"?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter(o=>o&&o._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=ks(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,n);Ui(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(r=>r.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ye.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Qa(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete xn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,a)=>{e.addEventListener(this,o,a),t[o]=a},n=(o,a,r)=>{o.offsetX=a,o.offsetY=r,this._eventHandler(o)};It(this.options.events,o=>i(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const r=()=>{n("attach",r),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),i("attach",r)},e.isAttached(this.canvas)?r():a()}unbindEvents(){It(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},It(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,a,r,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),r=0,l=t.length;r<l;++r){a=t[r];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{const r=this.getDatasetMeta(o);if(!r)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:r.data[a],index:a}});!Mn(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const n=this.options.hover,o=(l,c)=>l.filter(d=>!c.some(u=>d.datasetIndex===u.datasetIndex&&d.index===u.index)),a=o(e,t),r=i?t:o(t,e);a.length&&this.updateHoverStyle(a,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:n=[],options:o}=this,a=e,r=this._getActiveElements(t,n,i,a),l=Nv(t),c=zy(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Rt(o.onHover,[t,r,this],this),l&&Rt(o.onClick,[t,r,this],this));const d=!Mn(r,n);return(d||e)&&(this._active=r,this._updateHoverStyles(r,n,e)),this._lastEvent=c,d}_getActiveElements(t,e,i,n){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}},tt(rs,"defaults",Nt),tt(rs,"instances",xn),tt(rs,"overrides",Os),tt(rs,"registry",Ee),tt(rs,"version",Vy),tt(rs,"getChart",Vr),rs);function Lr(){return It(di.instances,s=>s._plugins.invalidate())}function Fy(s,t,e){const{startAngle:i,pixelMargin:n,x:o,y:a,outerRadius:r,innerRadius:l}=t;let c=n/r;s.beginPath(),s.arc(o,a,r,i-c,e+c),l>n?(c=n/l,s.arc(o,a,l,e+c,i-c,!0)):s.arc(o,a,n,e+qt,i-qt),s.closePath(),s.clip()}function By(s){return na(s,["outerStart","outerEnd","innerStart","innerEnd"])}function Uy(s,t,e,i){const n=By(s.options.borderRadius),o=(e-t)/2,a=Math.min(o,i*t/2),r=l=>{const c=(e-Math.min(o,l))*i/2;return ne(l,0,Math.min(o,c))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:ne(n.innerStart,0,a),innerEnd:ne(n.innerEnd,0,a)}}function Ks(s,t,e,i){return{x:e+s*Math.cos(t),y:i+s*Math.sin(t)}}function Rn(s,t,e,i,n,o){const{x:a,y:r,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+i+e-c,0),p=d>0?d+i+e+c:0;let m=0;const b=n-l;if(i){const J=d>0?d-i:0,K=u>0?u-i:0,G=(J+K)/2,ot=G!==0?b*G/(G+i):b;m=(b-ot)/2}const v=Math.max(.001,b*u-e/Bt)/u,_=(b-v)/2,x=l+_+m,C=n-_-m,{outerStart:T,outerEnd:$,innerStart:k,innerEnd:A}=Uy(t,p,u,C-x),P=u-T,z=u-$,j=x+T/P,V=C-$/z,O=p+k,B=p+A,U=x+k/O,H=C-A/B;if(s.beginPath(),o){const J=(j+V)/2;if(s.arc(a,r,u,j,J),s.arc(a,r,u,J,V),$>0){const et=Ks(z,V,a,r);s.arc(et.x,et.y,$,V,C+qt)}const K=Ks(B,C,a,r);if(s.lineTo(K.x,K.y),A>0){const et=Ks(B,H,a,r);s.arc(et.x,et.y,A,C+qt,H+Math.PI)}const G=(C-A/p+(x+k/p))/2;if(s.arc(a,r,p,C-A/p,G,!0),s.arc(a,r,p,G,x+k/p,!0),k>0){const et=Ks(O,U,a,r);s.arc(et.x,et.y,k,U+Math.PI,x-qt)}const ot=Ks(P,x,a,r);if(s.lineTo(ot.x,ot.y),T>0){const et=Ks(P,j,a,r);s.arc(et.x,et.y,T,x-qt,j)}}else{s.moveTo(a,r);const J=Math.cos(j)*u+a,K=Math.sin(j)*u+r;s.lineTo(J,K);const G=Math.cos(V)*u+a,ot=Math.sin(V)*u+r;s.lineTo(G,ot)}s.closePath()}function Hy(s,t,e,i,n){const{fullCircles:o,startAngle:a,circumference:r}=t;let l=t.endAngle;if(o){Rn(s,t,e,i,l,n);for(let c=0;c<o;++c)s.fill();isNaN(r)||(l=a+(r%Ot||Ot))}return Rn(s,t,e,i,l,n),s.fill(),l}function Ny(s,t,e,i,n){const{fullCircles:o,startAngle:a,circumference:r,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:p}=l,m=l.borderAlign==="inner";if(!c)return;s.setLineDash(u||[]),s.lineDashOffset=p,m?(s.lineWidth=c*2,s.lineJoin=d||"round"):(s.lineWidth=c,s.lineJoin=d||"bevel");let b=t.endAngle;if(o){Rn(s,t,e,i,b,n);for(let v=0;v<o;++v)s.stroke();isNaN(r)||(b=a+(r%Ot||Ot))}m&&Fy(s,t,b),o||(Rn(s,t,e,i,b,n),s.stroke())}class Ti extends Me{constructor(e){super();tt(this,"circumference");tt(this,"endAngle");tt(this,"fullCircles");tt(this,"innerRadius");tt(this,"outerRadius");tt(this,"pixelMargin");tt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,n){const o=this.getProps(["x","y"],n),{angle:a,distance:r}=kc(o,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),m=(this.options.spacing+this.options.borderWidth)/2,v=yt(p,c-l)>=Ot||Ni(a,l,c),_=us(r,d+m,u+m);return v&&_}getCenterPoint(e){const{x:i,y:n,startAngle:o,endAngle:a,innerRadius:r,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(o+a)/2,p=(r+l+d+c)/2;return{x:i+Math.cos(u)*p,y:n+Math.sin(u)*p}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:n}=this,o=(i.offset||0)/4,a=(i.spacing||0)/2,r=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>Ot?Math.floor(n/Ot):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(Bt,n||0)),d=o*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,Hy(e,this,d,a,r),Ny(e,this,d,a,r),e.restore()}}tt(Ti,"id","arc"),tt(Ti,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),tt(Ti,"defaultRoutes",{backgroundColor:"backgroundColor"}),tt(Ti,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Gc(s,t,e=t){s.lineCap=yt(e.borderCapStyle,t.borderCapStyle),s.setLineDash(yt(e.borderDash,t.borderDash)),s.lineDashOffset=yt(e.borderDashOffset,t.borderDashOffset),s.lineJoin=yt(e.borderJoinStyle,t.borderJoinStyle),s.lineWidth=yt(e.borderWidth,t.borderWidth),s.strokeStyle=yt(e.borderColor,t.borderColor)}function jy(s,t,e){s.lineTo(e.x,e.y)}function Wy(s){return s.stepped?f2:s.tension||s.cubicInterpolationMode==="monotone"?p2:jy}function Zc(s,t,e={}){const i=s.length,{start:n=0,end:o=i-1}=e,{start:a,end:r}=t,l=Math.max(n,a),c=Math.min(o,r),d=n<a&&o<a||n>r&&o>r;return{count:i,start:l,loop:t.loop,ilen:c<l&&!d?i+c-l:c-l}}function qy(s,t,e,i){const{points:n,options:o}=t,{count:a,start:r,loop:l,ilen:c}=Zc(n,e,i),d=Wy(o);let{move:u=!0,reverse:p}=i||{},m,b,v;for(m=0;m<=c;++m)b=n[(r+(p?c-m:m))%a],!b.skip&&(u?(s.moveTo(b.x,b.y),u=!1):d(s,v,b,p,o.stepped),v=b);return l&&(b=n[(r+(p?c:0))%a],d(s,v,b,p,o.stepped)),!!l}function Yy(s,t,e,i){const n=t.points,{count:o,start:a,ilen:r}=Zc(n,e,i),{move:l=!0,reverse:c}=i||{};let d=0,u=0,p,m,b,v,_,x;const C=$=>(a+(c?r-$:$))%o,T=()=>{v!==_&&(s.lineTo(d,_),s.lineTo(d,v),s.lineTo(d,x))};for(l&&(m=n[C(0)],s.moveTo(m.x,m.y)),p=0;p<=r;++p){if(m=n[C(p)],m.skip)continue;const $=m.x,k=m.y,A=$|0;A===b?(k<v?v=k:k>_&&(_=k),d=(u*d+$)/++u):(T(),s.lineTo($,k),b=A,u=0,v=_=k),x=k}T()}function Do(s){const t=s.options,e=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Yy:qy}function Ky(s){return s.stepped?q2:s.tension||s.cubicInterpolationMode==="monotone"?Y2:Ps}function Xy(s,t,e,i){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,i)&&n.closePath()),Gc(s,t.options),s.stroke(n)}function Gy(s,t,e,i){const{segments:n,options:o}=t,a=Do(t);for(const r of n)Gc(s,o,r.style),s.beginPath(),a(s,t,r,{start:e,end:e+i-1})&&s.closePath(),s.stroke()}const Zy=typeof Path2D=="function";function Qy(s,t,e,i){Zy&&!t.options.segment?Xy(s,t,e,i):Gy(s,t,e,i)}class Di extends Me{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;O2(this._points,i,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eb(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,n=t[e],o=this.points,a=Q2(this,{property:e,start:n,end:n});if(!a.length)return;const r=[],l=Ky(i);let c,d;for(c=0,d=a.length;c<d;++c){const{start:u,end:p}=a[c],m=o[u],b=o[p];if(m===b){r.push(m);continue}const v=Math.abs((n-m[e])/(b[e]-m[e])),_=l(m,b,v,i.stepped);_[e]=t[e],r.push(_)}return r.length===1?r[0]:r}pathSegment(t,e,i){return Do(this)(t,this,e,i)}path(t,e,i){const n=this.segments,o=Do(this);let a=this._loop;e=e||0,i=i||this.points.length-e;for(const r of n)a&=o(t,this,r,{start:e,end:e+i-1});return!!a}draw(t,e,i,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Qy(t,this,i,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}tt(Di,"id","line"),tt(Di,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),tt(Di,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),tt(Di,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Er(s,t,e,i){const n=s.options,{[e]:o}=s.getProps([e],i);return Math.abs(t-o)<n.radius+n.hitRadius}class Cn extends Me{constructor(e){super();tt(this,"parsed");tt(this,"skip");tt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const o=this.options,{x:a,y:r}=this.getProps(["x","y"],n);return Math.pow(e-a,2)+Math.pow(i-r,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return Er(this,e,"x",i)}inYRange(e,i){return Er(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const n=i&&e.borderWidth||0;return(i+n)*2}draw(e,i){const n=this.options;this.skip||n.radius<.1||!es(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Co(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}tt(Cn,"id","point"),tt(Cn,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),tt(Cn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Qc(s,t){const{x:e,y:i,base:n,width:o,height:a}=s.getProps(["x","y","base","width","height"],t);let r,l,c,d,u;return s.horizontal?(u=a/2,r=Math.min(e,n),l=Math.max(e,n),c=i-u,d=i+u):(u=o/2,r=e-u,l=e+u,c=Math.min(i,n),d=Math.max(i,n)),{left:r,top:c,right:l,bottom:d}}function hs(s,t,e,i){return s?0:ne(t,e,i)}function Jy(s,t,e){const i=s.options.borderWidth,n=s.borderSkipped,o=$c(i);return{t:hs(n.top,o.top,0,e),r:hs(n.right,o.right,0,t),b:hs(n.bottom,o.bottom,0,e),l:hs(n.left,o.left,0,t)}}function t_(s,t,e){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,o=Ls(n),a=Math.min(t,e),r=s.borderSkipped,l=i||At(n);return{topLeft:hs(!l||r.top||r.left,o.topLeft,0,a),topRight:hs(!l||r.top||r.right,o.topRight,0,a),bottomLeft:hs(!l||r.bottom||r.left,o.bottomLeft,0,a),bottomRight:hs(!l||r.bottom||r.right,o.bottomRight,0,a)}}function e_(s){const t=Qc(s),e=t.right-t.left,i=t.bottom-t.top,n=Jy(s,e/2,i/2),o=t_(s,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function uo(s,t,e,i){const n=t===null,o=e===null,r=s&&!(n&&o)&&Qc(s,i);return r&&(n||us(t,r.left,r.right))&&(o||us(e,r.top,r.bottom))}function s_(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function i_(s,t){s.rect(t.x,t.y,t.w,t.h)}function ho(s,t,e={}){const i=s.x!==e.x?-t:0,n=s.y!==e.y?-t:0,o=(s.x+s.w!==e.x+e.w?t:0)-i,a=(s.y+s.h!==e.y+e.h?t:0)-n;return{x:s.x+i,y:s.y+n,w:s.w+o,h:s.h+a,radius:s.radius}}class Sn extends Me{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:a}=e_(this),r=s_(a.radius)?ji:i_;t.save(),(a.w!==o.w||a.h!==o.h)&&(t.beginPath(),r(t,ho(a,e,o)),t.clip(),r(t,ho(o,-e,a)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),r(t,ho(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return uo(this,t,e,i)}inXRange(t,e){return uo(this,t,null,e)}inYRange(t,e){return uo(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}tt(Sn,"id","bar"),tt(Sn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),tt(Sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Rr=(s,t)=>{let{boxHeight:e=t,boxWidth:i=t}=s;return s.usePointStyle&&(e=Math.min(e,t),i=s.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},n_=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class zr extends Me{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Rt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,n=Xt(i.font),o=n.size,a=this._computeTitleHeight(),{boxWidth:r,itemHeight:l}=Rr(i,o);let c,d;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(a,o,r,l)+10):(d=this.maxHeight,c=this._fitCols(a,n,r,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:o,maxWidth:a,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=n+r;let u=t;o.textAlign="left",o.textBaseline="middle";let p=-1,m=-d;return this.legendItems.forEach((b,v)=>{const _=i+e/2+o.measureText(b.text).width;(v===0||c[c.length-1]+_+2*r>a)&&(u+=d,c[c.length-(v>0?0:1)]=0,m+=d,p++),l[v]={left:0,top:m,row:p,width:_,height:n},c[c.length-1]+=_+r}),u}_fitCols(t,e,i,n){const{ctx:o,maxHeight:a,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=a-t;let u=r,p=0,m=0,b=0,v=0;return this.legendItems.forEach((_,x)=>{const{itemWidth:C,itemHeight:T}=o_(i,e,o,_,n);x>0&&m+T+2*r>d&&(u+=p+r,c.push({width:p,height:m}),b+=p+r,v++,p=m=0),l[x]={left:b,top:m,col:v,width:C,height:T},p=Math.max(p,C),m+=T+r}),u+=p,c.push({width:p,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:o}}=this,a=ei(o,this.left,this.width);if(this.isHorizontal()){let r=0,l=ie(i,this.left+n,this.right-this.lineWidths[r]);for(const c of e)r!==c.row&&(r=c.row,l=ie(i,this.left+n,this.right-this.lineWidths[r])),c.top+=this.top+t+n,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+n}else{let r=0,l=ie(i,this.top+t+n,this.bottom-this.columnSizes[r].height);for(const c of e)c.col!==r&&(r=c.col,l=ie(i,this.top+t+n,this.bottom-this.columnSizes[r].height)),c.top=l,c.left+=this.left+n,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;sa(t,this),this._draw(),ia(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:o,labels:a}=t,r=Nt.color,l=ei(t.rtl,this.left,this.width),c=Xt(a.font),{padding:d}=a,u=c.size,p=u/2;let m;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:b,boxHeight:v,itemHeight:_}=Rr(a,u),x=function(A,P,z){if(isNaN(b)||b<=0||isNaN(v)||v<0)return;n.save();const j=yt(z.lineWidth,1);if(n.fillStyle=yt(z.fillStyle,r),n.lineCap=yt(z.lineCap,"butt"),n.lineDashOffset=yt(z.lineDashOffset,0),n.lineJoin=yt(z.lineJoin,"miter"),n.lineWidth=j,n.strokeStyle=yt(z.strokeStyle,r),n.setLineDash(yt(z.lineDash,[])),a.usePointStyle){const V={radius:v*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:j},O=l.xPlus(A,b/2),B=P+p;Ac(n,V,O,B,a.pointStyleWidth&&b)}else{const V=P+Math.max((u-v)/2,0),O=l.leftForLtr(A,b),B=Ls(z.borderRadius);n.beginPath(),Object.values(B).some(U=>U!==0)?ji(n,{x:O,y:V,w:b,h:v,radius:B}):n.rect(O,V,b,v),n.fill(),j!==0&&n.stroke()}n.restore()},C=function(A,P,z){Fs(n,z.text,A,P+_/2,c,{strikethrough:z.hidden,textAlign:l.textAlign(z.textAlign)})},T=this.isHorizontal(),$=this._computeTitleHeight();T?m={x:ie(o,this.left+d,this.right-i[0]),y:this.top+d+$,line:0}:m={x:this.left+d,y:ie(o,this.top+$+d,this.bottom-e[0].height),line:0},Ec(this.ctx,t.textDirection);const k=_+d;this.legendItems.forEach((A,P)=>{n.strokeStyle=A.fontColor,n.fillStyle=A.fontColor;const z=n.measureText(A.text).width,j=l.textAlign(A.textAlign||(A.textAlign=a.textAlign)),V=b+p+z;let O=m.x,B=m.y;l.setWidth(this.width),T?P>0&&O+V+d>this.right&&(B=m.y+=k,m.line++,O=m.x=ie(o,this.left+d,this.right-i[m.line])):P>0&&B+k>this.bottom&&(O=m.x=O+e[m.line].width+d,m.line++,B=m.y=ie(o,this.top+$+d,this.bottom-e[m.line].height));const U=l.x(O);if(x(U,B,A),O=t2(j,O+b+p,T?O+V:this.right,t.rtl),C(l.x(O),B,A),T)m.x+=V+d;else if(typeof A.text!="string"){const H=c.lineHeight;m.y+=Jc(A,H)+d}else m.y+=k}),Rc(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Xt(e.font),n=ae(e.padding);if(!e.display)return;const o=ei(t.rtl,this.left,this.width),a=this.ctx,r=e.position,l=i.size/2,c=n.top+l;let d,u=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+c,u=ie(t.align,u,this.right-p);else{const b=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);d=c+ie(t.align,this.top,this.bottom-b-t.labels.padding-this._computeTitleHeight())}const m=ie(r,u,u+p);a.textAlign=o.textAlign(ta(r)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=i.string,Fs(a,e.text,m,d,i)}_computeTitleHeight(){const t=this.options.title,e=Xt(t.font),i=ae(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,o;if(us(t,this.left,this.right)&&us(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],us(t,n.left,n.left+n.width)&&us(e,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!l_(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,o=n_(n,i);n&&!o&&Rt(e.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!o&&Rt(e.onHover,[t,i,this],this)}else i&&Rt(e.onClick,[t,i,this],this)}}function o_(s,t,e,i,n){const o=a_(i,s,t,e),a=r_(n,i,t.lineHeight);return{itemWidth:o,itemHeight:a}}function a_(s,t,e,i){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((o,a)=>o.length>a.length?o:a)),t+e.size/2+i.measureText(n).width}function r_(s,t,e){let i=s;return typeof t.text!="string"&&(i=Jc(t,e)),i}function Jc(s,t){const e=s.text?s.text.length:0;return t*e}function l_(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var ua={id:"legend",_element:zr,start(s,t,e){const i=s.legend=new zr({ctx:s.ctx,options:e,chart:s});Ce.configure(s,i,e),Ce.addBox(s,i)},stop(s){Ce.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,e){const i=s.legend;Ce.configure(s,i,e),i.options=e},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,e){const i=t.datasetIndex,n=e.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=s.legend.options;return s._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),d=ae(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:a&&(r||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class td extends Me{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=zt(i.text)?i.text.length:1;this._padding=ae(i.padding);const o=n*Xt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:n,right:o,options:a}=this,r=a.align;let l=0,c,d,u;return this.isHorizontal()?(d=ie(r,i,o),u=e+t,c=o-i):(a.position==="left"?(d=i+t,u=ie(r,n,e),l=Bt*-.5):(d=o-t,u=ie(r,e,n),l=Bt*.5),c=n-e),{titleX:d,titleY:u,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Xt(e.font),o=i.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:l,rotation:c}=this._drawArgs(o);Fs(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:ta(e.align),textBaseline:"middle",translation:[a,r]})}}function c_(s,t){const e=new td({ctx:s.ctx,options:t,chart:s});Ce.configure(s,e,t),Ce.addBox(s,e),s.titleBlock=e}var ha={id:"title",_element:td,start(s,t,e){c_(s,e)},stop(s){const t=s.titleBlock;Ce.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,e){const i=s.titleBlock;Ce.configure(s,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ai={average(s){if(!s.length)return!1;let t,e,i=new Set,n=0,o=0;for(t=0,e=s.length;t<e;++t){const r=s[t].element;if(r&&r.hasValue()){const l=r.tooltipPosition();i.add(l.x),n+=l.y,++o}}return{x:[...i].reduce((r,l)=>r+l)/i.size,y:n/o}},nearest(s,t){if(!s.length)return!1;let e=t.x,i=t.y,n=Number.POSITIVE_INFINITY,o,a,r;for(o=0,a=s.length;o<a;++o){const l=s[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=ko(t,c);d<n&&(n=d,r=l)}}if(r){const l=r.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function Ve(s,t){return t&&(zt(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function Ke(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function d_(s,t){const{element:e,datasetIndex:i,index:n}=t,o=s.getDatasetMeta(i).controller,{label:a,value:r}=o.getLabelAndValue(n);return{chart:s,label:a,parsed:o.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:i,element:e}}function Or(s,t){const e=s.chart.ctx,{body:i,footer:n,title:o}=s,{boxWidth:a,boxHeight:r}=t,l=Xt(t.bodyFont),c=Xt(t.titleFont),d=Xt(t.footerFont),u=o.length,p=n.length,m=i.length,b=ae(t.padding);let v=b.height,_=0,x=i.reduce(($,k)=>$+k.before.length+k.lines.length+k.after.length,0);if(x+=s.beforeBody.length+s.afterBody.length,u&&(v+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){const $=t.displayColors?Math.max(r,l.lineHeight):l.lineHeight;v+=m*$+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}p&&(v+=t.footerMarginTop+p*d.lineHeight+(p-1)*t.footerSpacing);let C=0;const T=function($){_=Math.max(_,e.measureText($).width+C)};return e.save(),e.font=c.string,It(s.title,T),e.font=l.string,It(s.beforeBody.concat(s.afterBody),T),C=t.displayColors?a+2+t.boxPadding:0,It(i,$=>{It($.before,T),It($.lines,T),It($.after,T)}),C=0,e.font=d.string,It(s.footer,T),e.restore(),_+=b.width,{width:_,height:v}}function u_(s,t){const{y:e,height:i}=t;return e<i/2?"top":e>s.height-i/2?"bottom":"center"}function h_(s,t,e,i){const{x:n,width:o}=i,a=e.caretSize+e.caretPadding;if(s==="left"&&n+o+a>t.width||s==="right"&&n-o-a<0)return!0}function f_(s,t,e,i){const{x:n,width:o}=e,{width:a,chartArea:{left:r,right:l}}=s;let c="center";return i==="center"?c=n<=(r+l)/2?"left":"right":n<=o/2?c="left":n>=a-o/2&&(c="right"),h_(c,s,t,e)&&(c="center"),c}function Fr(s,t,e){const i=e.yAlign||t.yAlign||u_(s,e);return{xAlign:e.xAlign||t.xAlign||f_(s,t,e,i),yAlign:i}}function p_(s,t){let{x:e,width:i}=s;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function m_(s,t,e){let{y:i,height:n}=s;return t==="top"?i+=e:t==="bottom"?i-=n+e:i-=n/2,i}function Br(s,t,e,i){const{caretSize:n,caretPadding:o,cornerRadius:a}=s,{xAlign:r,yAlign:l}=e,c=n+o,{topLeft:d,topRight:u,bottomLeft:p,bottomRight:m}=Ls(a);let b=p_(t,r);const v=m_(t,l,c);return l==="center"?r==="left"?b+=c:r==="right"&&(b-=c):r==="left"?b-=Math.max(d,p)+n:r==="right"&&(b+=Math.max(u,m)+n),{x:ne(b,0,i.width-t.width),y:ne(v,0,i.height-t.height)}}function mn(s,t,e){const i=ae(e.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-i.right:s.x+i.left}function Ur(s){return Ve([],Ke(s))}function g_(s,t,e){return ks(s,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Hr(s,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?s.override(e):s}const ed={beforeTitle:We,title(s){if(s.length>0){const t=s[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:We,beforeBody:We,beforeLabel:We,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const e=s.formattedValue;return Vt(e)||(t+=e),t},labelColor(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:We,afterBody:We,beforeFooter:We,footer:We,afterFooter:We};function he(s,t,e,i){const n=s[t].call(e,i);return typeof n>"u"?ed[t].call(e,i):n}class Ao extends Me{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&e.options.animation&&i.animations,o=new Oc(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=g_(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,n=he(i,"beforeTitle",this,t),o=he(i,"title",this,t),a=he(i,"afterTitle",this,t);let r=[];return r=Ve(r,Ke(n)),r=Ve(r,Ke(o)),r=Ve(r,Ke(a)),r}getBeforeBody(t,e){return Ur(he(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,n=[];return It(t,o=>{const a={before:[],lines:[],after:[]},r=Hr(i,o);Ve(a.before,Ke(he(r,"beforeLabel",this,o))),Ve(a.lines,he(r,"label",this,o)),Ve(a.after,Ke(he(r,"afterLabel",this,o))),n.push(a)}),n}getAfterBody(t,e){return Ur(he(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,n=he(i,"beforeFooter",this,t),o=he(i,"footer",this,t),a=he(i,"afterFooter",this,t);let r=[];return r=Ve(r,Ke(n)),r=Ve(r,Ke(o)),r=Ve(r,Ke(a)),r}_createItems(t){const e=this._active,i=this.chart.data,n=[],o=[],a=[];let r=[],l,c;for(l=0,c=e.length;l<c;++l)r.push(d_(this.chart,e[l]));return t.filter&&(r=r.filter((d,u,p)=>t.filter(d,u,p,i))),t.itemSort&&(r=r.sort((d,u)=>t.itemSort(d,u,i))),It(r,d=>{const u=Hr(t.callbacks,d);n.push(he(u,"labelColor",this,d)),o.push(he(u,"labelPointStyle",this,d)),a.push(he(u,"labelTextColor",this,d))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=r,r}update(t,e){const i=this.options.setContext(this.getContext()),n=this._active;let o,a=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const r=Ai[i.position].call(this,n,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);const l=this._size=Or(this,i),c=Object.assign({},r,l),d=Fr(this.chart,i,c),u=Br(i,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:u.x,y:u.y,width:l.width,height:l.height,caretX:r.x,caretY:r.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{caretSize:a,cornerRadius:r}=i,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:u}=Ls(r),{x:p,y:m}=t,{width:b,height:v}=e;let _,x,C,T,$,k;return o==="center"?($=m+v/2,n==="left"?(_=p,x=_-a,T=$+a,k=$-a):(_=p+b,x=_+a,T=$-a,k=$+a),C=_):(n==="left"?x=p+Math.max(l,d)+a:n==="right"?x=p+b-Math.max(c,u)-a:x=this.caretX,o==="top"?(T=m,$=T-a,_=x-a,C=x+a):(T=m+v,$=T+a,_=x+a,C=x-a),k=T),{x1:_,x2:x,x3:C,y1:T,y2:$,y3:k}}drawTitle(t,e,i){const n=this.title,o=n.length;let a,r,l;if(o){const c=ei(i.rtl,this.x,this.width);for(t.x=mn(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",a=Xt(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=a.string,l=0;l<o;++l)e.fillText(n[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r,l+1===o&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,n,o){const a=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=o,d=Xt(o.bodyFont),u=mn(this,"left",o),p=n.x(u),m=l<d.lineHeight?(d.lineHeight-l)/2:0,b=e.y+m;if(o.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},_=n.leftForLtr(p,c)+c/2,x=b+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Co(t,v,_,x),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Co(t,v,_,x)}else{t.lineWidth=At(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const v=n.leftForLtr(p,c),_=n.leftForLtr(n.xPlus(p,1),c-2),x=Ls(a.borderRadius);Object.values(x).some(C=>C!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ji(t,{x:v,y:b,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ji(t,{x:_,y:b+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,b,c,l),t.strokeRect(v,b,c,l),t.fillStyle=a.backgroundColor,t.fillRect(_,b+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:n}=this,{bodySpacing:o,bodyAlign:a,displayColors:r,boxHeight:l,boxWidth:c,boxPadding:d}=i,u=Xt(i.bodyFont);let p=u.lineHeight,m=0;const b=ei(i.rtl,this.x,this.width),v=function(z){e.fillText(z,b.x(t.x+m),t.y+p/2),t.y+=p+o},_=b.textAlign(a);let x,C,T,$,k,A,P;for(e.textAlign=a,e.textBaseline="middle",e.font=u.string,t.x=mn(this,_,i),e.fillStyle=i.bodyColor,It(this.beforeBody,v),m=r&&_!=="right"?a==="center"?c/2+d:c+2+d:0,$=0,A=n.length;$<A;++$){for(x=n[$],C=this.labelTextColors[$],e.fillStyle=C,It(x.before,v),T=x.lines,r&&T.length&&(this._drawColorBox(e,t,$,b,i),p=Math.max(u.lineHeight,l)),k=0,P=T.length;k<P;++k)v(T[k]),p=u.lineHeight;It(x.after,v)}m=0,p=u.lineHeight,It(this.afterBody,v),t.y-=o}drawFooter(t,e,i){const n=this.footer,o=n.length;let a,r;if(o){const l=ei(i.rtl,this.x,this.width);for(t.x=mn(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",a=Xt(i.footerFont),e.fillStyle=i.footerColor,e.font=a.string,r=0;r<o;++r)e.fillText(n[r],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:a}=this,{x:r,y:l}=t,{width:c,height:d}=i,{topLeft:u,topRight:p,bottomLeft:m,bottomRight:b}=Ls(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(r+u,l),a==="top"&&this.drawCaret(t,e,i,n),e.lineTo(r+c-p,l),e.quadraticCurveTo(r+c,l,r+c,l+p),a==="center"&&o==="right"&&this.drawCaret(t,e,i,n),e.lineTo(r+c,l+d-b),e.quadraticCurveTo(r+c,l+d,r+c-b,l+d),a==="bottom"&&this.drawCaret(t,e,i,n),e.lineTo(r+m,l+d),e.quadraticCurveTo(r,l+d,r,l+d-m),a==="center"&&o==="left"&&this.drawCaret(t,e,i,n),e.lineTo(r,l+u),e.quadraticCurveTo(r,l,r+u,l),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,n=i&&i.x,o=i&&i.y;if(n||o){const a=Ai[t.position].call(this,this._active,this._eventPosition);if(!a)return;const r=this._size=Or(this,t),l=Object.assign({},a,this._size),c=Fr(e,t,l),d=Br(t,l,c,e);(n._to!==d.x||o._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=r.width,this.height=r.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const a=ae(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,n,e),Ec(t,e.textDirection),o.y+=a.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Rc(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,n=t.map(({datasetIndex:r,index:l})=>{const c=this.chart.getDatasetMeta(r);if(!c)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:c.data[l],index:l}}),o=!Mn(i,n),a=this._positionChanged(n,e);(o||a)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],a=this._getActiveElements(t,o,e,i),r=this._positionChanged(a,t),l=e||!Mn(a,o)||r;return l&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,n){const o=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(r=>this.chart.data.datasets[r.datasetIndex]&&this.chart.getDatasetMeta(r.datasetIndex).controller.getParsed(r.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,a=Ai[o.position].call(this,t,e);return a!==!1&&(i!==a.x||n!==a.y)}}tt(Ao,"positioners",Ai);var fa={id:"tooltip",_element:Ao,positioners:Ai,afterInit(s,t,e){e&&(s.tooltip=new Ao({chart:s,options:e}))},beforeUpdate(s,t,e){s.tooltip&&s.tooltip.initialize(e)},reset(s,t,e){s.tooltip&&s.tooltip.initialize(e)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",e)}},afterEvent(s,t){if(s.tooltip){const e=t.replay;s.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ed},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const w_=(s,t,e,i)=>(typeof t=="string"?(e=s.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function v_(s,t,e,i){const n=s.indexOf(t);if(n===-1)return w_(s,t,e,i);const o=s.lastIndexOf(t);return n!==o?e:n}const b_=(s,t)=>s===null?null:ne(Math.round(s),0,t);function Nr(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class qi extends Ws{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:n,label:o}of e)i[n]===o&&i.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Vt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:v_(i,t,yt(e,t),this._addedLabels),b_(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,n=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=e;a++)n.push({value:a});return n}getLabelForValue(t){return Nr.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}tt(qi,"id","category"),tt(qi,"defaults",{ticks:{callback:Nr}});function y_(s,t){const e=[],{bounds:n,step:o,min:a,max:r,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:p}=s,m=o||1,b=d-1,{min:v,max:_}=t,x=!Vt(a),C=!Vt(r),T=!Vt(c),$=(_-v)/(u+1);let k=Wa((_-v)/b/m)*m,A,P,z,j;if(k<1e-14&&!x&&!C)return[{value:v},{value:_}];j=Math.ceil(_/k)-Math.floor(v/k),j>b&&(k=Wa(j*k/b/m)*m),Vt(l)||(A=Math.pow(10,l),k=Math.ceil(k*A)/A),n==="ticks"?(P=Math.floor(v/k)*k,z=Math.ceil(_/k)*k):(P=v,z=_),x&&C&&o&&Yv((r-a)/o,k/1e3)?(j=Math.round(Math.min((r-a)/k,d)),k=(r-a)/j,P=a,z=r):T?(P=x?a:P,z=C?r:z,j=c-1,k=(z-P)/j):(j=(z-P)/k,Pi(j,Math.round(j),k/1e3)?j=Math.round(j):j=Math.ceil(j));const V=Math.max(qa(k),qa(P));A=Math.pow(10,Vt(l)?V:l),P=Math.round(P*A)/A,z=Math.round(z*A)/A;let O=0;for(x&&(p&&P!==a?(e.push({value:a}),P<a&&O++,Pi(Math.round((P+O*k)*A)/A,a,jr(a,$,s))&&O++):P<a&&O++);O<j;++O){const B=Math.round((P+O*k)*A)/A;if(C&&B>r)break;e.push({value:B})}return C&&p&&z!==r?e.length&&Pi(e[e.length-1].value,r,jr(r,$,s))?e[e.length-1].value=r:e.push({value:r}):(!C||z===r)&&e.push({value:z}),e}function jr(s,t,{horizontal:e,minRotation:i}){const n=ze(i),o=(e?Math.sin(n):Math.cos(n))||.001,a=.75*t*(""+s).length;return Math.min(t/o,a)}class zn extends Ws{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Vt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const a=l=>n=e?n:l,r=l=>o=i?o:l;if(t){const l=Fe(n),c=Fe(o);l<0&&c<0?r(0):l>0&&c>0&&a(0)}if(n===o){let l=o===0?1:Math.abs(o*.05);r(o+l),t||a(n-l)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,a=y_(n,o);return t.bounds==="ticks"&&_c(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Xn(t,this.chart.options.locale,this.options.ticks.format)}}class On extends zn{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?t:0,this.max=Qt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ze(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}tt(On,"id","linear"),tt(On,"defaults",{ticks:{callback:Gn.formatters.numeric}});const Yi=s=>Math.floor(ds(s)),As=(s,t)=>Math.pow(10,Yi(s)+t);function Wr(s){return s/Math.pow(10,Yi(s))===1}function qr(s,t,e){const i=Math.pow(10,e),n=Math.floor(s/i);return Math.ceil(t/i)-n}function __(s,t){const e=t-s;let i=Yi(e);for(;qr(s,t,i)>10;)i++;for(;qr(s,t,i)<10;)i--;return Math.min(i,Yi(s))}function k_(s,{min:t,max:e}){t=ge(s.min,t);const i=[],n=Yi(t);let o=__(t,e),a=o<0?Math.pow(10,Math.abs(o)):1;const r=Math.pow(10,o),l=n>o?Math.pow(10,n):0,c=Math.round((t-l)*a)/a,d=Math.floor((t-l)/r/10)*r*10;let u=Math.floor((c-d)/Math.pow(10,o)),p=ge(s.min,Math.round((l+d+u*Math.pow(10,o))*a)/a);for(;p<e;)i.push({value:p,major:Wr(p),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,a=o>=0?1:a),p=Math.round((l+d+u*Math.pow(10,o))*a)/a;const m=ge(s.max,p);return i.push({value:m,major:Wr(m),significand:u}),i}class Yr extends Ws{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=zn.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Qt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Qt(t)?Math.max(0,t):null,this.max=Qt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qt(this._userMin)&&(this.min=t===As(this.min,0)?As(this.min,-1):As(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const o=r=>i=t?i:r,a=r=>n=e?n:r;i===n&&(i<=0?(o(1),a(10)):(o(As(i,-1)),a(As(n,1)))),i<=0&&o(As(n,-1)),n<=0&&a(As(i,1)),this.min=i,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=k_(e,this);return t.bounds==="ticks"&&_c(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Xn(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ds(t),this._valueRange=ds(this.max)-ds(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ds(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}tt(Yr,"id","logarithmic"),tt(Yr,"defaults",{ticks:{callback:Gn.formatters.logarithmic,major:{enabled:!0}}});function $o(s){const t=s.ticks;if(t.display&&s.display){const e=ae(t.backdropPadding);return yt(t.font&&t.font.size,Nt.font.size)+e.height}return 0}function x_(s,t,e){return e=zt(e)?e:[e],{w:h2(s,t.string,e),h:e.length*t.lineHeight}}function Kr(s,t,e,i,n){return s===i||s===n?{start:t-e/2,end:t+e/2}:s<i||s>n?{start:t-e,end:t}:{start:t,end:t+e}}function C_(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},e=Object.assign({},t),i=[],n=[],o=s._pointLabels.length,a=s.options.pointLabels,r=a.centerPointLabels?Bt/o:0;for(let l=0;l<o;l++){const c=a.setContext(s.getPointLabelContext(l));n[l]=c.padding;const d=s.getPointPosition(l,s.drawingArea+n[l],r),u=Xt(c.font),p=x_(s.ctx,u,s._pointLabels[l]);i[l]=p;const m=Se(s.getIndexAngle(l)+r),b=Math.round(Qo(m)),v=Kr(b,d.x,p.w,0,180),_=Kr(b,d.y,p.h,90,270);S_(e,t,m,v,_)}s.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),s._pointLabelItems=A_(s,i,n)}function S_(s,t,e,i,n){const o=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let r=0,l=0;i.start<t.l?(r=(t.l-i.start)/o,s.l=Math.min(s.l,t.l-r)):i.end>t.r&&(r=(i.end-t.r)/o,s.r=Math.max(s.r,t.r+r)),n.start<t.t?(l=(t.t-n.start)/a,s.t=Math.min(s.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/a,s.b=Math.max(s.b,t.b+l))}function T_(s,t,e){const i=s.drawingArea,{extra:n,additionalAngle:o,padding:a,size:r}=e,l=s.getPointPosition(t,i+n+a,o),c=Math.round(Qo(Se(l.angle+qt))),d=P_(l.y,r.h,c),u=$_(c),p=M_(l.x,r.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:p,top:d,right:p+r.w,bottom:d+r.h}}function D_(s,t){if(!t)return!0;const{left:e,top:i,right:n,bottom:o}=s;return!(es({x:e,y:i},t)||es({x:e,y:o},t)||es({x:n,y:i},t)||es({x:n,y:o},t))}function A_(s,t,e){const i=[],n=s._pointLabels.length,o=s.options,{centerPointLabels:a,display:r}=o.pointLabels,l={extra:$o(o)/2,additionalAngle:a?Bt/n:0};let c;for(let d=0;d<n;d++){l.padding=e[d],l.size=t[d];const u=T_(s,d,l);i.push(u),r==="auto"&&(u.visible=D_(u,c),u.visible&&(c=u))}return i}function $_(s){return s===0||s===180?"center":s<180?"left":"right"}function M_(s,t,e){return e==="right"?s-=t:e==="center"&&(s-=t/2),s}function P_(s,t,e){return e===90||e===270?s-=t/2:(e>270||e<90)&&(s-=t),s}function I_(s,t,e){const{left:i,top:n,right:o,bottom:a}=e,{backdropColor:r}=t;if(!Vt(r)){const l=Ls(t.borderRadius),c=ae(t.backdropPadding);s.fillStyle=r;const d=i-c.left,u=n-c.top,p=o-i+c.width,m=a-n+c.height;Object.values(l).some(b=>b!==0)?(s.beginPath(),ji(s,{x:d,y:u,w:p,h:m,radius:l}),s.fill()):s.fillRect(d,u,p,m)}}function V_(s,t){const{ctx:e,options:{pointLabels:i}}=s;for(let n=t-1;n>=0;n--){const o=s._pointLabelItems[n];if(!o.visible)continue;const a=i.setContext(s.getPointLabelContext(n));I_(e,a,o);const r=Xt(a.font),{x:l,y:c,textAlign:d}=o;Fs(e,s._pointLabels[n],l,c+r.lineHeight/2,r,{color:a.color,textAlign:d,textBaseline:"middle"})}}function sd(s,t,e,i){const{ctx:n}=s;if(e)n.arc(s.xCenter,s.yCenter,t,0,Ot);else{let o=s.getPointPosition(0,t);n.moveTo(o.x,o.y);for(let a=1;a<i;a++)o=s.getPointPosition(a,t),n.lineTo(o.x,o.y)}}function L_(s,t,e,i,n){const o=s.ctx,a=t.circular,{color:r,lineWidth:l}=t;!a&&!i||!r||!l||e<0||(o.save(),o.strokeStyle=r,o.lineWidth=l,o.setLineDash(n.dash),o.lineDashOffset=n.dashOffset,o.beginPath(),sd(s,e,a,i),o.closePath(),o.stroke(),o.restore())}function E_(s,t,e){return ks(s,{label:e,index:t,type:"pointLabel"})}class gn extends zn{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ae($o(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Qt(t)&&!isNaN(t)?t:0,this.max=Qt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$o(this.options))}generateTickLabels(t){zn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const n=Rt(this.options.pointLabels.callback,[e,i],this);return n||n===0?n:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?C_(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){const e=Ot/(this._pointLabels.length||1),i=this.options.startAngle||0;return Se(t*e+ze(i))}getDistanceFromCenterForValue(t){if(Vt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Vt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return E_(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-qt+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),sd(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n,border:o}=e,a=this._pointLabels.length;let r,l,c;if(e.pointLabels.display&&V_(this,a),n.display&&this.ticks.forEach((d,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);const p=this.getContext(u),m=n.setContext(p),b=o.setContext(p);L_(this,m,l,a,b)}}),i.display){for(t.save(),r=a-1;r>=0;r--){const d=i.setContext(this.getPointLabelContext(r)),{color:u,lineWidth:p}=d;!p||!u||(t.lineWidth=p,t.strokeStyle=u,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(r,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),d=Xt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,a=t.measureText(r.label).width,t.fillStyle=c.backdropColor;const u=ae(c.backdropPadding);t.fillRect(-a/2-u.left,-o-d.size/2-u.top,a+u.width,d.size+u.height)}Fs(t,r.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}tt(gn,"id","radialLinear"),tt(gn,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Gn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),tt(gn,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),tt(gn,"descriptors",{angleLines:{_fallback:"grid"}});const Qn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fe=Object.keys(Qn);function Xr(s,t){return s-t}function Gr(s,t){if(Vt(t))return null;const e=s._adapter,{parser:i,round:n,isoWeekday:o}=s._parseOpts;let a=t;return typeof i=="function"&&(a=i(a)),Qt(a)||(a=typeof i=="string"?e.parse(a,i):e.parse(a)),a===null?null:(n&&(a=n==="week"&&(Hi(o)||o===!0)?e.startOf(a,"isoWeek",o):e.startOf(a,n)),+a)}function Zr(s,t,e,i){const n=fe.length;for(let o=fe.indexOf(s);o<n-1;++o){const a=Qn[fe[o]],r=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(r*a.size))<=i)return fe[o]}return fe[n-1]}function R_(s,t,e,i,n){for(let o=fe.length-1;o>=fe.indexOf(e);o--){const a=fe[o];if(Qn[a].common&&s._adapter.diff(n,i,a)>=t-1)return a}return fe[e?fe.indexOf(e):0]}function z_(s){for(let t=fe.indexOf(s)+1,e=fe.length;t<e;++t)if(Qn[fe[t]].common)return fe[t]}function Qr(s,t,e){if(!e)s[t]=!0;else if(e.length){const{lo:i,hi:n}=Jo(e,t),o=e[i]>=t?e[i]:e[n];s[o]=!0}}function O_(s,t,e,i){const n=s._adapter,o=+n.startOf(t[0].value,i),a=t[t.length-1].value;let r,l;for(r=o;r<=a;r=+n.add(r,1,i))l=e[r],l>=0&&(t[l].major=!0);return t}function Jr(s,t,e){const i=[],n={},o=t.length;let a,r;for(a=0;a<o;++a)r=t[a],n[r]=a,i.push({value:r,major:!1});return o===0||!e?i:O_(s,i,n,e)}class Fn extends Ws{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),n=this._adapter=new $b._date(t.adapters.date);n.init(e),Mi(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Gr(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:n,max:o,minDefined:a,maxDefined:r}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!r&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!a||!r)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=Qt(n)&&!isNaN(n)?n:+e.startOf(Date.now(),i),o=Qt(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,a=this.max,r=Zv(n,o,a);return this._unit=e.unit||(i.autoSkip?Zr(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):R_(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:z_(this._unit),this.initOffsets(n),t.reverse&&r.reverse(),Jr(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,n,o;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=ne(e,0,a),i=ne(i,0,a),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,n=this.options,o=n.time,a=o.unit||Zr(o.minUnit,e,i,this._getLabelCapacity(e)),r=yt(n.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,c=Hi(l)||l===!0,d={};let u=e,p,m;if(c&&(u=+t.startOf(u,"isoWeek",l)),u=+t.startOf(u,c?"day":a),t.diff(i,e,a)>1e5*r)throw new Error(e+" and "+i+" are too far apart with stepSize of "+r+" "+a);const b=n.ticks.source==="data"&&this.getDataTimestamps();for(p=u,m=0;p<i;p=+t.add(p,r,a),m++)Qr(d,p,b);return(p===i||n.bounds==="ticks"||m===1)&&Qr(d,p,b),Object.keys(d).sort(Xr).map(v=>+v)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,o=this._unit,a=e||n[o];return this._adapter.format(t,a)}_tickFormatFunction(t,e,i,n){const o=this.options,a=o.ticks.callback;if(a)return Rt(a,[t,e,i],this);const r=o.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&r[l],u=c&&r[c],p=i[e],m=c&&u&&p&&p.major;return this._adapter.format(t,n||(m?u:d))}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,n=ze(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),a=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:i*o+r*a,h:i*a+r*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,n=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,Jr(this,[t],this._majorUnit),n),a=this._getLabelSize(o),r=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return r>0?r:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,i=n.length;e<i;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const n=this.getLabels();for(e=0,i=n.length;e<i;++e)t.push(Gr(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Cc(t.sort(Xr))}}tt(Fn,"id","time"),tt(Fn,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wn(s,t,e){let i=0,n=s.length-1,o,a,r,l;e?(t>=s[i].pos&&t<=s[n].pos&&({lo:i,hi:n}=Vs(s,"pos",t)),{pos:o,time:r}=s[i],{pos:a,time:l}=s[n]):(t>=s[i].time&&t<=s[n].time&&({lo:i,hi:n}=Vs(s,"time",t)),{time:o,pos:r}=s[i],{time:a,pos:l}=s[n]);const c=a-o;return c?r+(l-r)*(t-o)/c:r}class tl extends Fn{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=wn(e,this.min),this._tableRange=wn(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let a,r,l,c,d;for(a=0,r=t.length;a<r;++a)c=t[a],c>=e&&c<=i&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(a=0,r=n.length;a<r;++a)d=n[a+1],l=n[a-1],c=n[a],Math.round((d+l)/2)!==c&&o.push({time:c,pos:a/(r-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((n,o)=>n-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(wn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return wn(this._table,i*this._tableRange+this._minPos,!0)}}tt(tl,"id","timeseries"),tt(tl,"defaults",Fn.defaults);const id={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},F_={ariaLabel:{type:String},ariaDescribedby:{type:String}},B_={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...id,...F_},U_=$d[0]==="2"?(s,t)=>Object.assign(s,{attrs:t}):(s,t)=>Object.assign(s,t);function Xs(s){return ml(s)?wo(s):s}function H_(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return ml(t)?new Proxy(s,{}):s}function N_(s,t){const e=s.options;e&&t&&Object.assign(e,t)}function nd(s,t){s.labels=t}function od(s,t,e){const i=[];s.datasets=t.map(n=>{const o=s.datasets.find(a=>a[e]===n[e]);return!o||!n.data||i.includes(o)?{...n}:(i.push(o),Object.assign(o,n),o)})}function j_(s,t){const e={labels:[],datasets:[]};return nd(e,s.labels),od(e,s.datasets,t),e}const W_=pl({props:B_,setup(s,t){let{expose:e,slots:i}=t;const n=I(null),o=Li(null);e({chart:o});const a=()=>{if(!n.value)return;const{type:c,data:d,options:u,plugins:p,datasetIdKey:m}=s,b=j_(d,m),v=H_(b,d);o.value=new di(n.value,{type:c,data:v,options:{...u},plugins:p})},r=()=>{const c=wo(o.value);c&&(s.destroyDelay>0?setTimeout(()=>{c.destroy(),o.value=null},s.destroyDelay):(c.destroy(),o.value=null))},l=c=>{c.update(s.updateMode)};return re(a),Po(r),lt([()=>s.options,()=>s.data],(c,d)=>{let[u,p]=c,[m,b]=d;const v=wo(o.value);if(!v)return;let _=!1;if(u){const x=Xs(u),C=Xs(m);x&&x!==C&&(N_(v,x),_=!0)}if(p){const x=Xs(p.labels),C=Xs(b.labels),T=Xs(p.datasets),$=Xs(b.datasets);x!==C&&(nd(v.config.data,x),_=!0),T&&T!==$&&(od(v.config.data,T,s.datasetIdKey),_=!0)}_&&ps(()=>{l(v)})},{deep:!0}),()=>go("canvas",{role:"img",ariaLabel:s.ariaLabel,ariaDescribedby:s.ariaDescribedby,ref:n},[go("p",{},[i.default?i.default():""])])}});function pa(s,t){return di.register(t),pl({props:id,setup(e,i){let{expose:n}=i;const o=Li(null),a=r=>{o.value=r==null?void 0:r.chart};return n({chart:o}),()=>go(W_,U_({ref:a},{type:s,...e}))}})}const q_=pa("bar",yn),Y_=pa("doughnut",Ci),K_=pa("line",_n),qe="MMM DD, YYYY",ma={...Un(["currentUser"]),methods:{formatDate(s){var t;return Gs(pi(s),((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe)},formatDateToUTC(s){var e;s=as(s);const t=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds());return Gs(t,((e=this.currentUser)==null?void 0:e.selectedDateDisplayFormat)||qe)},formatDateRelative(s){var t,e;return mi(pi(s),{userDateDisplayFormat:((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe,wantsRelativeDates:(e=this.currentUser)==null?void 0:e.wantsRelativeDates})},formatDateRelativeOmitSameYear(s){var t,e;return mi(pi(s),{userDateDisplayFormat:((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe,omitSameYear:!0,wantsRelativeDates:(e=this.currentUser)==null?void 0:e.wantsRelativeDates})},formatDateLong(s){return en(pi(s))},formatDateLongWithHoursAndMinutes(s){return en(pi(s),{includeHoursAndMinutes:!0})},formatDateTime(s){var t;return Gs(as(s),((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe)},formatDateTimeRelative(s){var t,e;return mi(as(s),{userDateDisplayFormat:((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe,wantsRelativeDates:(e=this.currentUser)==null?void 0:e.wantsRelativeDates})},formatDateTimeRelativeOmitSameYear(s){var t,e;return mi(as(s),{userDateDisplayFormat:((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe,omitSameYear:!0,wantsRelativeDates:(e=this.currentUser)==null?void 0:e.wantsRelativeDates})},formatDateTimeRelativeWithHoursAndMinutes(s){var t,e;return mi(as(s),{userDateDisplayFormat:((t=this.currentUser)==null?void 0:t.selectedDateDisplayFormat)||qe,wantsRelativeDates:(e=this.currentUser)==null?void 0:e.wantsRelativeDates,includeHoursAndMinutes:!0})},formatDateTimeLong(s){return en(as(s))},formatDateTimeLongWithHoursAndMinutes(s){return en(as(s),{includeHoursAndMinutes:!0})},formatDateTimeToUserDisplayFormatWithHoursAndMinutes(s){var e;const t=(((e=this.currentUser)==null?void 0:e.selectedDateDisplayFormat)||qe)+", h:mm a";return Gs(as(s),t)}}};di.register(ha,fa,ua,Di,On,qi,Cn);const X_={name:"LineChart",components:{LineChartGenerator:K_},mixins:[ma],props:{chartId:{type:String,default:"line-chart"},datasetIdKey:{type:String,default:"label"},height:{type:Number,default:340},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},openedTickets:{type:Object,default:()=>{}},closedTickets:{type:Object,default:()=>{}}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:14}}}}}}},computed:{...Un(["currentUser"]),chartData(){return{labels:Object.keys(this.openedTickets).map(s=>this.formatDate(s)),datasets:[{label:"Open",backgroundColor:"#E5722D",data:Object.values(this.openedTickets)},{label:"Closed",backgroundColor:"#007FA2",data:Object.values(this.closedTickets)}]}}}};function G_(s,t,e,i,n,o){const a=_t("LineChartGenerator");return w(),M(a,{options:n.chartOptions,data:o.chartData,"chart-id":e.chartId,"dataset-id-key":e.datasetIdKey,plugins:e.plugins,"css-classes":e.cssClasses,styles:e.styles,height:e.height,"aria-label":"line chart showing open and closed tickets frequency per day"},null,8,["options","data","chart-id","dataset-id-key","plugins","css-classes","styles","height"])}const Z_=St(X_,[["render",G_]]);di.register(ha,fa,ua,Sn,qi,On);const Q_={name:"BarChart",components:{Bar:q_},mixins:[ma],props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},height:{type:Number,default:340},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},openedTickets:{type:Object,default:()=>{}},closedTickets:{type:Object,default:()=>{}}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{position:"bottom",labels:{font:{size:14}}}}}}},computed:{...Un(["currentUser"]),chartData(){return{labels:Object.keys(this.openedTickets).map(s=>this.formatDate(s)),datasets:[{label:"Open",backgroundColor:"#E5722D",data:Object.values(this.openedTickets)},{label:"Closed",backgroundColor:"#007FA2",data:Object.values(this.closedTickets)}]}}}};function J_(s,t,e,i,n,o){const a=_t("Bar");return w(),M(a,{options:n.chartOptions,data:o.chartData,"chart-id":e.chartId,"dataset-id-key":e.datasetIdKey,plugins:e.plugins,"css-classes":e.cssClasses,styles:e.styles,height:e.height,"aria-label":"bar chart showing open and closed ticket frequency per day"},null,8,["options","data","chart-id","dataset-id-key","plugins","css-classes","styles","height"])}const tk=St(Q_,[["render",J_]]);di.register(ha,fa,ua,Ti,qi);const ek={name:"DoughnutChart",components:{Doughnut:Y_},props:{chartId:{type:String,default:"doughnut-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:100},height:{type:Number,default:280},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},breakdownData:{type:Object,default:()=>{}},ariaLabel:{type:String,required:!0}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:14}}}}},colors:["#E5722D","#FFC20E","#2C9B7F","#FF9E1B","#3A8288","#007FA2","#B25823","#CC7E15","#CC9B0B","#237C65","#2C6166","#135B71","#7F3F19","#995E10","#997408","#113E32","#1D4144","#0C3D4B","#4C742F","#0E398E","#543B6F","#365322","#0A2966","#3A2A4F","#203214","#06183D","#23192F"]}},computed:{chartData(){return{labels:Object.keys(this.breakdownData),datasets:[{data:Object.values(this.breakdownData),backgroundColor:this.colors}]}}}},sk={key:1,class:"tw-mr-1 tw-text-3.5xl"};function ik(s,t,e,i,n,o){const a=_t("Doughnut");return w(),D("div",null,[Object.keys(e.breakdownData).length>0?(w(),M(a,{key:0,options:n.chartOptions,data:o.chartData,"chart-id":e.chartId,"dataset-id-key":e.datasetIdKey,plugins:e.plugins,"css-classes":e.cssClasses,styles:e.styles,width:e.width,height:e.height,"aria-label":e.ariaLabel},null,8,["options","data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height","aria-label"])):(w(),D("span",sk,"--"))])}const nk=St(ek,[["render",ik]]),ok={props:{seconds:{type:String,default:""}},data:()=>({time:"",label:"",remainder:"",remainderLabel:""}),mounted(){this.generateDurationLabel()},methods:{generateDurationLabel(){const s=this.seconds?Math.floor(parseInt(this.seconds)):0,t=ou({start:0,end:s*1e3});let e,i,n,o;t.years>0?(e=t.years,i=t.months,n=this.singularize("years",e),o=this.singularize("months",i)):t.months>0?(e=t.months,i=t.days,n=this.singularize("months",e),o=this.singularize("days",i)):t.days>0?(e=t.days,i=t.hours,n=this.singularize("days",e),o=this.singularize("hours",i)):t.hours>0?(e=t.hours,i=t.minutes,n=this.singularize("hours",e),o=this.singularize("minutes",i)):t.minutes>0?(e=t.minutes,i=t.seconds,n=this.singularize("minutes",e),o=this.singularize("seconds",i)):t.seconds>0?(e=t.seconds,n=this.singularize("seconds",e),i=o=""):(e="--",n=i=o=""),this.time=e,this.remainder=i,this.label=n,this.remainderLabel=o},singularize(s,t){return t===1?s.substring(0,s.length-1):s}}},ak={class:"tw-truncate tw-text-earl-700"},rk={class:"tw-mr-1 tw-text-3.5xl"},lk={class:"tw-mr-3 tw-text-xl"},ck={class:"tw-mr-1 tw-text-3.5xl"},dk={class:"tw-text-xl"};function uk(s,t,e,i,n,o){return w(),D("div",ak,[g("span",rk,L(s.time),1),g("span",lk,L(s.label),1),g("span",ck,L(s.remainder),1),g("span",dk,L(s.remainderLabel),1)])}const hk=St(ok,[["render",uk]]),fk={components:{TicketStats:pv,TicketHistoryChart:Z_,TicketChurnChart:tk,DoughnutChart:nk,DurationLabel:hk,LoadingSpinner:de,SlimFooter:Ns},data:()=>({isLoading:!1,dashboardData:{},timeframes:[{value:"today",label:"Today"},{value:"last_week",label:"Last 7 Days"},{value:"last_month",label:"Last 30 Days"}]}),computed:{...$e(["organizations","currentUserAccessibleOrganizations"]),organizationHost:{get(){return this.$route.query.organization||""},set(s){this.$router.replace({name:"Dashboard",query:{...this.$route.query,organization:s||void 0}})}},organizationsSelectOptions(){const s=this.currentUserAccessibleOrganizations.map(t=>({host:t.host,name:t.name}));return this.organizations.length==0||this.organizations.length>this.currentUserAccessibleOrganizations.length?s:[{host:"",name:"All Organizations"},...s]},timeframe:{get(){return this.$route.query.timeframe||"last_week"},set(s){this.$router.replace({name:"Dashboard",query:{...this.$route.query,timeframe:s}})}},ticketStats(){const{num_new_tickets:s,diff_new_tickets:t,num_your_tickets:e,diff_your_tickets:i,num_open_tickets:n,diff_open_tickets:o,unassigned_tickets:a,diff_unassigned_tickets:r}=this.dashboardData;return[{label:"New Tickets",count:s,change:t},{label:"Your Tickets",count:e,change:i},{label:"Open Tickets",count:n,change:o},{label:"Unassigned Tickets",count:a,change:r}]}},watch:{"$route.query":{handler(){this.getDashboardData()}},$route:{handler(){this.redirectIfUserDoesNotHaveOrganziationsAccess()}},currentUserAccessibleOrganizations:{handler(){this.redirectIfUserDoesNotHaveOrganziationsAccess()}}},created(){this.redirectIfUserDoesNotHaveOrganziationsAccess(),this.getDashboardData(),document.title="Dashboard - Spiceworks Help Desk"},methods:{...He(["showSnackbar"]),async getDashboardData(){try{this.isLoading=!0;const{organization:s,timeframe:t}=this.$route.query,{data:e}=await Oe.get("/api/dashboard.json",{params:{organization:s,timeframe:t}});this.dashboardData=e}catch{this.showSnackbar({display:!0,type:"error",message:"Failed to retrieve dashboard data."})}finally{this.isLoading=!1}},redirectIfUserDoesNotHaveOrganziationsAccess(){var s,t;if(this.organizations.length>this.currentUserAccessibleOrganizations.length&&(!((s=this.$route.query)!=null&&s.organization)||!this.currentUserAccessibleOrganizations.find(e=>e.host===this.$route.query.organization))){const e=(t=this.currentUserAccessibleOrganizations[0])==null?void 0:t.host;e&&this.$router.replace({name:"Dashboard",query:{...this.$route.query,organization:e}})}}}},pk={class:"tw-flex tw-flex-auto tw-flex-col tw-overflow-y-auto"},mk={class:"tw-flex tw-items-center tw-border-b tw-border-earl-100 tw-p-4"},gk=g("span",{class:"tw-hidden tw-text-xl tw-leading-tight md:tw-block"},"Dashboard",-1),wk=["value"],vk=["value"],bk={class:"tw-overflow-y-auto"},yk={class:"tw-flex tw-flex-col tw-items-center tw-gap-4 tw-p-4 md:tw-flex-row md:tw-items-start"},_k={class:"tw-flex tw-w-full tw-flex-col tw-gap-4 md:tw-w-2/3"},kk={class:"tw-h-96 tw-rounded tw-border tw-border-earl-300 tw-p-3 tw-pb-6"},xk=g("div",{class:"tw-font-bold"},"Ticket History",-1),Ck={class:"tw-h-96 tw-rounded tw-border tw-border-earl-300 tw-p-3 tw-pb-6"},Sk=g("div",{class:"tw-font-bold"},"Ticket Churn",-1),Tk={class:"tw-flex tw-w-full tw-flex-col tw-gap-4 md:tw-w-1/3"},Dk={class:"tw-h-29 tw-rounded tw-border tw-border-earl-300 tw-p-3"},Ak=g("div",{class:"tw-mb-2 tw-font-bold"},"First Response Time",-1),$k=g("div",{class:"tw-text-xs tw-text-earl-600"},"Average",-1),Mk={class:"tw-h-29 tw-rounded tw-border tw-border-earl-300 tw-p-3"},Pk=g("div",{class:"tw-mb-2 tw-font-bold"},"Tickets Close Time",-1),Ik=g("div",{class:"tw-text-xs tw-text-earl-600"},"Average",-1),Vk={class:"tw-rounded tw-border tw-border-earl-300 tw-p-3"},Lk=g("div",{class:"tw-font-bold"},"Category Breakdown",-1),Ek={class:"tw-rounded tw-border tw-border-earl-300 tw-p-3"},Rk=g("div",{class:"tw-font-bold"},"Top 5 Ticket Creators",-1);function zk(s,t,e,i,n,o){const a=_t("TicketStats"),r=_t("TicketHistoryChart"),l=_t("TicketChurnChart"),c=_t("LoadingSpinner"),d=_t("DurationLabel"),u=_t("DoughnutChart"),p=_t("SlimFooter");return w(),D("section",pk,[g("div",mk,[gk,f(bt,{size:"0.625rem",color:"earl-200",class:"tw-ml-4 tw-mr-2 tw-hidden md:tw-block"},{default:y(()=>[N("mdi-checkbox-blank-circle")]),_:1}),Ft(g("select",{"onUpdate:modelValue":t[0]||(t[0]=m=>o.timeframe=m),class:"form-select tw-flex tw-max-w-50vw tw-justify-center tw-py-0 tw-font-medium md:tw-max-w-25vw md:tw-text-xl"},[(w(!0),D(ht,null,vt(s.timeframes,m=>(w(),D("option",{key:m.value,value:m.value},L(m.label),9,wk))),128))],512),[[si,o.timeframe]]),Ft(g("select",{"onUpdate:modelValue":t[1]||(t[1]=m=>o.organizationHost=m),class:"form-select tw-ml-1 tw-flex tw-max-w-50vw tw-justify-center tw-py-0 tw-font-medium md:tw-max-w-25vw md:tw-text-xl"},[(w(!0),D(ht,null,vt(o.organizationsSelectOptions,m=>(w(),D("option",{key:m.name,value:m.host},L(m.name),9,vk))),128))],512),[[si,o.organizationHost]])]),g("div",bk,[f(a,{"ticket-stats":o.ticketStats},null,8,["ticket-stats"]),g("div",yk,[g("div",_k,[g("div",kk,[xk,s.dashboardData.by_opened_at?(w(),M(r,{key:0,"opened-tickets":s.dashboardData.by_opened_at,"closed-tickets":s.dashboardData.by_closed_at},null,8,["opened-tickets","closed-tickets"])):F("",!0)]),g("div",Ck,[Sk,s.dashboardData.by_opened_at?(w(),M(l,{key:0,"opened-tickets":s.dashboardData.by_opened_at,"closed-tickets":s.dashboardData.by_closed_at},null,8,["opened-tickets","closed-tickets"])):F("",!0)])]),g("div",Tk,[g("div",Dk,[Ak,$k,s.isLoading?(w(),M(c,{key:0,size:32,width:4})):(w(),M(d,{key:1,title:"First Response Time",seconds:s.dashboardData.avg_first_response_secs},null,8,["seconds"]))]),g("div",Mk,[Pk,Ik,s.isLoading?(w(),M(c,{key:0,size:32,width:4})):(w(),M(d,{key:1,title:"First Response Time",seconds:s.dashboardData.avg_close_time_secs},null,8,["seconds"]))]),g("div",Vk,[Lk,s.dashboardData.by_category?(w(),M(u,{key:0,"breakdown-data":s.dashboardData.by_category,"aria-label":"doughnut chart showing ticket category breakdown"},null,8,["breakdown-data"])):F("",!0)]),g("div",Ek,[Rk,s.dashboardData.by_creators?(w(),M(u,{key:0,"breakdown-data":s.dashboardData.by_creators,"aria-label":"doughnut chart showing ticket creator breakdown"},null,8,["breakdown-data"])):F("",!0)])])])]),f(p)])}const Ok=St(fk,[["render",zk]]),Fk=[{path:"/dashboard",component:Ok,name:"Dashboard"}],Bk={components:{InfoModal:ii,SpiceworksButton:ut},props:{isShowingDialog:{type:Boolean,required:!0}},emits:["update:isShowingDialog","add-new-export"],data(){return{reportType:"ticket",timeframe:"all_time",timeframesToSelect:[{id:"all_time",name:"All Time"},{id:"last_month",name:"Last Month"},{id:"this_month",name:"This Month"},{id:"last_week",name:"Last Week"},{id:"this_week",name:"This Week"},{id:"yesterday",name:"Yesterday"},{id:"today",name:"Today"}],organizationId:null,reportFormat:"CSV",reportFormatsToSelect:["CSV","JSON","XLSX"],isShowingDialogData:this.isShowingDialog}},computed:{...$e(["organizations"]),organizationToSelect(){return[{id:null,name:"All Organizations"},...this.organizations]}},watch:{isShowingDialog(s){this.isShowingDialogData=s},isShowingDialogData(s){this.$emit("update:isShowingDialog",s)}},methods:{closeDialog(){this.$emit("update:isShowingDialog",!1),setTimeout(()=>{Object.assign(this.$data,this.$options.data.apply(this))},500)},addNewExport(){this.$emit("add-new-export",{timeframe:this.timeframe,reportFormat:this.reportFormat,reportType:this.reportType,organizationId:this.organizationId}),this.closeDialog()}}},Uk={class:"tw-flex tw-items-center tw-gap-4"},Hk=g("span",{class:"tw-text-earl-1000"},"Export Type",-1);function Nk(s,t,e,i,n,o){const a=_t("SpiceworksButton"),r=_t("InfoModal");return w(),M(r,{"is-showing-dialog":n.isShowingDialogData,"onUpdate:isShowingDialog":t[5]||(t[5]=l=>n.isShowingDialogData=l),"show-action-buttons":!0,"show-close-button":!0,"close-button-text":"Cancel",onCloseDialog:o.closeDialog},{content:y(()=>[g("div",Uk,[Hk,f(Md,{modelValue:n.reportType,"onUpdate:modelValue":t[1]||(t[1]=l=>n.reportType=l)},{default:y(()=>[f(pt,{value:"ticket",class:"tw-normal-case tw-tracking-normal","aria-pressed":n.reportType==="ticket"},{default:y(()=>[N(" Tickets ")]),_:1},8,["aria-pressed"]),f(pt,{value:"labor",class:"tw-normal-case tw-tracking-normal","aria-pressed":n.reportType==="labor",onClick:t[0]||(t[0]=l=>n.reportFormat="CSV")},{default:y(()=>[N(" Labor ")]),_:1},8,["aria-pressed"])]),_:1},8,["modelValue"])]),f(Ze,{modelValue:n.organizationId,"onUpdate:modelValue":t[2]||(t[2]=l=>n.organizationId=l),"item-title":"name","item-value":"id",items:o.organizationToSelect,label:"Organization",class:"tw-pt-3"},null,8,["modelValue","items"]),f(Ze,{modelValue:n.timeframe,"onUpdate:modelValue":t[3]||(t[3]=l=>n.timeframe=l),"item-title":"name","item-value":"id",items:n.timeframesToSelect,label:"Timeframe",class:"tw-pt-3"},null,8,["modelValue","items"]),n.reportType==="ticket"?(w(),M(Ze,{key:0,modelValue:n.reportFormat,"onUpdate:modelValue":t[4]||(t[4]=l=>n.reportFormat=l),items:n.reportFormatsToSelect,label:"Export File Type",class:"tw-pt-3"},null,8,["modelValue","items"])):F("",!0)]),buttonActions:y(()=>[f(a,{"button-type":"primary",text:"Create Report",onClick:o.addNewExport},null,8,["onClick"])]),default:y(()=>[is(s.$slots,"default",{},()=>[N("Create an Export")])]),_:3},8,["is-showing-dialog","onCloseDialog"])}const jk=St(Bk,[["render",Nk]]),Wk={components:{NewExportModal:jk,SpiceworksButton:ut},data:()=>({isShowingDialog:!1}),methods:{...He(["getExports","createExport","showSnackbar"]),async refreshExports(){try{Yt.track("export refreshed","exports"),await this.getExports()}catch{this.showSnackbar({display:!0,message:"Refresh exports failed. Please try again.",type:"error"})}},showNewExportDialog(){this.isShowingDialog=!0,Yt.track("export create modal open","exports")},async createNewExport(s){const t={report_type:s.reportType,report_format:s.reportFormat,for_desktop:!1,timeframe:s.timeframe,organization_id:s.organizationId};try{Yt.track("export ran","exports"),await this.createExport(t),this.showSnackbar({display:!0,message:"Running export... Watch your email.",type:"success"})}catch{this.showSnackbar({display:!0,message:"Export failed. Please try again later.",type:"error"})}}}},qk={class:"tw-flex tw-justify-between tw-border-b tw-border-earl-100 tw-p-2"},Yk=g("div",{class:"tw-flex tw-items-center tw-border-earl-100 tw-p-4"},[g("span",{class:"tw-hidden tw-text-xl tw-leading-tight md:tw-block"},"Exports")],-1),Kk={class:"tw-flex tw-items-center tw-justify-center"};function Xk(s,t,e,i,n,o){const a=_t("NewExportModal"),r=_t("SpiceworksButton");return w(),D("section",null,[f(a,{"is-showing-dialog":s.isShowingDialog,"onUpdate:isShowingDialog":t[0]||(t[0]=l=>s.isShowingDialog=l),onAddNewExport:o.createNewExport},null,8,["is-showing-dialog","onAddNewExport"]),g("div",qk,[Yk,g("div",Kk,[f(r,{"button-type":"primary",icon:"mdi-plus",text:"New Export",onClick:o.showNewExportDialog},null,8,["onClick"]),f(pt,{class:"tw-mx-2",icon:"mdi-refresh","aria-label":"refresh exports",onClick:o.refreshExports},null,8,["onClick"])])])])}const Gk=St(Wk,[["render",Xk]]),Zk={components:{TruncatedTableCell:$s},mixins:[ma],props:{export:{type:Object,required:!0}},computed:{...Un(["currentUser"]),...$e({attachments:s=>s.exportsModule.attachments,archivedUsers:s=>s.exportsModule.archivedUsers,users:s=>s.exportsModule.users}),...$e(["organizations"]),exportName(){const t=[{value:"all_time",menu:"All Time",text:"All"},{value:"last_month",menu:"Last Month",text:"Last month's"},{value:"this_month",menu:"This Month",text:"This month's"},{value:"last_week",menu:"Last Week",text:"Last week's"},{value:"this_week",menu:"This Week",text:"This week's"},{value:"yesterday",menu:"Yesterday",text:"Yesterday's"},{value:"today",menu:"Today",text:"Today's"}].find(o=>o.value===this.export.timeframe);let e=this.export.reportType;e==="ticket"&&(e="tickets");const i=this.export.reportFormat.toUpperCase(),n=this.organizations.find(o=>o.id===this.export.organizationId);return n?`${t.text} ${e} for ${n.name} (${i})`:`${t.text} ${e} (${i})`},dateRange(){if(this.export.timeframe==="all_time")return"All Time";if(this.export.startDate&&this.export.endDate){const s=this.formatDateToUTC(this.export.startDate),t=this.formatDateToUTC(this.export.endDate);return s===t?t:`${s} - ${t}`}return""},createdAt(){return this.formatDateTimeRelative(this.export.createdAt)},createdAtTooltipDisplay(){return this.formatDateTimeLongWithHoursAndMinutes(this.export.createdAt)},createdAtDateForScreenReader(){return`${this.createdAt}, ${this.createdAtTooltipDisplay}`},creator(){const s=this.users.concat(this.archivedUsers).find(t=>t.id===this.export.creator.id);return s?s.name:""},isDownloadReady(){return this.export.attachmentIds.length>0},status(){return this.isDownloadReady?"Ready":"Running"},statusIconName(){return this.isDownloadReady?"mdi-check-circle-outline":"mdi-timer-sand"},attachmentUrl(){var s;return(s=this.attachments.find(t=>t.id===this.export.attachmentIds[0]))==null?void 0:s.downloadUrl}},methods:{...He(["deleteExport","createExport","showSnackbar"]),async rerunExport(){try{Yt.track("export reran","exports"),await this.createExport(this.export),this.showSnackbar({display:!0,message:"Re-running export. Please wait.",type:"success"})}catch{this.showSnackbar({display:!0,message:"Export re-run failed. Please try again later.",type:"error"})}},async deleteCurrentExport(){try{Yt.track("export deleted","exports"),await this.deleteExport(this.export.id),this.showSnackbar({display:!0,message:"Export deleted.",type:"success"})}catch{this.showSnackbar({display:!0,message:"Delete export failed. Please try again later.",type:"error"})}},trackDownload(){Yt.track("export downloaded","exports")}}},Qk={class:"tw-border-b tw-border-solid tw-border-earl-100 tw-leading-9 hover:tw-bg-earl-100"},Jk={class:"tw-max-w-xs tw-truncate tw-py-2 tw-pl-4"},t8=["aria-label"],e8={class:"tw-max-w-56 tw-truncate"},s8=g("span",null,"Download",-1);function i8(s,t,e,i,n,o){const a=_t("TruncatedTableCell");return w(),D("tr",Qk,[g("td",Jk,[f(a,{"cell-content":o.exportName,"max-width":320},null,8,["cell-content"])]),g("td",null,L(o.dateRange),1),g("td",null,[f(xe,{"z-index":"30"},{activator:y(({props:r})=>[g("div",Qs(Js(r)),[g("span",{"aria-label":o.createdAtDateForScreenReader},L(o.createdAt),9,t8)],16)]),default:y(()=>[g("span",null,L(o.createdAtTooltipDisplay),1)]),_:1})]),g("td",e8,[f(a,{"cell-content":o.creator,"max-width":224},null,8,["cell-content"])]),g("td",null,[f(bt,{size:"small",color:"earl-500"},{default:y(()=>[N(L(o.statusIconName),1)]),_:1}),N(" "+L(o.status),1)]),g("td",null,[o.isDownloadReady?(w(),M(xe,{key:0},{activator:y(({props:r})=>[f(pt,Ht({icon:"mdi-download",href:o.attachmentUrl},r,{onClick:o.trackDownload}),null,16,["href","onClick"])]),default:y(()=>[s8]),_:1})):F("",!0),f(ws,{"scroll-strategy":"close"},{activator:y(({props:r})=>[f(pt,Ht({icon:"mdi-dots-vertical","aria-label":"show export actions"},r),null,16)]),default:y(()=>[f(Jt,{class:"tw-py-0"},{default:y(()=>[f(ft,{onClick:t[0]||(t[0]=r=>o.rerunExport())},{prepend:y(()=>[f(bt,{size:"small"},{default:y(()=>[N("mdi-refresh")]),_:1})]),default:y(()=>[f(Re,null,{default:y(()=>[N("Re-run")]),_:1})]),_:1}),f(ft,{onClick:t[1]||(t[1]=r=>o.deleteCurrentExport())},{prepend:y(()=>[f(bt,{size:"small"},{default:y(()=>[N("mdi-delete-outline")]),_:1})]),default:y(()=>[f(Re,null,{default:y(()=>[N("Delete")]),_:1})]),_:1})]),_:1})]),_:1})])])}const n8=St(Zk,[["render",i8]]);const o8={components:{LoadingSpinner:de,ExportRow:n8},computed:{...$e({exports:s=>s.exportsModule.exports,isLoading:s=>s.exportsModule.isLoading})},created(){this.getExportsData()},methods:{...He(["showSnackbar","getExports"]),async getExportsData(){try{await this.getExports()}catch{this.showSnackbar({display:!0,type:"error",message:"Failed to retrieve exports"})}}}},a8=s=>(Pe("data-v-8229445a"),s=s(),Ie(),s),r8={class:"tw-relative tw-flex tw-flex-1 tw-overflow-y-auto"},l8={class:"chd-exports-table tw-flex-1"},c8={key:1,class:"tw-w-full tw-whitespace-nowrap"},d8=a8(()=>g("thead",{class:"tw-sticky tw-top-0 tw-z-10 tw-bg-white tw-p-2 tw-pl-4 tw-text-left tw-text-sm tw-font-medium tw-text-earl-500"},[g("tr",null,[g("th",{class:"tw-p-2 tw-pl-4"},[g("div",{class:"tw-flex tw-cursor-default tw-items-center"},[g("span",{class:"tw-mr-2 tw-flex-none"},"Name")])]),g("th",null,[g("div",{class:"tw-flex tw-cursor-default tw-items-center"},[g("span",{class:"tw-mr-2 tw-flex-none"},"Date Range")])]),g("th",null,[g("div",{class:"tw-flex tw-cursor-default tw-items-center"},[g("span",{class:"tw-mr-2 tw-flex-none"},"Created")])]),g("th",null,[g("div",{class:"tw-flex tw-cursor-default tw-items-center"},[g("span",{class:"tw-mr-2 tw-flex-none"},"Creator")])]),g("th",null,[g("div",{class:"tw-flex tw-cursor-default tw-items-center"},[g("span",{class:"tw-mr-2 tw-flex-none"},"Status")])]),g("th",{class:"tw-pl-2"},[g("div",{class:"tw-flex tw-cursor-default tw-items-center"},[g("span",{class:"tw-mr-2 tw-flex-none"},"Actions")])])])],-1)),u8={class:"tw-text-left tw-text-sm tw-text-earl-1000"},h8={key:2,class:"tw-p-4 tw-text-center tw-text-lg tw-text-earl-500"};function f8(s,t,e,i,n,o){const a=_t("LoadingSpinner"),r=_t("ExportRow");return w(),D("div",r8,[g("div",l8,[s.isLoading?(w(),M(a,{key:0,class:"tw-h-full"})):s.exports.length>0?(w(),D("table",c8,[d8,g("tbody",u8,[(w(!0),D(ht,null,vt(s.exports,l=>(w(),M(r,{key:l.id,export:l},null,8,["export"]))),128))])])):(w(),D("div",h8," No exports found. "))])])}const p8=St(o8,[["render",f8],["__scopeId","data-v-8229445a"]]);class m8{constructor(){Object.assign(this,Nn),this.assignCsrfToken()}async getReports(){const t="/api/reports";try{const{data:e}=await Oe.get(t);return we(e)}catch(e){throw we(e.response.data)}}async createReport(t){const e="/api/reports";try{const{data:i}=await Oe.post(e,Bo({report:t}));return we(i)}catch(i){throw we(i.response.data)}}async deleteReport(t){const e=`/api/reports/${t}`;try{const{data:i}=await Oe.delete(e);return we(i)}catch(i){throw we(i.response.data)}}}const fo=new m8,g8={state:{exports:[],attachments:[],archivedUsers:[],users:[],isLoading:!1},mutations:{SET_EXPORTS(s,t){s.exports=t},SET_ATTACHMENTS(s,t){s.attachments=t},SET_ARCHIVED_USERS(s,t){s.archivedUsers=t},SET_USERS(s,t){s.users=t},SET_IS_LOADING(s,t){s.isLoading=t}},actions:{async getExports(s){s.commit("SET_IS_LOADING",!0);try{const t=await fo.getReports(),e=t==null?void 0:t.archivedUsers,i=t==null?void 0:t.attachments,n=t==null?void 0:t.reports,o=t==null?void 0:t.users;s.commit("SET_ARCHIVED_USERS",e),s.commit("SET_ATTACHMENTS",i),s.commit("SET_EXPORTS",n),s.commit("SET_USERS",o)}finally{s.commit("SET_IS_LOADING",!1)}},async createExport(s,t){s.commit("SET_IS_LOADING",!0);try{const e=await fo.createReport(t);s.commit("SET_EXPORTS",[e.report].concat(s.state.exports))}finally{s.commit("SET_IS_LOADING",!1)}},async deleteExport(s,t){s.commit("SET_IS_LOADING",!0);try{await fo.deleteReport(t),s.commit("SET_EXPORTS",s.state.exports.filter(e=>e.id!==t))}finally{s.commit("SET_IS_LOADING",!1)}}}},w8={components:{ExportsHeader:Gk,ExportsTable:p8,SlimFooter:Ns},created(){this.$store.hasModule("exportsModule")||this.$store.registerModule("exportsModule",g8),document.title="Exports - Spiceworks Help Desk"}},v8={class:"tw-flex tw-w-full tw-flex-auto tw-flex-col tw-overflow-y-auto tw-border-r tw-border-earl-100"};function b8(s,t,e,i,n,o){const a=_t("ExportsHeader"),r=_t("ExportsTable"),l=_t("SlimFooter");return w(),D("section",v8,[f(a),f(r),f(l)])}const y8=St(w8,[["render",b8]]),_8=[{path:"/exports",component:y8,name:"Exports"}],k8={components:{UserAvatar:ri},props:{article:{type:Object,required:!0}},computed:{articleUrl(){return{name:"KnowledgeBaseViewArticle",params:{article_id:this.article.id}}}},methods:{trackAuthorClick(){Yt.track("author-link","knowledge base home")}}},x8={class:"tw-flex tw-items-center"},C8={class:"tw-truncate"};function S8(s,t,e,i,n,o){const a=_t("router-link"),r=_t("UserAvatar");return w(),M(pe,{height:"200px",class:"tw-w-full tw-border-earl-200 md:tw-w-80"},{default:y(()=>[f(ss,{class:"tw-whitespace-normal tw-break-normal tw-p-4 tw-leading-normal tw-text-dusk-500"},{default:y(()=>[f(a,{class:"tw-line-clamp-2 tw-text-base tw-font-bold",to:o.articleUrl},{default:y(()=>[N(L(e.article.title),1)]),_:1},8,["to"])]),_:1}),f(Xd,null,{default:y(()=>{var l,c;return[g("div",x8,[f(r,{size:20,class:"mr-4",user:e.article.creator},null,8,["user"]),g("div",C8,L((c=(l=e.article)==null?void 0:l.creator)==null?void 0:c.name),1)])]}),_:1}),f(ce,{class:"tw-line-clamp-3 tw-pb-0"},{default:y(()=>[N(L(e.article.introduction),1)]),_:1})]),_:1})}const T8=St(k8,[["render",S8]]),D8={props:{pageNumber:{type:Number,required:!0},articlesPerPage:{type:Number,required:!0},articlesCount:{type:Number,required:!0},disabled:{type:Boolean,required:!0}},computed:{range(){const s=this.pageNumber===1?1:this.articlesPerPage*(this.pageNumber-1)+1;let t;return this.pageNumber===this.totalPages?t=this.articlesCount:this.pageNumber===1?t=this.articlesPerPage:t=this.articlesPerPage+s-1,`${s} - ${t}`},totalPages(){return Math.ceil(this.articlesCount/this.articlesPerPage)}},methods:{changePage(s){const t=this.pageNumber+s;t>this.totalPages||t<1||this.$router.push({name:"KnowledgeBaseArticlesList",params:{...this.$route.params,page:t},query:this.$route.query})}}},A8={key:0,class:"tw-float-left tw-flex tw-flex-row-reverse tw-items-center tw-text-base md:tw-float-none md:tw-flex-row"};function $8(s,t,e,i,n,o){const a=_t("router-link");return w(),D("div",null,[e.articlesCount>0?(w(),D("div",A8,[g("span",null,L(o.range)+" of "+L(e.articlesCount),1),g("div",null,[f(pt,{icon:"mdi-chevron-left",disabled:e.disabled||e.pageNumber===1,"aria-label":"page back",onClick:t[0]||(t[0]=r=>o.changePage(-1))},null,8,["disabled"]),f(pt,{icon:"mdi-chevron-right",disabled:e.disabled||e.pageNumber===o.totalPages,"aria-label":"page forward",onClick:t[1]||(t[1]=r=>o.changePage(1))},null,8,["disabled"])])])):F("",!0),f(a,{to:"/knowledge_base/new",custom:""},{default:y(({navigate:r})=>[f(pt,{class:"font-weight-bold tw-float-right tw-mr-1 tw-mt-1 md:tw-hidden",icon:"mdi-plus",color:"primary",height:"48",width:"48","aria-label":"Add article",role:"link",variant:"elevated",onClick:r},null,8,["onClick"])]),_:1})])}const M8=St(D8,[["render",$8]]),P8={components:{ArticleCard:T8,PageControls:M8,LoadingSpinner:de},props:{filter:{type:String,required:!0}},data:()=>({isLoadingInitially:!0,isLoadingArticles:!1,articles:[],searchableCount:0,totalCount:0,selectedSort:"edited_at",sortOptions:[{title:"Last Updated",value:"edited_at"},{title:"Title",value:"title"}],pageNumber:1,articlesPerPage:9,showEmptyState:!0,searchText:""}),computed:{...$e(["appConfig"]),browseResultsText(){return this.totalCount==1?"Browse 1 Result":`Browse ${this.totalCount} Results`},searchCountText(){return this.searchableCount==1?"Search 1 Result":`Search ${this.searchableCount} Results`},search:{get(){return this.searchText},set:Ri.debounce(function(t){this.searchText=t,this.doSearch()},500)}},watch:{$route:{async handler(){this.populateArticles()}}},async mounted(){await this.populateArticles(),this.isLoadingInitially=!1},methods:{...He(["showSnackbar"]),async populateArticles(){this.isLoadingArticles=!0;try{this.populateArticleFiltersFromRoute();const t=await new Fo().getArticles({filter:this.filter,pageNumber:this.pageNumber,articlesPerPage:this.articlesPerPage,searchText:this.searchText,order:this.selectedSort});this.articles=t.data,this.searchableCount=t.meta.searchableCount,this.totalCount=t.meta.totalCount,this.showEmptyState=this.totalCount===0}catch{this.showEmptyState=!0,this.showSnackbar({display:!0,type:"error",message:"An error occurred while retrieving articles."})}finally{this.isLoadingArticles=!1}},populateArticleFiltersFromRoute(){this.$route.params.page&&(this.pageNumber=parseInt(this.$route.params.page)),this.$route.query.q?this.searchText=this.$route.query.q:this.searchText="",this.$route.query.sort?this.selectedSort=this.$route.query.sort:this.selectedSort="edited_at"},doSort(){this.$router.push({name:"KnowledgeBaseArticlesList",params:{...this.$route.params,page:1},query:{...this.$route.query,sort:this.selectedSort}})},doSearch(){this.$router.push({name:"KnowledgeBaseArticlesList",params:{...this.$route.params,page:1},query:{sort:this.selectedSort,...this.searchText&&{q:this.searchText}}})},isSortEnabled(){var s;return this.filter!=="everyone"||((s=this.searchText)==null?void 0:s.length)>0}}},I8={class:"tw-flex tw-h-full tw-flex-col"},V8={key:1,class:"tw-flex tw-h-full tw-flex-col"},L8={class:"tw-flex tw-flex-auto tw-flex-col tw-overflow-y-auto tw-p-4"},E8={class:"tw-flex tw-w-full tw-items-center tw-justify-between"},R8={class:"tw-flex tw-w-full tw-flex-col tw-gap-8"},z8={class:"tw-mb-4.5 tw-flex tw-items-center tw-justify-between"},O8={class:"tw-flex tw-flex-col tw-gap-4 md:tw-flex-row md:tw-items-center"},F8={key:0,class:"tw-hidden tw-text-lg tw-leading-tight md:tw-block"},B8={key:1,class:"tw-hidden tw-items-center tw-gap-4 lg:tw-flex"},U8={class:"tw-hidden tw-text-lg tw-leading-tight md:tw-block"},H8={key:2,class:"tw-flex"},N8=g("label",{for:"sortSelect",class:"tw-text-base tw-text-earl-600 md:tw-text-lg"},"Sort by:",-1),j8=["value"],W8={class:"tw-hidden md:tw-block"},q8={key:1,class:"tw-w-full tw-p-4 tw-text-center tw-text-lg tw-text-earl-500"},Y8={key:2,class:"tw-flex tw-flex-wrap tw-gap-5"},K8={class:"tw-block tw-p-4 tw-pt-0 md:tw-hidden"};function X8(s,t,e,i,n,o){const a=_t("LoadingSpinner"),r=_t("PageControls"),l=_t("ArticleCard");return w(),D("div",I8,[s.isLoadingInitially?(w(),M(a,{key:0,class:"tw-h-full"})):(w(),D("div",V8,[g("div",L8,[g("div",E8,[g("div",R8,[f(pe,{class:"tw-w-full tw-border-earl-200 md:tw-w-[36rem]"},{default:y(()=>[f(ss,{class:"tw-break-normal tw-p-3 tw-text-base tw-font-bold tw-leading-normal"},{default:y(()=>[N(L(o.searchCountText),1)]),_:1}),f(kt,{modelValue:o.search,"onUpdate:modelValue":t[0]||(t[0]=c=>o.search=c),placeholder:"Enter a search term...",class:"tw-mb-2.5 tw-ml-3 tw-mr-3 tw-rounded-sm","hide-details":"",clearable:"","append-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1}),g("div",z8,[g("div",O8,[o.isSortEnabled()?F("",!0):(w(),D("span",F8," Recommended Articles ")),o.isSortEnabled()?(w(),D("div",B8,[g("span",U8,L(o.browseResultsText),1),f(bt,{size:"0.625rem",color:"earl-200",class:"tw-hidden md:tw-block","aria-hidden":"true"},{default:y(()=>[N("mdi-checkbox-blank-circle")]),_:1})])):F("",!0),o.isSortEnabled()?(w(),D("div",H8,[N8,Ft(g("select",{id:"sortSelect","onUpdate:modelValue":t[1]||(t[1]=c=>s.selectedSort=c),class:"form-select tw-flex tw-max-w-50vw tw-justify-center tw-py-0 tw-text-base tw-font-medium md:tw-max-w-25vw md:tw-text-lg",onChange:t[2]||(t[2]=c=>o.doSort())},[(w(!0),D(ht,null,vt(s.sortOptions,c=>(w(),D("option",{key:c.value,value:c.value},L(c.title),9,j8))),128))],544),[[si,s.selectedSort]])])):F("",!0)]),g("div",W8,[f(r,{"page-number":s.pageNumber,"articles-per-page":s.articlesPerPage,"articles-count":s.totalCount,disabled:s.isLoadingArticles},null,8,["page-number","articles-per-page","articles-count","disabled"])])])])]),s.isLoadingArticles?(w(),M(a,{key:0,class:"tw-flex-auto"})):s.showEmptyState?(w(),D("div",q8," No articles found. ")):(w(),D("div",Y8,[(w(!0),D(ht,null,vt(s.articles,c=>(w(),M(l,{key:c.id,article:c},null,8,["article"]))),128))]))]),g("div",K8,[f(vs,{class:"tw-border-earl-300",opacity:"1"}),f(r,{"page-number":s.pageNumber,"articles-per-page":s.articlesPerPage,"articles-count":s.totalCount,disabled:s.isLoadingArticles},null,8,["page-number","articles-per-page","articles-count","disabled"])])]))])}const G8=St(P8,[["render",X8]]),Z8={components:{SlimFooter:Ns,ArticlesList:G8,SpiceworksButton:ut},computed:{...$e(["featureFlippers"]),tab:{set(s){this.$router.push({name:"KnowledgeBaseArticlesList",params:{tab:s,page:1}})},get(){return this.$route.params.tab}}},created(){document.title="Knowledge Base - Spiceworks Help Desk"}},Q8={class:"tw-hidden tw-justify-between tw-border-b tw-border-earl-100 tw-p-2 md:tw-flex"},J8=g("div",{class:"tw-flex tw-items-center tw-border-earl-100 tw-p-4"},[g("span",{class:"tw-text-xl tw-font-medium tw-leading-tight"},"Knowledge Base")],-1),tx={class:"tw-flex tw-items-center tw-justify-center"},ex={class:"tw-flex tw-flex-auto tw-flex-col tw-overflow-y-hidden"},sx={class:"tw-h-full tw-overflow-y-auto tw-border-b tw-border-t tw-border-earl-100"};function ix(s,t,e,i,n,o){const a=_t("SpiceworksButton"),r=_t("router-link"),l=_t("ArticlesList"),c=_t("SlimFooter");return w(),D(ht,null,[g("div",Q8,[J8,g("div",tx,[f(r,{to:"/knowledge_base/new",custom:""},{default:y(({navigate:d})=>[f(a,{"button-type":"primary",icon:"mdi-plus",text:"New Article",onClick:d},null,8,["onClick"])]),_:1})])]),g("section",ex,[f(Zp,{modelValue:o.tab,"onUpdate:modelValue":t[0]||(t[0]=d=>o.tab=d),class:"tw-overflow-visible"},{default:y(()=>[f(yo,{value:"my_team",class:"tw-text-base tw-normal-case tw-tracking-normal"},{default:y(()=>[N("My Team")]),_:1}),f(yo,{value:"mine",class:"tw-text-base tw-normal-case tw-tracking-normal"},{default:y(()=>[N("Mine")]),_:1})]),_:1},8,["modelValue"]),g("div",sx,[f(l,{filter:o.tab},null,8,["filter"])])]),f(c)],64)}const nx=St(Z8,[["render",ix]]),ox={class:"tw-mt-6"},ax={__name:"ShareArticleModal",props:{isShowingDialog:{type:Boolean,required:!0}},emits:["update:isShowingDialog","update:sharedWithLevel"],setup(s,{emit:t}){const e=s,i=t,n=I(e.isShowingDialog),o=I(0),a=xt(),r=S(()=>a.state.knowledgeBase.article);lt(()=>e.isShowingDialog,m=>{n.value=m}),lt(n,m=>{i("update:isShowingDialog",m)}),lt(r,m=>{o.value=(m==null?void 0:m.sharedWith)||0});const l=m=>{a.dispatch("showSnackbar",m)},c=m=>a.dispatch("knowledgeBase/updateArticle",m),d=()=>{i("update:isShowingDialog",!1)},u=()=>{setTimeout(()=>{var m;o.value=(m=r.value)==null?void 0:m.sharedWith},500),d()},p=async()=>{var m;d();try{await c({id:r.value.id,sharedWith:o.value}),o.value=r.value.sharedWith,l({display:!0,type:"success",message:"Share Settings saved successfully."}),Yt.track(`share modal|${o.value}|save share settings|${r.value.id}`,"knowledge base article")}catch{l({display:!0,type:"error",message:"Failed to save Share Settings. Please try again."}),o.value=(m=r.value)==null?void 0:m.sharedWith}};return(m,b)=>(w(),M(ii,{"is-showing-dialog":n.value,"onUpdate:isShowingDialog":b[1]||(b[1]=v=>n.value=v),"show-action-buttons":!0,"show-close-button":!0,"close-button-text":"Cancel","max-width":"480px",onCloseDialog:u},{content:y(()=>[g("div",ox,[f(Al,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=v=>o.value=v),mandatory:"",inline:!m.$vuetify.display.mobile},{default:y(()=>[(w(),M(bo,{key:0,label:"Just Me",value:0,"aria-pressed":o.value===0,class:"md:tw-m-0 md:tw-w-1/2"},null,8,["aria-pressed"])),(w(),M(bo,{key:1,label:"My Team",value:1,"aria-pressed":o.value===1,class:"md:tw-m-0 md:tw-w-1/2"},null,8,["aria-pressed"]))]),_:1},8,["modelValue","inline"])])]),buttonActions:y(()=>[f(ut,{"button-type":"primary",text:"Save Share Settings",onClick:p})]),default:y(()=>[is(m.$slots,"default",{},()=>[N("Share this Article with:")])]),_:3},8,["is-showing-dialog"]))}},rx=g("div",{class:"tw-py-3"},"Are you sure you want to delete this article?",-1),lx={__name:"DeleteArticleModal",props:{isShowingDialog:{type:Boolean,required:!0},articleId:{type:String,required:!0}},emits:["update:isShowingDialog"],setup(s,{emit:t}){const e=s,i=t,n=I(e.isShowingDialog),o=new Fo,a=xt(),r=me();lt(()=>e.isShowingDialog,u=>{n.value=u}),lt(n,u=>{i("update:isShowingDialog",u)});const l=u=>{a.dispatch("showSnackbar",u)},c=()=>{i("update:isShowingDialog",!1)},d=async u=>{if(u===!1){c();return}try{c(),await o.deleteArticle(e.articleId),l({display:!0,type:"success",message:"Article deleted successfully."}),r.push({name:"KnowledgeBaseArticlesList",params:{tab:"my_team"}}),Yt.track(`delete modal|delete article|${e.articleId}`,"knowledge base article")}catch{l({display:!0,type:"error",message:"An error occurred while deleting the article."})}};return(u,p)=>(w(),M(Ue,{"is-showing-dialog":n.value,"onUpdate:isShowingDialog":p[0]||(p[0]=m=>n.value=m),title:"Delete article forever?","confirm-text":"Delete",onDialogAction:d},{default:y(()=>[rx]),_:1},8,["is-showing-dialog"]))}},cx={class:"tw-bg-earl-50 tw-p-3"},dx={class:"tw-mb-1.5 tw-text-earl-500"},ux={class:"tw-text-base"},hx={class:"tw-whitespace-pre-wrap tw-p-3 tw-text-earl-700"},fx={key:0,class:"tw-p-3"},px={__name:"ViewStep",props:{step:{type:Object,required:!0}},setup(s){const t=s,e=S(()=>t.step.attachment?{filename:t.step.attachment.filename,fileUrl:t.step.attachment.downloadUrl,byteSize:t.step.attachment.byteSize,contentType:t.step.attachment.contentType}:null),i=()=>{Yt.track("step attachment","knowledge base article")};return(n,o)=>(w(),D("div",null,[g("div",cx,[g("div",dx,"Step "+L(s.step.position),1),g("div",ux,L(s.step.title),1)]),g("div",hx,L(s.step.content),1),e.value?(w(),D("div",fx,[f(Sl,{attachment:e.value,onAttachmentClicked:i},null,8,["attachment"])])):F("",!0)]))}};const Jn=s=>(Pe("data-v-a86c54c9"),s=s(),Ie(),s),mx={class:"tw-flex tw-h-full tw-flex-col"},gx={class:"tw-flex tw-h-16 tw-items-center tw-justify-between tw-border-b tw-border-earl-100 tw-p-3"},wx={key:0,class:"tw-flex tw-items-center tw-justify-center tw-gap-2"},vx={key:1,class:"tw-flex-auto tw-overflow-y-auto tw-px-4"},bx={key:0,class:"tw-mt-4 tw-bg-dusk-450 tw-p-3 tw-text-base tw-font-medium tw-text-white"},yx={class:"tw-flex"},_x=Jn(()=>g("span",null," This article is only visible to you. Click the Share button to share with your team. ",-1)),kx={class:"tw-mb-8 tw-max-w-screen-sm"},xx={class:"tw-my-4 tw-text-2xl tw-leading-tight"},Cx={class:"tw-flex tw-flex-wrap tw-items-center tw-gap-2"},Sx={class:"tw-flex tw-items-center"},Tx={class:"tw-truncate"},Dx={class:"tw-text-earl-500"},Ax=Jn(()=>g("div",{class:"tw-mb-4 tw-mt-6"},[g("h3",{class:"tw-text-xl tw-font-medium"},"Introduction:")],-1)),$x={class:"tw-my-4 tw-whitespace-pre-wrap"},Mx={key:0},Px={class:"tw-mb-4 tw-mt-8"},Ix={class:"tw-text-xl tw-font-medium"},Vx={key:1},Lx=Jn(()=>g("div",{class:"tw-mb-4 tw-mt-8"},[g("h3",{class:"tw-text-xl tw-font-medium"},"Conclusion")],-1)),Ex={class:"tw-whitespace-pre-wrap"},Rx={key:2},zx=Jn(()=>g("div",{class:"tw-mb-4 tw-mt-8"},[g("h3",{class:"tw-text-xl tw-font-medium"},"References")],-1)),Ox={class:"references tw-mb-16 tw-ml-6"},Fx=["href","onClick"],Bx={class:"tw-text-sm"},Ux={__name:"ViewArticle",setup(s){const t=xt(),e=ye(),i=me(),{formatDateTimeToUserDisplayFormatWithHoursAndMinutes:n}=Ne(),o=I(!1),a=I(!1),r=S(()=>e.params.article_id),l=S(()=>t.state.knowledgeBase.isArticleLoading),c=S(()=>t.state.knowledgeBase.isArticleSaveSuccessful),d=S(()=>t.state.knowledgeBase.article),u=S(()=>t.state.knowledgeBase.references),p=S(()=>t.state.knowledgeBase.steps),m=S(()=>t.getters.isCurrentUserAdmin),b=S(()=>t.getters.currentUser),v=S(()=>n(d.value.createdAt)),_=S(()=>d.value?`/knowledge_base/edit/${d.value.id}`:""),x=S(()=>{var j,V;return parseInt((V=(j=d.value)==null?void 0:j.creator)==null?void 0:V.id)===b.value.id}),C=async j=>{await t.dispatch("knowledgeBase/getArticle",j)},T=j=>{t.dispatch("knowledgeBase/setIsArticleSaveSuccessful",j)};re(async()=>{var j;c.value&&(z({display:!0,type:"success",message:"Article saved successfully."}),T(!1));try{await C(r.value)}catch(V){V.status==403?i.replace({name:"Forbidden"}):V.status==404&&i.replace({name:"NotFound",params:{catchAll:"not_found"}})}(j=d.value)!=null&&j.title&&(document.title=`${d.value.title} - Knowledge Base - Spiceworks Help Desk`)});function $(){i.go(-1)}function k(){o.value=!0,Yt.track("delete button","knowledge base article")}function A(){a.value=!0,Yt.track("share button","knowledge base article")}function P(j){Yt.track(`reference link|${j.title}`,"knowledge base article")}function z(j){t.dispatch("showSnackbar",j)}return(j,V)=>{var B;const O=_t("router-link");return w(),D(ht,null,[d.value?(w(),M(ax,{key:0,"is-showing-dialog":a.value,"onUpdate:isShowingDialog":V[0]||(V[0]=U=>a.value=U)},null,8,["is-showing-dialog"])):F("",!0),d.value?(w(),M(lx,{key:1,"is-showing-dialog":o.value,"onUpdate:isShowingDialog":V[1]||(V[1]=U=>o.value=U),"article-id":r.value},null,8,["is-showing-dialog","article-id"])):F("",!0),g("div",mx,[g("div",gx,[f(pt,{icon:"mdi-arrow-left","aria-label":"navigate back",onClick:$}),!l.value&&(m.value||x.value)?(w(),D("div",wx,[x.value?(w(),M(ut,{key:0,"button-type":"primary",icon:"mdi-send-outline","icon-size":"default",text:"Share","hide-text-on-mobile":!0,onClick:V[2]||(V[2]=U=>A())})):F("",!0),f(O,{to:_.value,custom:""},{default:y(({navigate:U})=>[f(ut,{"button-type":"primary",icon:"mdi-pencil-outline","icon-size":"default",text:"Edit","hide-text-on-mobile":!0,disabled:l.value||!d.value,onClick:U},null,8,["disabled","onClick"])]),_:1},8,["to"]),f(ut,{"button-type":"primary",icon:"mdi-delete-outline","icon-size":"default",text:"Delete","hide-text-on-mobile":!0,onClick:V[3]||(V[3]=U=>k())})])):F("",!0)]),l.value?(w(),M(de,{key:0,class:"tw-flex-auto"})):d.value?(w(),D("div",vx,[d.value.sharedWith===0?(w(),D("div",bx,[g("div",yx,[f(bt,{color:"white",class:"tw-mr-3"},{default:y(()=>[N(" mdi-information-outline ")]),_:1}),_x])])):F("",!0),g("div",kx,[g("h2",xx,L(d.value.title),1),g("div",Cx,[g("div",Sx,[d.value&&d.value.creator?(w(),M(ri,{key:0,size:40,class:"mr-4",user:d.value.creator},null,8,["user"])):F("",!0),g("div",Tx,L((B=d.value.creator)==null?void 0:B.name),1)]),f(bt,{size:"0.625rem",color:"earl-200","aria-hidden":"true"},{default:y(()=>[N("mdi-checkbox-blank-circle")]),_:1}),g("span",Dx,L(v.value),1)]),Ax,g("div",$x,L(d.value.introduction),1),p.value.length>0?(w(),D("div",Mx,[g("div",Px,[g("h3",Ix,"Steps ("+L(p.value.length)+" Total):",1)]),(w(!0),D(ht,null,vt(p.value,U=>(w(),D("div",{key:U.id,class:"tw-mb-4 tw-border tw-border-solid tw-border-earl-200"},[f(px,{step:U},null,8,["step"])]))),128))])):F("",!0),d.value.conclusion?(w(),D("div",Vx,[Lx,g("div",Ex,L(d.value.conclusion),1)])):F("",!0),u.value.length>0?(w(),D("div",Rx,[zx,g("ul",Ox,[(w(!0),D(ht,null,vt(u.value,U=>(w(),D("li",{key:U.id,class:"tw-mt-2.5 tw-list-disc"},[g("a",{href:U.url,target:"_blank",class:"tw-mr-2 tw-underline",onClick:H=>P(U)},[g("span",Bx,L(U.title),1)],8,Fx)]))),128))])])):F("",!0)])])):F("",!0)])],64)}}},Hx=St(Ux,[["__scopeId","data-v-a86c54c9"]]),Nx={class:"tw-flex tw-flex-auto tw-flex-col tw-overflow-y-auto"},jx={class:"tw-flex-1 tw-overflow-y-auto"},Wx={__name:"KnowledgeBaseViewArticle",setup(s){return(t,e)=>(w(),D("section",Nx,[g("div",jx,[f(Hx)]),f(Ns)]))}};const qx=s=>(Pe("data-v-47684b01"),s=s(),Ie(),s),Yx={key:0},Kx={key:1,class:"tw-truncate"},Xx=qx(()=>g("div",{class:"tw-py-3"}," Are you sure you want to delete this attachment? The attachment will be deleted permanently and this can't be undone. ",-1)),Gx={__name:"EditStepAttachment",props:{attachment:{type:Object,required:!0},step:{type:Object,required:!0}},emits:["update:attachment"],setup(s,{emit:t}){const e=s,i=t,n=xt(),o=new Fo,a=I(!1),r=u=>{n.dispatch("showSnackbar",u)},l=async u=>{if(!u){a.value=!1;return}await c(),a.value=!1},c=async()=>{a.value=!0;try{await o.deleteAttachment(e.step.id),i("update:attachment",null)}catch{r({display:!0,type:"error",message:"There was an error deleting your attachment."})}},d=u=>["image/jpeg","image/png","image/gif"].includes(u);return(u,p)=>(w(),D("div",null,[f(Tl,{variant:"text",class:"tw-h-full tw-min-h-8 tw-max-w-xs tw-bg-earl-100",label:"","prepend-icon":"mdi-check"},{append:y(()=>[f(pt,{color:"#0000008a",icon:"mdi-close","aria-label":"Delete Attachment",onClick:p[0]||(p[0]=Lt(m=>a.value=!0,["stop"]))})]),default:y(()=>[d(s.attachment.contentType)?(w(),D("div",Yx,[f(Gd,{src:s.attachment.downloadUrl,cover:"",height:"120px",width:"120px",class:"tw-mx-2 tw-my-4"},{placeholder:y(()=>[f(Le,{class:"fill-height ma-0",align:"center",justify:"center"},{default:y(()=>[f(Be,{indeterminate:""})]),_:1})]),_:1},8,["src"])])):(w(),D("div",Kx,L(s.attachment.filename),1))]),_:1}),f(Ue,{"is-showing-dialog":a.value,"onUpdate:isShowingDialog":p[1]||(p[1]=m=>a.value=m),title:"Delete attachment?","confirm-text":"Delete",onDialogAction:l},{default:y(()=>[Xx]),_:1},8,["is-showing-dialog"])]))}},Zx=St(Gx,[["__scopeId","data-v-47684b01"]]),Qx={class:"tw-flex tw-items-center tw-justify-between tw-font-normal"},Jx={class:"tw-font-medium"},t3={key:0},e3={key:0},s3={key:1},i3={key:2},n3={class:"tw-flex tw-items-center tw-gap-3"},o3=g("span",{class:"tw-text-earl-600"}," The attachment must be less than 200 MB. ",-1),a3={class:"tw-float-right tw-mt-2"},r3={key:1},l3={class:"tw-my-4"},c3={class:"tw-text-base tw-leading-6"},d3={class:"tw-mb-4"},u3={class:"tw-whitespace-pre-wrap tw-text-earl-700"},po={__name:"EditStep",props:Ei({step:{type:Object,required:!0},stepPosition:{type:Number,required:!0},isEditStepCardInitiallyVisible:{type:Boolean,default:!1},shouldHideDeleteButton:{type:Boolean,default:!1}},{attachment:{default:null},attachmentModifiers:{}}),emits:Ei(["update:step","delete-edit-step","cancel-edit"],["update:attachment"]),setup(s,{emit:t}){const{uploadAttachmentFile:e,uploadSingleAttachment:i,truncateFilename:n}=vu(),o=s,a=t,r=xt(),l=S(()=>r.state.knowledgeBase.isStepUnderEdit),c=I(""),d=I(""),u=I(null),p=I(o.isEditStepCardInitiallyVisible),m=I(o.step),b=I(!1),v=Ro(s,"attachment"),_=I(null),x=I(null),C={editStepTitle:{required:zi(l.value),maxLength:gs(255)},editStepContent:{required:zi(l.value)}},T=ms(C,{editStepTitle:c,editStepContent:d}),$=S(()=>T.value.editStepTitle.$dirty?[T.value.editStepTitle.maxLength.$invalid?"Title cannot be longer than 255 characters.":"",T.value.editStepTitle.required.$invalid?"Title is required.":""].filter(Boolean):[]),k=S(()=>T.value.editStepContent.$dirty?[T.value.editStepContent.required.$invalid?"Content is required.":""].filter(Boolean):[]),A=S(()=>v.value?{filename:v.value.filename,fileUrl:v.value.downloadUrl,byteSize:v.value.byteSize,contentType:v.value.contentType}:null);lt(v,U=>{U?u.value=U.blobId:(u.value=null,delete m.value.blobId,x.value.value="")}),lt(()=>o.step,U=>{m.value={...U},a("update:step",m.value)});const P=()=>{p.value=!0,c.value=m.value.title,d.value=m.value.content,r.dispatch("knowledgeBase/setIsStepUnderEdit",!0)},z=()=>{_.value&&_.value.abort(),p.value=!1,c.value="",d.value="",T.value.editStepTitle.$reset(),T.value.editStepContent.$reset(),a("cancel-edit"),r.dispatch("knowledgeBase/setIsStepUnderEdit",!1)},j=()=>{T.value.editStepTitle.$touch(),T.value.editStepContent.$touch(),!T.value.editStepTitle.$invalid&&!T.value.editStepContent.$invalid&&(m.value.title=c.value,m.value.content=d.value,u.value&&(m.value.blobId=u.value),a("update:step",m.value),z())},V=()=>{a("delete-edit-step",m.value),p.value=!1,r.dispatch("knowledgeBase/setIsStepUnderEdit",!1)},O=async U=>{var K;let H,J;try{b.value=!0;const G=i(U);if(H=G.attachment,J=G.file,!J)return;_.value=new AbortController;const ot=_.value.signal,et=await e(H,J,ot);H.blobId=et==null?void 0:et.id,H.downloadUrl=et==null?void 0:et.downloadUrl,v.value=H}catch(G){G.code==="ERR_CANCELED"||(typeof G=="string"?r.dispatch("showSnackbar",{display:!0,message:G,type:"error"}):G.isAxiosError&&(H!=null&&H.filename)?r.dispatch("showSnackbar",{display:!0,message:`An error happened while uploading the file ${n(H.filename,15)}. Please try again.`,type:"error"}):r.dispatch("showSnackbar",{display:!0,message:"An error happened while uploading the file attachment. Please try again.",type:"error"})),v.value=null,(K=x.value)!=null&&K.value&&(x.value.value="")}finally{b.value=!1,_.value=null}},B=()=>{Yt.track("step attachment","edit knowledge base article")};return(U,H)=>(w(),D("div",null,[f(pe,{class:"tw-mb-4 tw-mt-2 tw-overflow-auto tw-border-earl-100 tw-bg-earl-50 tw-p-3"},{default:y(()=>[g("div",Qx,[g("span",Jx,"Step "+L(s.stepPosition),1),l.value?F("",!0):(w(),M(pt,{key:0,icon:"mdi-pencil-outline",size:"small","aria-label":"edit",onClick:H[0]||(H[0]=J=>P())}))]),p.value?(w(),D("div",t3,[f(kt,{modelValue:c.value,"onUpdate:modelValue":H[1]||(H[1]=J=>c.value=J),counter:255,"persistent-counter":"",label:"Step Title",class:"tw-mt-4","error-messages":$.value},null,8,["modelValue","error-messages"]),f(oe,{modelValue:d.value,"onUpdate:modelValue":H[2]||(H[2]=J=>d.value=J),label:"Step Content",class:"tw-mb-6 tw-pt-3","error-messages":k.value},null,8,["modelValue","error-messages"]),g("form",null,[Ft(g("input",{ref_key:"fileInput",ref:x,type:"file",name:"attachment[attached_file]",onChange:O},null,544),[[be,!1]])]),v.value?(w(),D("div",e3,[f(Zx,{attachment:v.value,"onUpdate:attachment":H[3]||(H[3]=J=>v.value=J),step:s.step},null,8,["attachment","step"])])):b.value?(w(),D("div",s3,[f(Be,{size:18,width:2,indeterminate:"",class:"tw-ml-2"})])):(w(),D("div",i3,[f(ut,{"button-type":"primary-ghost",text:"Add Attachment",icon:"mdi-plus-circle-outline",class:"tw-mb-3",onClick:H[4]||(H[4]=Lt(J=>U.$refs.fileInput.click(),["prevent"]))}),g("div",n3,[f(bt,{color:"earl-700",class:"tw-self-start"},{default:y(()=>[N(" mdi-information-outline ")]),_:1}),o3])])),g("div",a3,[s.shouldHideDeleteButton?F("",!0):(w(),M(ut,{key:0,"button-type":"basic",text:"Delete Step",class:"tw-mr-1",onClick:H[5]||(H[5]=J=>V())})),f(ut,{text:"Cancel",class:"tw-mr-1",onClick:z}),f(ut,{text:"Save","button-type":"primary-ghost",disabled:b.value,onClick:j},null,8,["disabled"])])])):(w(),D("div",r3,[g("div",l3,[g("span",c3,L(m.value.title),1)]),g("div",d3,[g("span",u3,L(m.value.content),1)]),A.value?(w(),M(Sl,{key:0,attachment:A.value,onAttachmentClicked:B},null,8,["attachment"])):F("",!0)]))]),_:1})]))}},h3=g("div",{class:"tw-py-3"}," Are you sure you want to delete this step? This can't be undone once you save the article. ",-1),f3={__name:"DeleteStepModal",props:{isShowingDialog:{type:Boolean,required:!0},step:{type:Object,required:!0}},emits:["update:isShowingDialog","stepDeleted"],setup(s,{emit:t}){const e=s,i=t,n=I(e.isShowingDialog),o=xt();lt(()=>e.isShowingDialog,l=>{n.value=l}),lt(n,l=>{i("update:isShowingDialog",l)});const a=()=>{i("update:isShowingDialog",!1)},r=async l=>{if(l===!1){a();return}try{a(),await o.dispatch("knowledgeBase/markStepForDeletion",e.step.id),i("stepDeleted",e.step),Yt.track(`delete modal|delete step|${e.step.id}`,"knowledge base article")}catch{o.dispatch("showSnackbar",{display:!0,type:"error",message:"An error occurred while marking the step for deletion."})}};return(l,c)=>(w(),M(Ue,{"is-showing-dialog":n.value,"onUpdate:isShowingDialog":c[0]||(c[0]=d=>n.value=d),title:"Delete step?","confirm-text":"Delete",onDialogAction:r},{default:y(()=>[h3]),_:1},8,["is-showing-dialog"]))}},p3={class:"tw-mb-4 tw-flex tw-items-center tw-justify-between"},m3=g("span",{class:"tw-text-base"},"Steps (Optional)",-1),g3={class:"tw-flex tw-flex-col"},w3=g("a",{id:"editStepCardAnchor"},null,-1),v3={__name:"EditSteps",setup(s){const t=xt(),e=I(!1),i=I({id:ka(),title:"",content:"",blobId:null}),n=I(!1),o=I(null),a=S(()=>t.state.knowledgeBase.isStepUnderEdit),r=S(()=>t.state.knowledgeBase.steps),l=S(()=>t.state.knowledgeBase.unsavedSteps);re(()=>{t.dispatch("knowledgeBase/setInitialStepsIds",r.value.map(v=>v.id))});const c=(v,_)=>{t.dispatch("knowledgeBase/updateStep",{index:v,updatedStep:_})},d=v=>{const _=l.value.findIndex(x=>x.content===v.content&&x.title===v.title);_>-1&&t.dispatch("knowledgeBase/setUnsavedSteps",[...l.value.slice(0,_),...l.value.slice(_+1)])},u=v=>{const _=r.value.findIndex(x=>x.id===v.id);_!==-1&&r.value.splice(_,1),o.value=null},p=v=>{o.value=v,n.value=!0},m=()=>{const v={...i.value,attachment:i.value.attachment};t.dispatch("knowledgeBase/setUnsavedSteps",l.value.concat([v])),i.value={id:ka(),title:"",content:"",blobId:null,attachment:null},e.value=!1},b=()=>{e.value=!0,document.getElementById("editStepCardAnchor").scrollIntoView(),t.dispatch("knowledgeBase/setIsStepUnderEdit",!0)};return(v,_)=>(w(),D("div",null,[f(vs,{class:"tw-my-4",opacity:"0.5"}),g("div",p3,[m3,f(ut,{icon:"mdi-plus",text:"Add Step",class:mt([a.value?"tw-invisible":""]),"aria-hidden":a.value,onClick:_[0]||(_[0]=x=>b())},null,8,["class","aria-hidden"])]),g("div",g3,[(w(!0),D(ht,null,vt(r.value,(x,C)=>(w(),M(po,{key:x.id,attachment:x.attachment,"onUpdate:attachment":T=>x.attachment=T,step:x,"step-position":C+1,"onUpdate:step":_[1]||(_[1]=T=>c(v.index,T)),onDeleteEditStep:p},null,8,["attachment","onUpdate:attachment","step","step-position"]))),128)),(w(!0),D(ht,null,vt(l.value,(x,C)=>(w(),M(po,{key:x.id,attachment:x.attachment,"onUpdate:attachment":T=>x.attachment=T,step:x,"step-position":C+r.value.length+1,onDeleteEditStep:d},null,8,["attachment","onUpdate:attachment","step","step-position"]))),128)),w3,e.value?(w(),M(po,{key:i.value.id,step:i.value,"onUpdate:step":[_[2]||(_[2]=x=>i.value=x),m],attachment:i.value.attachment,"onUpdate:attachment":_[3]||(_[3]=x=>i.value.attachment=x),"step-position":r.value.length+l.value.length+1,"is-edit-step-card-initially-visible":!0,"should-hide-delete-button":!0,onCancelEdit:_[4]||(_[4]=x=>e.value=!1)},null,8,["step","attachment","step-position"])):F("",!0)]),f(vs,{class:"tw-my-4",opacity:"0.5"}),o.value?(w(),M(f3,{key:0,"is-showing-dialog":n.value,"onUpdate:isShowingDialog":_[5]||(_[5]=x=>n.value=x),step:o.value,onStepDeleted:u},null,8,["is-showing-dialog","step"])):F("",!0)]))}},b3={class:"tw-mb-2 tw-flex tw-items-center tw-justify-between"},y3=g("span",{class:"tw-text-base"},"References (Optional)",-1),_3=g("span",{class:"tw-text-xs tw-text-earl-500"},"References serve as links to other material on the web.",-1),k3={class:"tw-ml-6"},x3=["href","onClick"],C3=["href","onClick"],S3={key:0,class:"tw-overflow-auto"},T3={class:"tw-float-right tw-mt-2"},D3={__name:"EditReferences",setup(s){const t=xt(),e=I(!1),i=I(""),n=I(""),o=I(null),a=S(()=>({editReferenceName:{required:zi(e.value),maxLength:gs(1e3)},editReferenceUrl:{required:zi(e.value)}})),r=ms(a,{editReferenceName:i,editReferenceUrl:n}),l=S(()=>t.state.knowledgeBase.references),c=S(()=>t.state.knowledgeBase.unsavedReferences),d=S(()=>r.value.editReferenceName.$dirty?[r.value.editReferenceName.maxLength.$invalid?"Name cannot be longer than 1000 characters.":"",r.value.editReferenceName.required.$invalid?"Name is required.":""].filter(Boolean):[]),u=S(()=>r.value.editReferenceUrl.$dirty?[r.value.editReferenceUrl.required.$invalid?"URL is required.":""].filter(Boolean):[]),p=()=>{e.value=!0,t.dispatch("knowledgeBase/setIsReferenceUnderEdit",!0)},m=T=>{Yt.track(`reference link|${T.title}`,"edit knowledge base article")},b=(T,$)=>{i.value=T.title,n.value=T.url,o.value=$,e.value=!0,t.dispatch("knowledgeBase/setIsReferenceUnderEdit",!0)},v=()=>{e.value=!1,o.value=null,i.value="",n.value="",r.value.editReferenceName.$reset(),r.value.editReferenceUrl.$reset(),t.dispatch("knowledgeBase/setIsReferenceUnderEdit",!1)},_=()=>{o.value!==null&&(t.dispatch("knowledgeBase/deleteUnsavedReference",o.value),v())},x=()=>{r.value.editReferenceName.$touch(),r.value.editReferenceUrl.$touch(),!r.value.editReferenceName.$invalid&&!r.value.editReferenceUrl.$invalid&&(o.value!==null?(t.dispatch("knowledgeBase/updateUnsavedReference",{index:o.value,unsavedReference:{title:i.value,url:C(n.value)}}),o.value=null):t.dispatch("knowledgeBase/addUnsavedReference",{title:i.value,url:C(n.value)}),v())},C=T=>{const $=/https?:\/\/.*/;return $.test(T)?T=T.match($)[0]:T="https://"+T,T};return(T,$)=>(w(),D("div",null,[f(vs,{class:"tw-my-4",opacity:"0.5"}),g("div",b3,[y3,f(ut,{icon:"mdi-plus",text:"New Reference",class:mt([e.value?"tw-invisible":""]),"aria-hidden":e.value,onClick:p},null,8,["class","aria-hidden"])]),_3,g("div",null,[g("ul",k3,[(w(!0),D(ht,null,vt(l.value,(k,A)=>(w(),D("li",{key:k.url+k.title+A,class:"tw-mt-2.5 tw-list-disc"},[g("a",{href:k.url,target:"_blank",class:"tw-mr-2 tw-underline",onClick:P=>m(k)},[g("span",null,L(k.title),1)],8,x3)]))),128)),(w(!0),D(ht,null,vt(c.value,(k,A)=>(w(),D("li",{key:k.url+k.title+A,class:"tw-mt-2.5 tw-list-disc"},[g("a",{href:k.url,target:"_blank",class:"tw-mr-2 tw-underline",onClick:P=>m(k)},[g("span",null,L(k.title),1)],8,C3),f(pt,{icon:"mdi-pencil-outline",size:"small","aria-label":"edit",onClick:P=>b(k,A)},null,8,["onClick"])]))),128))])]),e.value?(w(),D("div",S3,[f(pe,{class:"tw-overflow-auto tw-border-earl-100 tw-bg-earl-50 tw-p-3"},{default:y(()=>[f(kt,{modelValue:i.value,"onUpdate:modelValue":$[0]||($[0]=k=>i.value=k),counter:1e3,"persistent-counter":"","error-messages":d.value,class:"pt-3",label:"Name"},null,8,["modelValue","error-messages"]),f(kt,{modelValue:n.value,"onUpdate:modelValue":$[1]||($[1]=k=>n.value=k),"error-messages":u.value,class:"pt-3",label:"URL"},null,8,["modelValue","error-messages"]),g("div",T3,[o.value!==null?(w(),M(ut,{key:0,"button-type":"basic",text:"Delete Reference",class:"tw-mr-1",onClick:$[2]||($[2]=k=>_())})):F("",!0),f(ut,{text:"Cancel",class:"tw-mr-1",onClick:v}),f(ut,{"button-type":"primary-ghost",text:"Save Reference",class:"tw-mr-1",onClick:x})])]),_:1})])):F("",!0),f(vs,{class:"tw-my-4",opacity:"0.5"})]))}},A3=g("div",{class:"tw-py-3"}," Removed steps (including attachments) in the edited article will be deleted permanently and this can't be undone. ",-1),$3={__name:"UpdateArticleModal",props:{isShowingDialog:{type:Boolean,required:!0}},emits:["update:isShowingDialog","saveAndNavigate"],setup(s,{emit:t}){const e=s,i=t,n=I(e.isShowingDialog);lt(()=>e.isShowingDialog,r=>{n.value=r}),lt(n,r=>{i("update:isShowingDialog",r)});const o=()=>{i("update:isShowingDialog",!1)},a=async r=>{if(r===!1){o();return}i("saveAndNavigate")};return(r,l)=>(w(),M(Ue,{"is-showing-dialog":n.value,"onUpdate:isShowingDialog":l[0]||(l[0]=c=>n.value=c),title:"Save the revised article?","confirm-text":"Save Article",onDialogAction:a},{default:y(()=>[A3]),_:1},8,["is-showing-dialog"]))}},M3={class:"tw-flex tw-h-full tw-flex-col"},P3={class:"tw-flex tw-justify-between tw-border-b tw-border-earl-100 tw-p-2"},I3={class:"tw-flex tw-items-center"},V3={class:"tw-flex tw-items-center tw-border-earl-100 tw-p-4"},L3={class:"tw-text-xl tw-font-medium tw-leading-tight"},E3={class:"tw-flex tw-items-center tw-justify-center"},R3={key:1,class:"tw-flex tw-flex-col tw-overflow-y-auto"},z3={class:"tw-mx-4.5 tw-my-8 tw-max-w-2xl"},O3={__name:"EditArticle",setup(s){const t=xt(),e=me(),i=ye(),n=I(""),o=I(""),a=I(""),r=I(!1),l={title:{required:ls,maxLength:gs(255)},introduction:{required:ls}},c=ms(l,{title:n,introduction:o}),d=S(()=>t.state.knowledgeBase.article),u=S(()=>t.state.knowledgeBase.isArticleLoading),p=S(()=>t.state.knowledgeBase.isArticleSaving),m=S(()=>t.state.knowledgeBase.isReferenceUnderEdit),b=S(()=>t.state.knowledgeBase.isStepUnderEdit),v=S(()=>t.state.knowledgeBase.steps),_=S(()=>t.state.knowledgeBase.initialStepsIds),x=S(()=>z()?"New Article":"Edit Article"),C=S(()=>{const V=[];return c.value.title.$dirty&&(c.value.title.maxLength.$invalid&&V.push("Title cannot be longer than 255 characters."),c.value.title.required.$invalid&&V.push("Title is required.")),V}),T=S(()=>{const V=[];return c.value.introduction.$dirty&&c.value.introduction.required.$invalid&&V.push("Summary is required."),V});re(async()=>{document.title="New Knowledge Base Article - Spiceworks Help Desk",i.name==="KnowledgeBaseEditArticle"?(t.dispatch("knowledgeBase/setIsArticleLoading",!0),document.title="Edit Knowledge Base Article - Spiceworks Help Desk"):t.dispatch("knowledgeBase/setIsArticleLoading",!1),await A()});const $=()=>{c.value.$touch(),!c.value.$invalid&&(z()||j()?k():r.value=!0)},k=async()=>{var V;t.dispatch("knowledgeBase/setIsArticleSaving",!0);try{let O=null;const B={id:(V=i.params)==null?void 0:V.article_id,title:n.value,introduction:o.value,conclusion:a.value,shared_with:0};z()?O=await t.dispatch("knowledgeBase/createKnowledgeBaseModels",B):(await t.dispatch("knowledgeBase/updateKnowledgeBaseModels",B),O=i.params.article_id),O&&e.push({name:"KnowledgeBaseViewArticle",params:{article_id:O}})}catch{t.dispatch("showSnackbar",{display:!0,type:"error",message:"An error occurred while saving article."}),r.value=!1}finally{t.dispatch("knowledgeBase/setIsArticleSaving",!1)}},A=async()=>{var V,O,B;if(await t.dispatch("knowledgeBase/resetArticleData"),i.name==="KnowledgeBaseEditArticle")try{await t.dispatch("knowledgeBase/getArticle",i.params.article_id)}catch(U){U.status==403?e.replace({name:"Forbidden"}):U.status==404&&e.replace({name:"NotFound"})}finally{n.value=(V=d.value)==null?void 0:V.title,o.value=(O=d.value)==null?void 0:O.introduction,a.value=(B=d.value)==null?void 0:B.conclusion}},P=()=>{e.go(-1)},z=()=>i.name==="KnowledgeBaseNewArticle",j=()=>{const V=v.value.map(O=>O.id);return _.value.every(O=>V.includes(O))};return(V,O)=>(w(),D(ht,null,[g("div",M3,[g("div",P3,[g("div",I3,[f(pt,{icon:"mdi-arrow-left","aria-label":"navigate back",onClick:P}),g("div",V3,[g("span",L3,L(x.value),1)])]),g("div",E3,[f(ut,{"button-type":"primary",text:"Save",class:"tw-block md:tw-hidden",loading:p.value,disabled:p.value||u.value||b.value||m.value,onClick:$},null,8,["loading","disabled"]),f(ut,{"button-type":"primary",text:"Save Article",class:"tw-hidden md:tw-block",loading:p.value,disabled:p.value||u.value||b.value||m.value,onClick:$},null,8,["loading","disabled"])])]),u.value?(w(),M(de,{key:0,class:"tw-flex-auto"})):(w(),D("div",R3,[g("div",z3,[f(kt,{modelValue:n.value,"onUpdate:modelValue":O[0]||(O[0]=B=>n.value=B),counter:255,"persistent-counter":"",label:"Title","error-messages":C.value},null,8,["modelValue","error-messages"]),f(oe,{modelValue:o.value,"onUpdate:modelValue":O[1]||(O[1]=B=>o.value=B),label:"Summary/Intro","error-messages":T.value,class:"tw-mb-6 tw-pt-3"},null,8,["modelValue","error-messages"]),f(v3),f(oe,{modelValue:a.value,"onUpdate:modelValue":O[2]||(O[2]=B=>a.value=B),label:"Conclusion (Optional)",class:"tw-mb-6 tw-pt-3"},null,8,["modelValue"]),f(D3)])]))]),r.value?(w(),M($3,{key:0,"is-showing-dialog":r.value,onSaveAndNavigate:k,"onUpdate:isShowingDialog":O[3]||(O[3]=B=>r.value=B)},null,8,["is-showing-dialog"])):F("",!0)],64))}},F3={class:"tw-flex tw-flex-auto tw-flex-col tw-overflow-y-auto"},B3={class:"tw-flex-1 tw-overflow-y-auto"},el={__name:"KnowledgeBaseEditArticle",setup(s){return(t,e)=>(w(),D("section",F3,[g("div",B3,[f(O3)]),f(Ns)]))}},U3=[{path:"/knowledge_base/new",component:el,name:"KnowledgeBaseNewArticle"},{path:"/knowledge_base/edit/:article_id",component:el,name:"KnowledgeBaseEditArticle"},{path:"/knowledge_base/articles/:article_id",component:Wx,name:"KnowledgeBaseViewArticle"},{path:"/knowledge_base/:tab/:page?",component:nx,name:"KnowledgeBaseArticlesList"},{path:"/knowledge_base",redirect:"/knowledge_base/my_team/1"}],H3={},N3={width:"250",height:"250",viewBox:"0 0 250 250",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j3=Pd('<g clip-path="url(#clip0_1771_12852)"><path d="M124 247C193.036 247 249 192.426 249 125.105C249 57.784 193.036 3.20967 124 3.20967C54.9644 3.20967 -1 57.784 -1 125.105C-1 192.426 54.9644 247 124 247Z" fill="url(#paint0_linear_1771_12852)"></path><path d="M248.342 137.904C234.567 131.887 216.631 129.006 205.422 133.202C194.92 137.142 196.605 144.958 185.815 148.191C168.4 153.4 156.359 135.343 130.456 136.201C107.411 136.964 99.4072 151.839 82.0152 148.191C71.1571 145.908 69.1024 139.059 61.3721 134.202C48.4182 126.084 23.5607 126.171 -0.34256 130.814C1.76259 161.116 14.8647 189.605 36.5008 210.927C60.1073 215.292 85.8141 217.625 110.85 216.693C154.88 215.059 199.431 203.27 229.745 189.231C239.675 173.713 246.027 156.181 248.342 137.904Z" fill="url(#paint1_linear_1771_12852)"></path><path d="M160.259 226.692C160.259 227.505 144.022 228.162 124 228.162C103.978 228.162 87.741 227.505 87.741 226.692C87.741 225.879 103.973 225.227 124 225.227C144.027 225.227 160.259 225.879 160.259 226.692Z" fill="#D0DFF3"></path><path d="M189.993 226.692C189.993 227.505 185.555 228.162 180.085 228.162C174.615 228.162 170.176 227.505 170.176 226.692C170.176 225.879 174.615 225.227 180.085 225.227C185.555 225.227 189.993 225.879 189.993 226.692Z" fill="#D0DFF3"></path><path d="M166.67 182.469C166.323 184.204 168.405 184.551 168.752 186.976C169.099 189.4 168.058 190.099 168.405 191.482C168.752 192.865 170.83 193.217 171.177 196.682C171.524 200.148 170.14 199.805 170.487 201.883C170.834 203.96 172.912 203.964 173.259 205.695C173.606 207.425 173.606 209.859 174.3 211.936C174.994 214.013 177.071 217.136 178.112 217.136C179.153 217.136 181.925 211.242 181.231 209.512C180.537 207.781 179.5 207.43 179.5 206.042C179.5 204.654 180.87 201.189 180.537 198.764C180.204 196.34 177.071 195.294 176.724 193.564C176.377 191.834 177.418 187.323 174.994 185.245C172.569 183.168 167.031 180.735 166.67 182.469Z" fill="#3FB790"></path><path d="M177.951 216.543C177.905 216.543 177.861 216.524 177.829 216.492C177.796 216.459 177.778 216.415 177.778 216.369C177.778 216.324 177.751 211.804 176.408 210.498C175.066 209.192 174.308 205.06 173.934 197.212C173.591 190.08 168.482 184.204 168.428 184.145C168.396 184.112 168.378 184.068 168.378 184.022C168.378 183.976 168.396 183.932 168.428 183.898C168.443 183.882 168.462 183.869 168.483 183.861C168.504 183.852 168.526 183.847 168.549 183.847C168.571 183.847 168.593 183.852 168.614 183.861C168.635 183.869 168.654 183.882 168.67 183.898C168.724 183.958 173.915 189.921 174.262 197.175C174.628 204.827 175.381 208.977 176.637 210.238C178.056 211.657 178.088 216.173 178.088 216.351C178.088 216.397 178.07 216.441 178.038 216.474C178.005 216.506 177.961 216.524 177.915 216.524L177.951 216.543Z" fill="#34916F"></path><path d="M198.408 187.715C199.632 188.943 195.632 189.45 195.285 191.875C194.938 194.299 194.938 195.345 193.55 196.728C192.162 198.111 190.084 198.463 190.431 200.545C190.778 202.627 191.472 204.704 190.431 205.745C189.39 206.786 186.966 206.781 186.272 208.516C185.578 210.251 185.925 212.329 184.536 214.064C183.148 215.799 181.071 219.264 179.359 218.574C177.646 217.885 178.669 209.9 179.359 208.53C180.048 207.16 180.728 206.106 180.728 205.065C180.728 204.024 180.381 202.289 181.075 200.558C181.769 198.828 185.582 198.13 185.929 197.089C186.276 196.048 186.623 190.505 188.701 189.117C190.778 187.729 196.326 185.638 198.408 187.715Z" fill="#4FC7A0"></path><path d="M179.875 217.976C179.844 217.976 179.814 217.966 179.788 217.949C179.768 217.938 179.751 217.922 179.737 217.904C179.723 217.886 179.713 217.865 179.708 217.843C179.702 217.821 179.701 217.798 179.705 217.775C179.708 217.752 179.717 217.731 179.729 217.711C179.729 217.689 181.131 215.369 181.423 214.196C181.5 213.89 181.592 213.433 181.697 212.904C182.08 210.982 182.656 208.073 183.551 207.179C184.843 205.887 186.911 201.924 188.359 196.856C190.144 190.61 196.043 188.779 196.121 188.765C196.142 188.758 196.165 188.756 196.188 188.758C196.21 188.76 196.232 188.766 196.252 188.777C196.272 188.788 196.29 188.802 196.304 188.82C196.319 188.837 196.329 188.858 196.335 188.88C196.348 188.923 196.344 188.97 196.322 189.01C196.301 189.05 196.265 189.08 196.221 189.094C196.162 189.094 190.441 190.893 188.71 196.952C187.244 202.079 185.14 206.083 183.811 207.425C182.994 208.242 182.404 211.201 182.053 212.972C181.948 213.507 181.857 213.968 181.779 214.278C181.473 215.502 180.099 217.794 180.044 217.89C180.027 217.918 180.002 217.942 179.972 217.957C179.942 217.973 179.908 217.979 179.875 217.976Z" fill="#3FB690"></path><path d="M179.432 191.687C175.272 192.034 176.66 204.512 176.66 204.512C177.701 215.26 179.085 220.113 180.125 220.46C181.166 220.807 183.244 205.206 183.244 201.394C183.244 201.394 183.591 191.34 179.432 191.687Z" fill="#90DAD8"></path><path d="M179.952 218.725C179.907 218.719 179.865 218.696 179.836 218.66C179.807 218.625 179.793 218.579 179.797 218.533C181.167 207.243 179.468 193.062 179.455 192.92C179.451 192.898 179.453 192.875 179.459 192.853C179.465 192.831 179.475 192.81 179.489 192.792C179.503 192.774 179.521 192.759 179.541 192.748C179.561 192.737 179.583 192.731 179.605 192.728C179.651 192.723 179.696 192.736 179.732 192.764C179.768 192.793 179.791 192.834 179.797 192.879C179.797 193.021 181.518 207.243 180.144 218.574C180.138 218.62 180.115 218.661 180.079 218.689C180.043 218.717 179.998 218.73 179.952 218.725Z" fill="white"></path><path d="M185.121 226.619H174.569C174.414 226.631 174.259 226.587 174.134 226.494C174.008 226.402 173.92 226.268 173.884 226.117L172.35 215.182C172.336 215.068 172.347 214.952 172.382 214.842C172.416 214.732 172.473 214.631 172.549 214.545C172.626 214.458 172.719 214.389 172.824 214.342C172.929 214.294 173.043 214.269 173.158 214.269H186.532C186.647 214.269 186.761 214.293 186.867 214.34C186.972 214.388 187.066 214.457 187.142 214.543C187.219 214.629 187.276 214.731 187.31 214.841C187.344 214.951 187.354 215.068 187.34 215.182L185.811 226.117C185.774 226.269 185.685 226.403 185.558 226.495C185.432 226.587 185.277 226.631 185.121 226.619Z" fill="#D0DAED"></path><path d="M74.6001 47.5643H49.2266C47.6336 47.5619 46.1067 46.9281 44.9803 45.8018C43.8539 44.6755 43.2201 43.1487 43.2177 41.5559C43.2189 39.9632 43.8525 38.4361 44.9792 37.3103C46.106 36.1845 47.6337 35.5521 49.2266 35.5521H74.5955C76.1884 35.5521 77.7161 36.1845 78.8428 37.3103C79.9696 38.4361 80.6032 39.9632 80.6044 41.5559C80.6044 43.1494 79.9713 44.6777 78.8444 45.8045C77.7176 46.9313 76.1892 47.5643 74.5955 47.5643H74.6001Z" fill="#D8E2F4"></path><path d="M68.5909 39.6031C69.7562 34.712 66.7355 29.8025 61.844 28.6373C56.9526 27.4721 52.0426 30.4924 50.8772 35.3835C49.7119 40.2745 52.7326 45.1841 57.6241 46.3493C62.5156 47.5145 67.4256 44.4941 68.5909 39.6031Z" fill="#D8E2F4"></path><path d="M193.513 37.1221H149.168C146.383 37.1221 143.711 36.0158 141.742 34.0465C139.772 32.0772 138.666 29.4062 138.666 26.6212C138.666 23.8362 139.772 21.1652 141.742 19.1959C143.711 17.2266 146.383 16.1202 149.168 16.1202H193.513C196.299 16.1202 198.97 17.2266 200.939 19.1959C202.909 21.1652 204.015 23.8362 204.015 26.6212C204.015 29.4062 202.909 32.0772 200.939 34.0465C198.97 36.0158 196.299 37.1221 193.513 37.1221Z" fill="white"></path><path d="M178.778 30.7625C184.994 24.547 184.994 14.4696 178.778 8.25415C172.562 2.03865 162.484 2.03866 156.268 8.25415C150.052 14.4696 150.052 24.547 156.268 30.7625C162.484 36.9779 172.562 36.978 178.778 30.7625Z" fill="white"></path><path d="M103.59 72.3694H199.628C199.835 72.3694 200.04 72.3285 200.231 72.249C200.423 72.1696 200.597 72.0531 200.743 71.9064C200.889 71.7596 201.005 71.5855 201.084 71.3938C201.163 71.2022 201.203 70.9969 201.203 70.7897V53.2987C201.204 53.0915 201.164 52.8862 201.085 52.6945C201.007 52.5029 200.891 52.3288 200.744 52.1822C200.598 52.0357 200.424 51.9198 200.232 51.841C200.04 51.7623 199.835 51.7224 199.628 51.7236H103.59C103.383 51.723 103.177 51.7633 102.986 51.8422C102.794 51.9211 102.62 52.037 102.473 52.1833C102.326 52.3297 102.21 52.5035 102.13 52.6949C102.051 52.8863 102.01 53.0915 102.01 53.2987V70.8079C102.011 71.2265 102.178 71.6276 102.474 71.9236C102.77 72.2196 103.171 72.3864 103.59 72.3876V72.3694Z" fill="white"></path><path d="M185.025 68.3653H195.984C196.226 68.3653 196.458 68.2691 196.629 68.0979C196.801 67.9266 196.897 67.6944 196.897 67.4522V56.4947C196.897 56.2525 196.801 56.0202 196.629 55.849C196.458 55.6777 196.226 55.5815 195.984 55.5815H185.025C184.783 55.5815 184.551 55.6777 184.379 55.849C184.208 56.0202 184.112 56.2525 184.112 56.4947V67.4522C184.112 67.6944 184.208 67.9266 184.379 68.0979C184.551 68.2691 184.783 68.3653 185.025 68.3653Z" fill="#D0DAED"></path><path d="M114.713 58.499H176.007C176.196 58.4996 176.383 58.4628 176.558 58.3907C176.733 58.3186 176.892 58.2127 177.025 58.079C177.16 57.9462 177.268 57.7877 177.341 57.6128C177.414 57.438 177.451 57.2503 177.45 57.0608C177.45 56.6782 177.298 56.3112 177.027 56.0407C176.757 55.7701 176.39 55.6181 176.007 55.6181H114.713C114.33 55.6181 113.963 55.7701 113.692 56.0407C113.422 56.3112 113.27 56.6782 113.27 57.0608C113.27 57.2501 113.307 57.4375 113.38 57.6123C113.452 57.787 113.559 57.9458 113.693 58.0794C113.827 58.213 113.986 58.3188 114.161 58.3908C114.336 58.4629 114.523 58.4996 114.713 58.499Z" fill="#D0DAED"></path><path d="M114.713 63.8727H176.007C176.229 63.8723 176.447 63.8211 176.646 63.7229C176.845 63.6248 177.018 63.4823 177.153 63.3065C177.347 63.0553 177.451 62.747 177.45 62.4299C177.45 62.2405 177.413 62.0529 177.34 61.8778C177.268 61.7028 177.161 61.5437 177.027 61.4098C176.893 61.2758 176.734 61.1695 176.559 61.097C176.384 61.0245 176.197 60.9872 176.007 60.9872H114.713C114.33 60.9872 113.963 61.1392 113.692 61.4098C113.422 61.6803 113.27 62.0473 113.27 62.4299C113.269 62.6194 113.306 62.8071 113.379 62.9819C113.452 63.1568 113.559 63.3153 113.694 63.4481C113.828 63.5824 113.986 63.689 114.161 63.7619C114.336 63.8347 114.523 63.8724 114.713 63.8727Z" fill="#D0DAED"></path><path d="M145.492 100.918H49.4546C49.2473 100.918 49.0421 100.877 48.8507 100.798C48.6593 100.718 48.4854 100.602 48.3391 100.455C48.1927 100.309 48.0768 100.134 47.9979 99.9427C47.919 99.7511 47.8787 99.5458 47.8793 99.3386V81.8294C47.8769 81.621 47.9159 81.4142 47.9939 81.221C48.072 81.0278 48.1877 80.852 48.3342 80.7038C48.4807 80.5555 48.6552 80.4379 48.8475 80.3576C49.0398 80.2773 49.2462 80.236 49.4546 80.236H145.492C145.699 80.2354 145.905 80.2757 146.096 80.3546C146.288 80.4334 146.462 80.5494 146.609 80.6957C146.756 80.842 146.872 81.0159 146.952 81.2073C147.031 81.3987 147.072 81.6039 147.072 81.8111V99.3203C147.071 99.7389 146.904 100.14 146.608 100.436C146.312 100.732 145.911 100.899 145.492 100.9V100.918Z" fill="white"></path><path d="M64.057 96.9096H53.0985C52.8563 96.9096 52.624 96.8134 52.4527 96.6422C52.2815 96.4709 52.1853 96.2387 52.1853 95.9965V85.039C52.1853 84.7968 52.2815 84.5645 52.4527 84.3933C52.624 84.2221 52.8563 84.1259 53.0985 84.1259H64.057C64.2992 84.1259 64.5315 84.2221 64.7027 84.3933C64.874 84.5645 64.9702 84.7968 64.9702 85.039V95.9965C64.9702 96.2387 64.874 96.4709 64.7027 96.6422C64.5315 96.8134 64.2992 96.9096 64.057 96.9096Z" fill="#D0DAED"></path><path d="M134.37 87.0478H73.075C72.886 87.0484 72.6987 87.0116 72.5239 86.9395C72.3492 86.8674 72.1904 86.7615 72.0568 86.6278C71.9216 86.495 71.8144 86.3365 71.7415 86.1617C71.6686 85.9868 71.6314 85.7991 71.6321 85.6097C71.6321 85.227 71.7841 84.8601 72.0547 84.5895C72.3253 84.3189 72.6923 84.1669 73.075 84.1669H134.37C134.752 84.1669 135.119 84.3189 135.39 84.5895C135.66 84.8601 135.812 85.227 135.812 85.6097C135.812 85.7989 135.775 85.9863 135.703 86.1611C135.63 86.3359 135.524 86.4946 135.39 86.6282C135.256 86.7618 135.096 86.8677 134.921 86.9397C134.746 87.0117 134.559 87.0484 134.37 87.0478Z" fill="#D0DAED"></path><path d="M114.781 92.4216H73.075C72.8534 92.4213 72.6348 92.37 72.4361 92.2719C72.2373 92.1737 72.0638 92.0313 71.9289 91.8554C71.7355 91.6043 71.6311 91.2959 71.6321 90.9788C71.6321 90.7896 71.6695 90.6022 71.742 90.4274C71.8146 90.2526 71.921 90.0939 72.055 89.9603C72.189 89.8267 72.3481 89.7208 72.5232 89.6488C72.6982 89.5768 72.8857 89.5401 73.075 89.5407H114.781C114.971 89.5395 115.158 89.5758 115.334 89.6476C115.509 89.7194 115.668 89.8252 115.803 89.9589C115.937 90.0927 116.043 90.2517 116.115 90.4267C116.188 90.6018 116.225 90.7894 116.224 90.9788C116.224 91.3615 116.072 91.7284 115.801 91.999C115.531 92.2696 115.164 92.4216 114.781 92.4216Z" fill="#D0DAED"></path><path d="M73.2798 111.214C73.2798 111.214 70.2984 108.698 70.0838 108.858C69.8692 109.018 70.2071 110.451 70.2071 110.451C70.2071 110.451 68.1891 108.94 67.3262 109.785C66.4633 110.629 69.0383 116.272 71.5768 116.957L73.2798 111.214Z" fill="#FFAA9D"></path><path d="M174.596 108.31C174.596 108.31 177.582 105.79 177.792 105.954C178.002 106.118 177.674 107.543 177.674 107.543C177.674 107.543 179.687 106.032 180.554 106.881C181.422 107.73 178.842 113.369 176.304 114.054L174.596 108.31Z" fill="#FFAA9D"></path><path d="M103.22 217.543V222.095H118.804L119.37 216.839L103.22 217.543Z" fill="url(#paint2_linear_1771_12852)"></path><path d="M103.22 222.094L100.307 225.386C100.207 225.5 100.141 225.639 100.118 225.789C100.096 225.939 100.117 226.092 100.179 226.23C100.241 226.368 100.342 226.485 100.469 226.567C100.596 226.649 100.745 226.692 100.896 226.692H117.717C117.864 226.693 118.005 226.639 118.114 226.541C118.226 226.444 118.297 226.309 118.315 226.162L118.818 222.094H103.22Z" fill="#0B2252"></path><path d="M146.173 217.52L146.62 222.094H131.032L130.251 216.83L146.173 217.52Z" fill="url(#paint3_linear_1771_12852)"></path><path d="M146.62 222.094L149.529 225.386C149.631 225.499 149.698 225.639 149.722 225.789C149.746 225.94 149.725 226.094 149.663 226.232C149.6 226.371 149.498 226.489 149.37 226.57C149.241 226.652 149.092 226.694 148.94 226.692H132.137C131.989 226.693 131.845 226.64 131.735 226.541C131.625 226.443 131.553 226.309 131.534 226.162L131.032 222.094H146.62Z" fill="#0B2252"></path><path d="M111.046 138.073C111.046 138.073 105.078 158.404 103.973 173.877C102.868 189.35 102.919 218.054 102.919 218.054H119.571C119.571 218.054 123.466 178.853 125.023 178.712C126.58 178.57 129.662 218.054 129.662 218.054H147.086C147.086 218.054 143.15 150.547 136.926 138.073H111.046Z" fill="#135B71"></path><path d="M178.377 113.227L174.587 107.684C167.976 111.479 158.643 111.67 147.269 108.561C138.945 106.278 133.114 103.799 123.822 103.799C114.53 103.799 105.361 110.383 100.727 111.652C89.3529 114.761 80.0199 114.569 73.4129 110.775L69.6185 116.304C69.6185 116.304 85.143 129.385 108.069 125.892C107.503 133.585 106.243 145.355 106.626 147.173C107.539 151.432 139.502 151.624 141.059 146.771C141.515 145.351 139.369 130.421 139.045 122.66C162.464 126.65 178.377 113.227 178.377 113.227Z" fill="url(#paint4_linear_1771_12852)"></path><path d="M132.259 96.5763L132.327 101.375L131.611 101.352C131.611 101.352 131.035 105.324 128.232 104.694C127.424 104.516 126.406 103.831 126.1 103.968C125.794 104.105 125.598 105.219 125.52 105.534C125.214 106.735 121.005 105.534 121.689 104.288C122.374 103.041 123.301 101.521 123.096 101.092C122.383 99.5439 122.182 95.7043 126.045 94.4213C129.131 93.3849 132.222 94.9327 132.259 96.5763Z" fill="#FFAA9D"></path><path d="M121.694 104.288C122.338 103.119 123.306 101.521 123.1 101.092C123.1 101.092 124.726 103.589 126.223 103.968C126.181 103.96 126.138 103.96 126.095 103.968C125.744 104.132 125.593 105.219 125.515 105.534C125.219 106.717 121.009 105.52 121.694 104.288Z" fill="#FF9F91"></path><path d="M125.772 98.9276C123.945 98.6217 125.087 102.649 123.096 102.512C121.105 102.375 119.713 98.0236 121.178 94.6679C122.644 91.3122 125.416 91.4993 128.064 91.9559C130.712 92.4125 133.963 93.6132 133.959 95.6084C133.959 100.425 128.251 96.3846 127.872 97.8319C127.584 98.955 127.132 102.192 128.297 102.27C129.461 102.347 130.644 101.384 131.561 101.63C132.087 101.772 133.543 108.095 129.735 108.305C125.927 108.515 125.023 105.196 125.817 102.484C126.575 99.9138 126.653 99.0783 125.772 98.9276Z" fill="#14336A"></path><path d="M67.0616 153.318C66.9098 153.319 66.762 153.269 66.6416 153.176C61.3221 149.067 58.7697 145.095 59.0574 141.365C59.345 137.635 62.3723 135.124 65.2991 132.736C68.3219 130.266 71.1848 127.933 71.3354 124.281C71.4268 122.185 70.5729 120.806 69.6688 119.345C68.6917 117.765 67.678 116.149 67.8835 113.638C68.2397 109.228 72.203 105.164 79.6639 101.548C79.8274 101.469 80.0157 101.458 80.1874 101.517C80.3591 101.577 80.5001 101.702 80.5794 101.866C80.6587 102.029 80.6698 102.217 80.6103 102.389C80.5508 102.561 80.4255 102.702 80.2621 102.781C73.2669 106.169 69.5638 109.858 69.2488 113.738C69.0798 115.788 69.9337 117.163 70.8332 118.615C71.7327 120.066 72.8103 121.811 72.7053 124.326C72.5272 128.6 69.2899 131.234 66.1621 133.791C63.3357 136.074 60.6829 138.27 60.4226 141.461C60.1623 144.652 62.5458 148.277 67.4771 152.081C67.5906 152.168 67.6739 152.288 67.7155 152.425C67.7571 152.562 67.7548 152.708 67.709 152.843C67.6631 152.979 67.5761 153.097 67.46 153.18C67.3439 153.263 67.2046 153.308 67.0616 153.309V153.318Z" fill="#E0E9F3"></path><path d="M84.097 106.767C83.0563 107.004 81.9687 106.927 80.9717 106.546C79.9747 106.165 79.1132 105.497 78.4959 104.626C77.8787 103.755 77.5335 102.721 77.5041 101.654C77.4746 100.587 77.7622 99.5352 78.3305 98.6317C78.8988 97.7283 79.7222 97.0136 80.6966 96.5781C81.671 96.1426 82.7528 96.0058 83.8049 96.1851C84.8571 96.3643 85.8325 96.8515 86.6078 97.5851C87.383 98.3187 87.9233 99.2658 88.1604 100.306C88.3184 100.997 88.3386 101.713 88.2199 102.412C88.1011 103.111 87.8457 103.779 87.4683 104.379C87.0909 104.979 86.5989 105.499 86.0204 105.909C85.4419 106.318 84.7883 106.61 84.097 106.767Z" fill="#3FB790"></path><path d="M90.0875 106.89C88.9415 107.155 87.3481 104.374 86.4898 100.69C85.6314 97.0055 85.9008 93.8004 87.0468 93.5402C88.1928 93.2799 89.7862 96.0558 90.6491 99.7403C91.512 103.425 91.2335 106.63 90.0875 106.89Z" fill="#4FC7A0"></path><path d="M82.5219 102.151L82.2891 101.133C81.9215 99.4985 82.2155 97.7852 83.1069 96.3669C83.9982 94.9487 85.4145 93.9406 87.0465 93.563L90.0872 106.913C88.4528 107.28 86.7395 106.985 85.3219 106.093C83.9042 105.201 82.8975 103.783 82.5219 102.151Z" fill="#4FC7A0"></path><path d="M89.7773 105.525C88.8641 105.735 87.5812 103.525 86.9146 100.594C86.248 97.6629 86.458 95.1153 87.3712 94.9053C88.2843 94.6953 89.5672 96.905 90.2338 99.8362C90.9004 102.767 90.6949 105.319 89.7773 105.525Z" fill="#3FB790"></path><path d="M88.298 98.7039C88.1428 98.7404 87.9236 98.366 87.8095 97.8638C87.6954 97.3616 87.7273 96.9507 87.8871 96.8959C88.0469 96.8411 88.2615 97.2383 88.3711 97.7359C88.4806 98.2336 88.4533 98.6719 88.298 98.7039Z" fill="#14336A"></path><path d="M89.3897 103.502C89.5446 103.467 89.578 103.033 89.4644 102.534C89.3507 102.035 89.133 101.659 88.9781 101.694C88.8232 101.73 88.7898 102.163 88.9035 102.662C89.0171 103.161 89.2348 103.537 89.3897 103.502Z" fill="#14336A"></path><path d="M67.0616 153.318C66.9098 153.319 66.762 153.269 66.6416 153.176C61.3221 149.067 58.7697 145.095 59.0574 141.365C59.345 137.635 62.3723 135.124 65.2991 132.736C68.3219 130.266 71.1848 127.933 71.3354 124.281C71.4268 122.185 70.5729 120.806 69.6688 119.345C68.6917 117.765 67.678 116.149 67.8835 113.638C68.2397 109.228 72.203 105.164 79.6639 101.548C79.8274 101.469 80.0157 101.458 80.1874 101.517C80.3591 101.577 80.5001 101.702 80.5794 101.866C80.6587 102.029 80.6698 102.217 80.6103 102.389C80.5508 102.561 80.4255 102.702 80.2621 102.781C73.2669 106.169 69.5638 109.858 69.2488 113.738C69.0798 115.788 69.9337 117.163 70.8332 118.615C71.7327 120.066 72.8103 121.811 72.7053 124.326C72.5272 128.6 69.2899 131.234 66.1621 133.791C63.3357 136.074 60.6829 138.27 60.4226 141.461C60.1623 144.652 62.5458 148.277 67.4771 152.081C67.5906 152.168 67.6739 152.288 67.7155 152.425C67.7571 152.562 67.7548 152.708 67.709 152.843C67.6631 152.979 67.5761 153.097 67.46 153.18C67.3439 153.263 67.2046 153.308 67.0616 153.309V153.318Z" fill="#6DA744"></path><path d="M84.097 106.767C83.0563 107.004 81.9687 106.927 80.9717 106.546C79.9747 106.165 79.1132 105.497 78.4959 104.626C77.8787 103.755 77.5335 102.721 77.5041 101.654C77.4746 100.587 77.7622 99.5352 78.3305 98.6317C78.8988 97.7283 79.7222 97.0136 80.6966 96.5781C81.671 96.1426 82.7528 96.0058 83.8049 96.1851C84.8571 96.3643 85.8325 96.8515 86.6078 97.5851C87.383 98.3187 87.9233 99.2658 88.1604 100.306C88.3184 100.997 88.3386 101.713 88.2199 102.412C88.1011 103.111 87.8457 103.779 87.4683 104.379C87.0909 104.979 86.5989 105.499 86.0204 105.909C85.4419 106.318 84.7883 106.61 84.097 106.767Z" fill="#6DA744"></path><path d="M90.0875 106.89C88.9415 107.155 87.3481 104.374 86.4898 100.69C85.6314 97.0055 85.9008 93.8004 87.0468 93.5402C88.1928 93.2799 89.7862 96.0558 90.6491 99.7403C91.512 103.425 91.2335 106.63 90.0875 106.89Z" fill="#6DA744"></path><path d="M82.5219 102.151L82.2891 101.133C81.9215 99.4985 82.2155 97.7852 83.1069 96.3669C83.9982 94.9487 85.4145 93.9406 87.0465 93.563L90.0872 106.913C88.4528 107.28 86.7395 106.985 85.3219 106.093C83.9042 105.201 82.8975 103.783 82.5219 102.151Z" fill="#98C17C"></path><path d="M89.7773 105.525C88.8641 105.735 87.5812 103.525 86.9146 100.594C86.248 97.6629 86.458 95.1153 87.3712 94.9053C88.2843 94.6953 89.5672 96.905 90.2338 99.8362C90.9004 102.767 90.6949 105.319 89.7773 105.525Z" fill="#B6D3A1"></path><path d="M88.298 98.7039C88.1428 98.7404 87.9236 98.366 87.8095 97.8638C87.6954 97.3616 87.7273 96.9507 87.8871 96.8959C88.0469 96.8411 88.2615 97.2383 88.3711 97.7359C88.4806 98.2336 88.4533 98.6719 88.298 98.7039Z" fill="#135B71"></path><path d="M89.3897 103.502C89.5446 103.467 89.578 103.033 89.4644 102.534C89.3507 102.035 89.133 101.659 88.9781 101.694C88.8232 101.73 88.7898 102.163 88.9035 102.662C89.0171 103.161 89.2348 103.537 89.3897 103.502Z" fill="#135B71"></path><path d="M204.321 127.308C204.176 127.307 204.034 127.261 203.916 127.175C203.799 127.089 203.712 126.967 203.668 126.828C201.91 121.194 199.586 118.007 196.764 117.364C194.879 116.93 193.276 117.756 191.587 118.628C189.897 119.5 188.157 120.4 186.107 120.025C181.998 119.286 178.852 113.917 176.555 103.589C176.528 103.417 176.567 103.242 176.665 103.098C176.762 102.954 176.911 102.852 177.081 102.814C177.25 102.776 177.428 102.803 177.578 102.891C177.728 102.979 177.839 103.121 177.888 103.288C180.025 112.876 182.875 118.035 186.349 118.66C187.961 118.948 189.427 118.204 190.975 117.396C192.728 116.482 194.714 115.464 197.084 116.026C200.422 116.788 203.079 120.286 204.992 126.417C205.019 126.504 205.029 126.594 205.02 126.684C205.012 126.774 204.985 126.862 204.943 126.941C204.9 127.021 204.843 127.092 204.773 127.149C204.703 127.207 204.622 127.249 204.536 127.276C204.467 127.298 204.394 127.309 204.321 127.308Z" fill="#6DA744"></path><path d="M181.185 101.64C180.663 102.925 179.686 103.974 178.441 104.587C177.196 105.199 175.769 105.333 174.431 104.962C173.094 104.591 171.94 103.741 171.188 102.575C170.436 101.408 170.14 100.006 170.355 98.6354C170.418 98.2108 179.815 95.266 180.4 96.0147C181.015 96.7996 181.412 97.7335 181.55 98.7214C181.688 99.7093 181.562 100.716 181.185 101.64Z" fill="#6DA744"></path><path d="M178.658 97.7629L178.742 97.7403C179.107 97.6419 179.323 97.266 179.225 96.9008L177.73 91.3598C177.632 90.9946 177.256 90.7784 176.891 90.8768L176.807 90.8994C176.442 90.9979 176.226 91.3737 176.324 91.7389L177.818 97.28C177.917 97.6452 178.293 97.8614 178.658 97.7629Z" fill="#135B71"></path><path d="M172.81 99.3506L172.893 99.328C173.258 99.2295 173.475 98.8536 173.376 98.4885L171.881 92.9477C171.782 92.5825 171.406 92.3663 171.041 92.4649L170.958 92.4875C170.592 92.586 170.376 92.9619 170.475 93.327L171.97 98.8678C172.068 99.233 172.444 99.4492 172.81 99.3506Z" fill="#135B71"></path><path d="M169.132 96.7379L180.67 93.7371C180.938 93.6676 181.221 93.7071 181.46 93.8468C181.698 93.9866 181.87 94.2153 181.94 94.4825L182.02 94.7918C182.297 95.8558 182.14 96.9863 181.583 97.9344C181.026 98.8825 180.116 99.5707 179.052 99.8474L173.519 101.286C172.455 101.563 171.324 101.406 170.376 100.849C169.428 100.292 168.74 99.3819 168.463 98.3178L168.388 98.0306C168.35 97.8969 168.34 97.7569 168.357 97.6189C168.374 97.4809 168.418 97.3478 168.487 97.2273C168.557 97.1068 168.65 97.0014 168.76 96.9174C168.871 96.8333 168.998 96.7723 169.132 96.7379Z" fill="#98C17C"></path></g><defs><linearGradient id="paint0_linear_1771_12852" x1="124" y1="222.782" x2="124" y2="-21.0082" gradientUnits="userSpaceOnUse"><stop stop-color="#FEFEFD"></stop><stop offset="1" stop-color="#EBF3FF"></stop></linearGradient><linearGradient id="paint1_linear_1771_12852" x1="124" y1="212.484" x2="124" y2="141.009" gradientUnits="userSpaceOnUse"><stop stop-color="#FEFEFD"></stop><stop offset="0.84" stop-color="#EBF3FF"></stop></linearGradient><linearGradient id="paint2_linear_1771_12852" x1="103.215" y1="219.465" x2="119.37" y2="219.465" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAA9D"></stop><stop offset="0.97" stop-color="#FF9F91"></stop></linearGradient><linearGradient id="paint3_linear_1771_12852" x1="5602.78" y1="2806.48" x2="5015.94" y2="2806.48" gradientUnits="userSpaceOnUse"><stop stop-color="#FFAA9D"></stop><stop offset="0.97" stop-color="#FF9F91"></stop></linearGradient><linearGradient id="paint4_linear_1771_12852" x1="69.6185" y1="127.093" x2="178.377" y2="127.093" gradientUnits="userSpaceOnUse"><stop stop-color="#E6763E"></stop><stop offset="0.96" stop-color="#EC9534"></stop></linearGradient><clipPath id="clip0_1771_12852"><rect width="250" height="250" fill="white"></rect></clipPath></defs>',2),W3=[j3];function q3(s,t){return w(),D("svg",N3,W3)}const Y3=St(H3,[["render",q3]]),K3={components:{MaintainceModeIllustration:Y3,SpiceworksButton:ut},created(){document.title="Under Maintenance - Spiceworks Help Desk"},methods:{routeToTicketsPage(){this.$router.push({name:"Tickets"})}}},X3={class:"tw-ml-4 tw-mt-6 tw-flex tw-flex-wrap tw-gap-4 md:tw-mt-16 xl:tw-ml-36 xl:tw-gap-16"},G3=g("div",{class:"tw-w-0 tw-basis-full md:tw-basis-auto"},null,-1),Z3={class:"tw-flex tw-flex-col"},Q3=g("span",{class:"tw-max-w-sm tw-pb-4 tw-text-xl tw-leading-snug md:tw-text-2xl"},"Maintenance Mode On!",-1),J3=g("span",{class:"tw-text-medium tw-max-w-sm md:tw-text-lg"},"The settings page is currently unavailable, as we are either adding new features or fixing bugs to improve the experience. ",-1),t7=g("br",null,null,-1),e7=g("span",{class:"tw-text-medium tw-max-w-sm md:tw-text-lg"},"We apologize for the inconvenience and appreciate your patience. Thank you for using Spiceworks Cloud Helpdesk.",-1);function s7(s,t,e,i,n,o){const a=_t("MaintainceModeIllustration"),r=_t("SpiceworksButton");return w(),D("section",X3,[f(a,{viewBox:"0 0 250 250",class:"tw-h-32 tw-w-32 md:tw-h-auto md:tw-w-auto","aria-hidden":"true"}),G3,g("div",Z3,[Q3,J3,t7,e7,f(vs,{class:"tw-mb-4 tw-mt-3"}),f(r,{"button-type":"primary",text:"Take me to the Tickets page",class:"tw-w-60",onClick:o.routeToTicketsPage},null,8,["onClick"])])])}const i7=St(K3,[["render",s7]]);function n7(){const s=zd({history:Od(),routes:[...ov,...Fk,..._8,...U3,{path:"/forbidden",component:au,name:"Forbidden"},{path:"/:catchAll(.*)",component:ru,name:"NotFound"},{path:"/restricted",component:lu,name:"ServiceRestriction"},{path:"/settings_maintenance",component:i7,name:"SettingsMaintenanceMode"}]});return s.afterEach((t,e)=>{window.location.pathname!=="/"&&Yt.pageView(e)}),s}const o7={class:"tw-flex tw-flex-auto tw-flex-col"},a7={class:"tw-flex tw-h-full tw-border tw-border-l-0 tw-border-solid tw-border-earl-100 dark:tw-border-none"},r7={class:"tw-flex tw-w-0 tw-min-w-0 tw-flex-auto tw-flex-col tw-border-r tw-border-earl-100 tw-font-roboto dark:tw-border-earl-600"},l7={__name:"App",setup(s){const t=xt(),e=ye(),i=Lo(),{isDarkMode:n}=Zi(),o=I(!0),a=I(!1),r=S(()=>t.getters.currentUser),l=S(()=>t.state.appConfig),c=S(()=>t.state.accountSubscriptionStatus==="active"?"Premium":"Core"),d=S(()=>c.value==="Core"?"tw-hidden lg:tw-flex":"tw-hidden"),u=S(()=>c.value==="Core"?"tw-flex lg:tw-hidden":"tw-hidden"),p=t.dispatch.bind(t,"serviceInterruption");lt(e,async v=>{if(b(),v.fullPath.startsWith("/tickets")||(i.global.name.value="lightTheme"),v.fullPath!="/restricted"){const _=await p();_.success&&_.interruptService&&(window.location.href=_.redirectUrl)}}),lt(n,v=>{const _=document.querySelector(".v-overlay-container");_&&(v?_.classList.add("tw-dark"):_.classList.remove("tw-dark"))},{immediate:!0}),re(async()=>{await t.dispatch("getAccountData",r.value.accountId),await t.dispatch("initializeLocalStorageData"),await t.dispatch("getEndUsers"),await t.dispatch("initializeFeatureFlippers"),b(),o.value=!1});function m(){const v=document.documentElement.clientHeight*.01;document.documentElement.style.setProperty("--vh",`${v}px`)}function b(){const v=new URL(window.location).searchParams.get("ticket_number");a.value=!window.location.pathname.startsWith("/tickets")||!!v}return(v,_)=>{const x=_t("router-view");return Ft((w(),M(Qd,{class:mt(["tw-h-screen tw-w-screen tw-text-sm tw-font-normal md:tw-w-full",[h(n)?"tw-dark":""]])},{default:y(()=>[l.value.mobileAppRequest?F("",!0):(w(),M(Su,{key:0})),l.value.mobileAppRequest?F("",!0):(w(),M(bl,{key:1,class:"app-mobile-domestic-nav md:tw-hidden"})),o.value?F("",!0):(w(),M(cu,{key:2})),f(du),g("main",{class:mt(["tw-flex tw-flex-auto",[a.value?"tw-overflow-y-hidden":"md:tw-overflow-y-hidden"]])},[f(uu),g("div",o7,[g("div",a7,[g("div",r7,[g("div",{class:mt(d.value)},[f(hu)],2),f(x)]),g("div",{class:mt(d.value)},[f(fu)],2)])])],2),g("div",{class:mt(u.value)},[f(pu)],2),f(Zd)]),_:1},8,["class"])),[[Cl,m]])}}};document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("vue-app");if(s!=null){const t=JSON.parse(s.getAttribute("app_config")),e=n7(),i=Rd(bu(e)),n=Bu({id:"GTM-KKTNBB",debug:!0,vueRouter:e});i.dispatch("initializeAppConfig",t),i.dispatch("initializePaywallLaunchDates"),i.dispatch("initializeFeatureFlippers"),Id(l7).use(e).use(i).use(Vd).use(n).mount("#vue-app")}});
//# sourceMappingURL=vue-90fc7c62.js.map
